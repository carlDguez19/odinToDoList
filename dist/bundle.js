(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var o=n.getElementsByTagName("script");if(o.length)for(var i=o.length-1;i>-1&&!e;)e=o[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e=t.p+"abbfad808c2786a6a2d4.png",n=t.p+"986e98635b18601755cf.png",o=t.p+"177a54134d0bd5aefd06.png",i=t.p+"edb755c23d1ebcf9c7a4.png",c=t.p+"c9c7160b568bb10d504c.png";class s{constructor(t,e,n,o,i){this.tTitle=t,this.tDesc=e,this.tDue=n,this.tPrio=o,this.tProj=i}set tTitle(t){this._tTitle=t}set tDesc(t){this._tDesc=t}set tDue(t){this._tDue=t}set tPrio(t){this._tPrio=t}set tProj(t){this._tProj=t}get tTitle(){return this._tTitle}get tDesc(){return this._tDesc}get tDue(){return this._tDue}get tPrio(){return this._tPrio}get tProj(){return this._tProj}}class l{constructor(t,e){this.title=t,this.description=e,this.toDos=[]}newTask(t,e,n,o,i){let c=new s(t,e,n,o,i);return this.toDos.push(c),c}printTasks(){for(var t=0;t<this.toDos.length;t++)console.log(this.toDos[t])}get numOfTasks(){return this.toDos.length}get title(){return this._title}get description(){return this._description}get toDoList(){return this.toDos}set title(t){this._title=t}set description(t){this._description=t}}const r=document.querySelector(".newProjectOverlay");function d(){const t=document.querySelector(".errorProjectOverlay");t.style.animation="projectSlideDown 1.5s forwards",setTimeout((function(){t.style.animation="projectSlideUp 1.5s forwards"}),2500)}function a(){document.getElementById("title").value="",document.getElementById("description").value=""}function u(t){const e=document.querySelector(".todoUL"),n=document.createElement("li"),i=document.createElement("div"),s=document.createElement("input");s.type="checkbox";const l=document.createElement("input");l.type="date";const r=document.createElement("div"),d=document.createElement("div"),a=new Image;a.src=c,a.classList.add("projEdit");const u=new Image;u.src=o,u.classList.add("projRemove"),r.appendChild(a),d.appendChild(u),n.textContent=t.tTitle+"  "+t.tDue,n.appendChild(l),i.appendChild(s),i.appendChild(r),i.appendChild(d),i.classList.add("taskButtons"),n.appendChild(i),n.classList.add("todo"),e.appendChild(n)}const p=I(".newTaskOverlay"),m=I(".taskCloseButton"),h=I(".taskSubmitButton");function g(){m.addEventListener("click",(function(){v(),p.style.animation="projectSlideUp 1.5s forwards"})),h.addEventListener("click",f)}function f(){p.style.animation="projectSlideUp 1.5s forwards";const t=function(t){const e=document.getElementById("tTitle").value,n=document.getElementById("tDescription").value,o=document.getElementById("tDueDate").value,i=document.getElementById("tTaskPrio").value,c=I(".projectNameMain").textContent;console.log(c);const s=L(c);if(e&&o){console.log(s.title);const t=s.newTask(e,n,o,i,s.title);return v(),t}return d(),v(),void(p.style.animation="projectSlideDown 1.5s forwards")}();t&&u(t),v(),h.removeEventListener("click",f)}function v(){document.getElementById("tTitle").value="",document.getElementById("tDescription").value="",document.getElementById("tDueDate").value="",document.getElementById("tTaskPrio").value="Select One"}const y=document.querySelector(".newProjectOverlay");let C=!1,j=null;function w(){document.addEventListener("click",E)}var E=function(t){const e=t.target.matches(".projEdit"),n=t.target.matches(".projRemove"),o=t.target.matches(".projAdd"),i=I(".projectNameMain");if(j=i,e)console.log("editButton clicked"),c=i.textContent,y.style.animation="projectSlideDown 1.5s forwards",I("#title").value=c,C=!0;else if(n){console.log("removeButton clicked"),function(t){const e=I(".sidebarProject"),n=e.children;for(let o=0;o<n.length;o++)n[o].textContent==t&&e.removeChild(n[o])}(i.textContent),S(i.textContent),P();for(let t=0;t<B.length;t++)console.log(t+1+" "+B[t].title)}else o&&(p.style.animation="projectSlideDown 1.5s forwards",g());var c};function S(t){for(let e=0;e<B.length;e++)B[e].title==t&&B.splice(e,1)}function L(t){let e=0;for(let n=0;n<B.length;n++)if(e=n,B[n].title==t)return B[n]}const D=I(".projectSection");function k(t){const e=I(".sidebarProject");let n=document.createElement("span");n.textContent=t,n.classList.add("projectNameSidebar"),e.appendChild(n)}function b(t){P();const e=document.createElement("div"),n=document.createElement("ul");n.classList.add("todoUL");const s=document.createElement("input");s.type="checkbox",s.classList.add("projectCheckbox");const l=document.createElement("span");if(t.title.length>30){let e=t.title.slice(0,31);l.textContent=e+"..."}else l.textContent=t.title;l.classList.add("projectNameMain");const r=document.createElement("div"),d=document.createElement("div"),a=document.createElement("div"),p=document.createElement("div"),m=new Image;m.src=i,m.classList.add("projAdd");const h=new Image;h.src=c,h.classList.add("projEdit");const g=new Image;g.src=o,g.classList.add("projRemove"),d.appendChild(m),a.appendChild(h),p.appendChild(g),r.appendChild(d),r.appendChild(a),r.appendChild(p),r.classList.add("projectOptions"),e.appendChild(s),e.appendChild(l),e.appendChild(r),e.classList.add("project"),D.appendChild(e),D.appendChild(n),function(t){const e=t.toDoList;if(e)for(var n=0;n<e.length;n++)u(e[n])}(t),w(),console.log("this console log is after the projectElisteners it looks like its working??")}function P(){for(document.removeEventListener("click",E);D.firstChild;)D.removeChild(D.firstChild)}let B=[];function I(t){return document.querySelector(t)}!function(){const t=document.querySelector(".menuContainer"),c=document.querySelector(".mainLogo"),s=document.querySelector(".menuClose"),l=document.querySelector(".createProj"),r=new Image;r.src=e,r.classList.add("main-menu-logo");const d=new Image;d.src=n,d.classList.add("main-logo");const a=new Image;a.src=o,a.classList.add("menuClose");const u=new Image;u.src=i,u.classList.add("addProjButton"),t.appendChild(r),c.appendChild(d),s.appendChild(a),l.appendChild(u);const p=document.querySelector(".sidebar-menu"),m=document.querySelector(".newProjectOverlay");t.addEventListener("click",(function(){p.style.animation="menuSlideOn 1.5s forwards"})),s.addEventListener("click",(function(){p.style.animation="menuSlideClose 1.5s forwards"})),l.addEventListener("click",(function(){p.style.animation="menuSlideClose 1.5s forwards",m.style.animation="projectSlideDown 1.5s forwards"})),p.addEventListener("click",(t=>{"SPAN"===t.target.tagName&&(console.log("the following is e.target.value"),console.log(t.target.textContent),b(L(t.target.textContent)))}))}(),function(){const t=document.querySelector(".closeButton"),e=document.querySelector(".submitButton");t.addEventListener("click",(function(){r.style.animation="projectSlideUp 1.5s forwards",a()})),e.addEventListener("click",(function(){r.style.animation="projectSlideUp 1.5s forwards";const t=function(){const t=document.getElementById("title").value;let e=document.getElementById("description").value;if(t){const n=new l(t,e);return B.push(n),n}return d(),a(),void(r.style.animation="projectSlideDown 1.5s forwards")}();if(C){!function(t){console.log("editTitle being replaced "+t);for(let e=0;e<B.length-1;e++)console.log("inside edit func arr "+B[e].title),B[e].title==t&&(B[e].title=B[B.length-1].title,B[e].description=B[B.length-1].description)}(j.textContent),function(t){const e=I(".sidebarProject").children;for(let n=0;n<e.length;n++)e[n].textContent==t&&(console.log("found sidebar project named "+e[n].textContent),e[n].textContent=B[e.length].title)}(j.textContent),I(".projectNameMain").textContent=B[B.length-1].title,S(t.title),C=!1;for(let t=0;t<B.length;t++)console.log(t+1+" "+B[t].title)}else{if(t){k(t.title),b(t);for(let t=0;t<B.length;t++)console.log(t+1+" "+B[t].title)}a()}}))}();const T=new l("defaultProject","This is a default project. You can also create your own :)");B[0]=T,b(T),k("defaultProject"),w(),g()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFDQSxJQUFJQSxFQUFzQixDQUFDLEVDRDNCQSxFQUFvQkMsRUFBSSxXQUN2QixHQUEwQixpQkFBZkMsV0FBeUIsT0FBT0EsV0FDM0MsSUFDQyxPQUFPQyxNQUFRLElBQUlDLFNBQVMsY0FBYixFQUNoQixDQUFFLE1BQU9DLEdBQ1IsR0FBc0IsaUJBQVhDLE9BQXFCLE9BQU9BLE1BQ3hDLENBQ0EsQ0FQdUIsRyxNQ0F4QixJQUFJQyxFQUNBUCxFQUFvQkMsRUFBRU8sZ0JBQWVELEVBQVlQLEVBQW9CQyxFQUFFUSxTQUFXLElBQ3RGLElBQUlDLEVBQVdWLEVBQW9CQyxFQUFFUyxTQUNyQyxJQUFLSCxHQUFhRyxJQUNiQSxFQUFTQyxnQkFDWkosRUFBWUcsRUFBU0MsY0FBY0MsTUFDL0JMLEdBQVcsQ0FDZixJQUFJTSxFQUFVSCxFQUFTSSxxQkFBcUIsVUFDNUMsR0FBR0QsRUFBUUUsT0FFVixJQURBLElBQUlDLEVBQUlILEVBQVFFLE9BQVMsRUFDbEJDLEdBQUssSUFBTVQsR0FBV0EsRUFBWU0sRUFBUUcsS0FBS0osR0FFeEQsQ0FJRCxJQUFLTCxFQUFXLE1BQU0sSUFBSVUsTUFBTSx5REFDaENWLEVBQVlBLEVBQVVXLFFBQVEsT0FBUSxJQUFJQSxRQUFRLFFBQVMsSUFBSUEsUUFBUSxZQUFhLEtBQ3BGbEIsRUFBb0JtQixFQUFJWixDLGdMQ2xCakIsTUFBTWEsRUFDVCxXQUFBQyxDQUFZQyxFQUFRQyxFQUFPQyxFQUFNQyxFQUFPQyxHQUNwQ3ZCLEtBQUttQixPQUFTQSxFQUNkbkIsS0FBS29CLE1BQVFBLEVBQ2JwQixLQUFLcUIsS0FBT0EsRUFDWnJCLEtBQUtzQixNQUFRQSxFQUNidEIsS0FBS3VCLE1BQVFBLENBQ2pCLENBQ0EsVUFBSUosQ0FBT0ssR0FDUHhCLEtBQUt5QixRQUFVRCxDQUNuQixDQUNBLFNBQUlKLENBQU1NLEdBQ04xQixLQUFLMkIsT0FBU0QsQ0FDbEIsQ0FDQSxRQUFJTCxDQUFLTyxHQUNMNUIsS0FBSzZCLE1BQVFELENBQ2pCLENBQ0EsU0FBSU4sQ0FBTVEsR0FDTjlCLEtBQUsrQixPQUFTRCxDQUNsQixDQUNBLFNBQUlQLENBQU1TLEdBQ05oQyxLQUFLaUMsT0FBU0QsQ0FDbEIsQ0FFQSxVQUFJYixHQUNBLE9BQU9uQixLQUFLeUIsT0FDaEIsQ0FDQSxTQUFJTCxHQUNBLE9BQU9wQixLQUFLMkIsTUFDaEIsQ0FDQSxRQUFJTixHQUNBLE9BQU9yQixLQUFLNkIsS0FDaEIsQ0FDQSxTQUFJUCxHQUNBLE9BQU90QixLQUFLK0IsTUFDaEIsQ0FDQSxTQUFJUixHQUNBLE9BQU92QixLQUFLaUMsTUFDaEIsRUNwQ0csTUFBTUMsRUFDVCxXQUFBaEIsQ0FBWWlCLEVBQU9DLEdBQ2ZwQyxLQUFLbUMsTUFBUUEsRUFDYm5DLEtBQUtvQyxZQUFjQSxFQUNuQnBDLEtBQUtxQyxNQUFRLEVBQ2pCLENBQ0EsT0FBQUMsQ0FBUUMsRUFBUUMsRUFBT0MsRUFBTUMsRUFBT0MsR0FDaEMsSUFBSUMsRUFBSSxJQUFJM0IsRUFBS3NCLEVBQVFDLEVBQU9DLEVBQU1DLEVBQU9DLEdBRTdDLE9BREEzQyxLQUFLcUMsTUFBTVEsS0FBS0QsR0FDVEEsQ0FDWCxDQUVBLFVBQUFFLEdBQ0ksSUFBSSxJQUFJakMsRUFBSSxFQUFHQSxFQUFJYixLQUFLcUMsTUFBTXpCLE9BQVFDLElBQ2xDa0MsUUFBUUMsSUFBSWhELEtBQUtxQyxNQUFNeEIsR0FFL0IsQ0FFQSxjQUFJb0MsR0FDQSxPQUFPakQsS0FBS3FDLE1BQU16QixNQUN0QixDQUVBLFNBQUl1QixHQUNBLE9BQU9uQyxLQUFLa0QsTUFDaEIsQ0FDQSxlQUFJZCxHQUNBLE9BQU9wQyxLQUFLbUQsWUFDaEIsQ0FDQSxZQUFJQyxHQUNBLE9BQU9wRCxLQUFLcUMsS0FDaEIsQ0FFQSxTQUFJRixDQUFNa0IsR0FDTnJELEtBQUtrRCxPQUFTRyxDQUNsQixDQUNBLGVBQUlqQixDQUFZa0IsR0FDWnRELEtBQUttRCxhQUFlRyxDQUN4QixFQ2pDSixNQUFNQyxFQUFjaEQsU0FBU2lELGNBQWMsc0JBeUVwQyxTQUFTQyxJQUNaLE1BQU1DLEVBQWVuRCxTQUFTaUQsY0FBYyx3QkFDNUNFLEVBQWFDLE1BQU1DLFVBQVksaUNBQy9CQyxZQUFXLFdBQ1BILEVBQWFDLE1BQU1DLFVBQVksOEJBQ25DLEdBQUcsS0FDUCxDQUVPLFNBQVNFLElBQ1p2RCxTQUFTd0QsZUFBZSxTQUFTQyxNQUFRLEdBQ3pDekQsU0FBU3dELGVBQWUsZUFBZUMsTUFBUSxFQUNuRCxDQ3ZGTyxTQUFTQyxFQUFrQkMsR0FDOUIsTUFBTUMsRUFBUzVELFNBQVNpRCxjQUFjLFdBRWhDWSxFQUFTN0QsU0FBUzhELGNBQWMsTUFHaENDLEVBQVkvRCxTQUFTOEQsY0FBYyxPQUVuQ0UsRUFBZWhFLFNBQVM4RCxjQUFjLFNBQzVDRSxFQUFhQyxLQUFPLFdBR3BCLE1BQU1DLEVBQWdCbEUsU0FBUzhELGNBQWMsU0FDN0NJLEVBQWNELEtBQU8sT0FHckIsTUFBTUUsRUFBY25FLFNBQVM4RCxjQUFjLE9BQ3JDTSxFQUFnQnBFLFNBQVM4RCxjQUFjLE9BRXZDTyxFQUFlLElBQUlDLE1BQ3pCRCxFQUFhbkUsSUFBTSxFQUNuQm1FLEVBQWFFLFVBQVVDLElBQUksWUFFM0IsTUFBTUMsRUFBaUIsSUFBSUgsTUFDM0JHLEVBQWV2RSxJQUFNLEVBQ3JCdUUsRUFBZUYsVUFBVUMsSUFBSSxjQUU3QkwsRUFBWU8sWUFBWUwsR0FDeEJELEVBQWNNLFlBQVlELEdBRTFCWixFQUFPYyxZQUFjaEIsRUFBSy9DLE9BQVMsS0FBTytDLEVBQUs3QyxLQUMvQytDLEVBQU9hLFlBQVlSLEdBRW5CSCxFQUFVVyxZQUFZVixHQUN0QkQsRUFBVVcsWUFBWVAsR0FDdEJKLEVBQVVXLFlBQVlOLEdBRXRCTCxFQUFVUSxVQUFVQyxJQUFJLGVBRXhCWCxFQUFPYSxZQUFZWCxHQUVuQkYsRUFBT1UsVUFBVUMsSUFBSSxRQUVyQlosRUFBT2MsWUFBWWIsRUFDdkIsQ0N4Q08sTUFBTWUsRUFBY0MsRUFBSSxtQkFFekJDLEVBQVlELEVBQUksb0JBQ2hCRSxFQUFhRixFQUFJLHFCQUVoQixTQUFTRyxJQUlaRixFQUFVRyxpQkFBaUIsU0FBUyxXQUNoQ0MsSUFDQU4sRUFBWXhCLE1BQU1DLFVBQVksOEJBQ2xDLElBQ0EwQixFQUFXRSxpQkFBaUIsUUFBU0UsRUFDekMsQ0FFTyxTQUFTQSxJQUNaUCxFQUFZeEIsTUFBTUMsVUFBWSwrQkFDOUIsTUFBTStCLEVBaUJILFNBQTRCQyxHQUMvQixNQUFNQyxFQUFZdEYsU0FBU3dELGVBQWUsVUFBVUMsTUFDOUM4QixFQUFXdkYsU0FBU3dELGVBQWUsZ0JBQWdCQyxNQUNuRCtCLEVBQWN4RixTQUFTd0QsZUFBZSxZQUFZQyxNQUNsRGdDLEVBQVd6RixTQUFTd0QsZUFBZSxhQUFhQyxNQUdoRGlDLEVBRE9iLEVBQUksb0JBQ0tGLFlBRXRCbkMsUUFBUUMsSUFBSWlELEdBRVosTUFBTUMsRUFBVUMsRUFBaUJGLEdBR2pDLEdBQUdKLEdBQWFFLEVBQVksQ0FDeEJoRCxRQUFRQyxJQUFJa0QsRUFBUS9ELE9BQ3BCLE1BQU1pRSxFQUFXRixFQUFRNUQsUUFBUXVELEVBQVdDLEVBQVVDLEVBQWFDLEVBQVVFLEVBQVEvRCxPQUtyRixPQURBc0QsSUFDT1csQ0FDWCxDQUlJLE9BSEEzQyxJQUNBZ0MsU0FDQU4sRUFBWXhCLE1BQU1DLFVBQVksaUNBR3RDLENBN0NxQnlDLEdBQ2RWLEdBQ0MxQixFQUFrQjBCLEdBS3RCRixJQU9BSCxFQUFXZ0Isb0JBQW9CLFFBQVNaLEVBSDVDLENBb0NPLFNBQVNELElBQ1psRixTQUFTd0QsZUFBZSxVQUFVQyxNQUFRLEdBQzFDekQsU0FBU3dELGVBQWUsZ0JBQWdCQyxNQUFRLEdBQ2hEekQsU0FBU3dELGVBQWUsWUFBWUMsTUFBUSxHQUM1Q3pELFNBQVN3RCxlQUFlLGFBQWFDLE1BQVEsWUFDakQsQ0NuRUEsTUFBTXVDLEVBQWVoRyxTQUFTaUQsY0FBYyxzQkFDckMsSUFBSWdELEdBQW9CLEVBQ3BCQyxFQUFhLEtBRWpCLFNBQVNDLElBQ1puRyxTQUFTaUYsaUJBQWlCLFFBQVNtQixFQUN2QyxDQUVPLElBQUlBLEVBQWEsU0FBU3pHLEdBTXpCLE1BQU0wRyxFQUFhMUcsRUFBRTJHLE9BQU9DLFFBQVEsYUFDOUJDLEVBQWU3RyxFQUFFMkcsT0FBT0MsUUFBUSxlQUNoQ0UsRUFBZ0I5RyxFQUFFMkcsT0FBT0MsUUFBUSxZQUNqQ0csRUFBWTdCLEVBQUksb0JBRXRCLEdBREFxQixFQUFhUSxFQUNWTCxFQUVDN0QsUUFBUUMsSUFBSSxzQkF5Q05rRSxFQXhDR0QsRUFBVS9CLFlBeUMzQnFCLEVBQWE1QyxNQUFNQyxVQUFZLGlDQUNmd0IsRUFBSSxVQUNacEIsTUFBUWtELEVBcENSVixHQUFvQixPQUtsQixHQUFHTyxFQUFhLENBRWxCaEUsUUFBUUMsSUFBSSx3QkM3QmpCLFNBQWtDa0UsR0FDckMsTUFBTUMsRUFBYy9CLEVBQUksbUJBQ2xCZ0MsRUFBc0JELEVBQVlFLFNBQ3hDLElBQUksSUFBSXhHLEVBQUksRUFBR0EsRUFBSXVHLEVBQW9CeEcsT0FBUUMsSUFDeEN1RyxFQUFvQnZHLEdBQUdxRSxhQUFlZ0MsR0FDckNDLEVBQVlHLFlBQVlGLEVBQW9CdkcsR0FHeEQsQ0RzQlkwRyxDQUF5Qk4sRUFBVS9CLGFBQ25Dc0MsRUFBY1AsRUFBVS9CLGFBQ3hCdUMsSUFHQSxJQUFJLElBQUlDLEVBQUksRUFBR0EsRUFBSUMsRUFBUS9HLE9BQVE4RyxJQUMvQjNFLFFBQVFDLElBQUswRSxFQUFFLEVBQUksSUFBS0MsRUFBUUQsR0FBR3ZGLE1BRTNDLE1BQ1E2RSxJQUNKN0IsRUFBWXhCLE1BQU1DLFVBQVksaUNBRzlCMkIsS0FZWixJQUFrQjJCLENBVmxCLEVBRU8sU0FBU00sRUFBY0ksR0FDMUIsSUFBSSxJQUFJL0csRUFBSSxFQUFHQSxFQUFJOEcsRUFBUS9HLE9BQVFDLElBQzVCOEcsRUFBUTlHLEdBQUdzQixPQUFTeUYsR0FDbkJELEVBQVFFLE9BQU9oSCxFQUFHLEVBRzlCLENBWU8sU0FBU3NGLEVBQWlCaEUsR0FFN0IsSUFBSTJGLEVBQVEsRUFDWixJQUFJLElBQUlqSCxFQUFJLEVBQUdBLEVBQUk4RyxFQUFRL0csT0FBUUMsSUFFL0IsR0FEQWlILEVBQVFqSCxFQUNMOEcsRUFBUTlHLEdBQUdzQixPQUFTQSxFQUNuQixPQUFPd0YsRUFBUTlHLEVBRzNCLENDbkZBLE1BQU1rSCxFQUFVM0MsRUFBSSxtQkFFYixTQUFTNEMsRUFBb0JkLEdBQ2hDLE1BQU1lLEVBQVc3QyxFQUFJLG1CQUNyQixJQUFJOEMsRUFBWTNILFNBQVM4RCxjQUFjLFFBQ3ZDNkQsRUFBVWhELFlBQWNnQyxFQUN4QmdCLEVBQVVwRCxVQUFVQyxJQUFJLHNCQUN4QmtELEVBQVNoRCxZQUFZaUQsRUFDekIsQ0EwQk8sU0FBU0MsRUFBcUJDLEdBQ2pDWCxJQUNBLE1BQU1ZLEVBQVU5SCxTQUFTOEQsY0FBYyxPQUVqQ2lFLEVBQVkvSCxTQUFTOEQsY0FBYyxNQUN6Q2lFLEVBQVV4RCxVQUFVQyxJQUFJLFVBRXhCLE1BQU13RCxFQUFlaEksU0FBUzhELGNBQWMsU0FDNUNrRSxFQUFhL0QsS0FBTyxXQUNwQitELEVBQWF6RCxVQUFVQyxJQUFJLG1CQUczQixNQUFNeUQsRUFBZWpJLFNBQVM4RCxjQUFjLFFBQzVDLEdBQUcrRCxFQUFRakcsTUFBTXZCLE9BQVMsR0FBRyxDQUN6QixJQUFJNkgsRUFBbUJMLEVBQVFqRyxNQUFNdUcsTUFBTSxFQUFFLElBQzdDRixFQUFhdEQsWUFBY3VELEVBQW1CLEtBQ2xELE1BQ0lELEVBQWF0RCxZQUFja0QsRUFBUWpHLE1BRXZDcUcsRUFBYTFELFVBQVVDLElBQUksbUJBRzNCLE1BQU00RCxFQUFhcEksU0FBUzhELGNBQWMsT0FFcEN1RSxFQUFTckksU0FBUzhELGNBQWMsT0FDaEN3RSxFQUFVdEksU0FBUzhELGNBQWMsT0FDakN5RSxFQUFZdkksU0FBUzhELGNBQWMsT0FFbkMwRSxFQUFVLElBQUlsRSxNQUNwQmtFLEVBQVF0SSxJQUFNLEVBQ2RzSSxFQUFRakUsVUFBVUMsSUFBSSxXQUV0QixNQUFNaUUsRUFBVyxJQUFJbkUsTUFDckJtRSxFQUFTdkksSUFBTSxFQUNmdUksRUFBU2xFLFVBQVVDLElBQUksWUFFdkIsTUFBTWtFLEVBQVUsSUFBSXBFLE1BQ3BCb0UsRUFBUXhJLElBQU0sRUFDZHdJLEVBQVFuRSxVQUFVQyxJQUFJLGNBRXRCNkQsRUFBTzNELFlBQVk4RCxHQUNuQkYsRUFBUTVELFlBQVkrRCxHQUNwQkYsRUFBVTdELFlBQVlnRSxHQUV0Qk4sRUFBVzFELFlBQVkyRCxHQUN2QkQsRUFBVzFELFlBQVk0RCxHQUN2QkYsRUFBVzFELFlBQVk2RCxHQUN2QkgsRUFBVzdELFVBQVVDLElBQUksa0JBRXpCc0QsRUFBUXBELFlBQVlzRCxHQUNwQkYsRUFBUXBELFlBQVl1RCxHQUNwQkgsRUFBUXBELFlBQVkwRCxHQUNwQk4sRUFBUXZELFVBQVVDLElBQUksV0FFdEJnRCxFQUFROUMsWUFBWW9ELEdBQ3BCTixFQUFROUMsWUFBWXFELEdBVXhCLFNBQXVCMUMsR0FFbkIsTUFBTXNELEVBQVV0RCxFQUFLeEMsU0FDckIsR0FBRzhGLEVBQ0MsSUFBSSxJQUFJckksRUFBSSxFQUFHQSxFQUFJcUksRUFBUXRJLE9BQVFDLElBQy9Cb0QsRUFBa0JpRixFQUFRckksR0FRdEMsQ0FwQklzSSxDQUFjZixHQUdkMUIsSUFDQTNELFFBQVFDLElBQUksOEVBQ2hCLENBaUJPLFNBQVN5RSxJQUVaLElBREFsSCxTQUFTK0Ysb0JBQW9CLFFBQVNLLEdBQ2hDb0IsRUFBUXFCLFlBQ1ZyQixFQUFRVCxZQUFZUyxFQUFRcUIsV0FFcEMsQ0N4SE8sSUFBSXpCLEVBQVUsR0FFZCxTQUFTdkMsRUFBSWlFLEdBQ2hCLE9BQU85SSxTQUFTaUQsY0FBYzZGLEVBQ2xDLEVBRU8sV0FDSCxNQUFNQyxFQUFnQi9JLFNBQVNpRCxjQUFjLGtCQUN2QytGLEVBQWVoSixTQUFTaUQsY0FBYyxhQUN0Q2dHLEVBQWlCakosU0FBU2lELGNBQWMsY0FDeENpRyxFQUFpQmxKLFNBQVNpRCxjQUFjLGVBRXhDa0csRUFBVyxJQUFJN0UsTUFDckI2RSxFQUFTakosSUFBTSxFQUNmaUosRUFBUzVFLFVBQVVDLElBQUksa0JBRXZCLE1BQU00RSxFQUFjLElBQUk5RSxNQUN4QjhFLEVBQVlsSixJQUFNLEVBQ2xCa0osRUFBWTdFLFVBQVVDLElBQUksYUFFMUIsTUFBTTZFLEVBQVksSUFBSS9FLE1BQ3RCK0UsRUFBVW5KLElBQU0sRUFDaEJtSixFQUFVOUUsVUFBVUMsSUFBSSxhQUV4QixNQUFNOEUsRUFBaUIsSUFBSWhGLE1BQzNCZ0YsRUFBZXBKLElBQU0sRUFDckJvSixFQUFlL0UsVUFBVUMsSUFBSSxpQkFFN0J1RSxFQUFjckUsWUFBWXlFLEdBQzFCSCxFQUFhdEUsWUFBWTBFLEdBQ3pCSCxFQUFldkUsWUFBWTJFLEdBQzNCSCxFQUFleEUsWUFBWTRFLEdBRTNCLE1BQU1DLEVBQVV2SixTQUFTaUQsY0FBYyxpQkFDakNELEVBQWNoRCxTQUFTaUQsY0FBYyxzQkFFM0M4RixFQUFjOUQsaUJBQWlCLFNBQVMsV0FDcENzRSxFQUFRbkcsTUFBTUMsVUFBWSwyQkFDOUIsSUFDQTRGLEVBQWVoRSxpQkFBaUIsU0FBUyxXQUNyQ3NFLEVBQVFuRyxNQUFNQyxVQUFZLDhCQUM5QixJQUNBNkYsRUFBZWpFLGlCQUFpQixTQUFTLFdBRXJDc0UsRUFBUW5HLE1BQU1DLFVBQVksK0JBQzFCTCxFQUFZSSxNQUFNQyxVQUFZLGdDQUNsQyxJQUNBa0csRUFBUXRFLGlCQUFpQixTQUFVdEYsSUFDUCxTQUFyQkEsRUFBRTJHLE9BQU9rRCxVQUNSaEgsUUFBUUMsSUFBSSxtQ0FDWkQsUUFBUUMsSUFBSTlDLEVBQUUyRyxPQUFPM0IsYUFFckJpRCxFQURpQmhDLEVBQWlCakcsRUFBRTJHLE9BQU8zQixjQUcvQyxHQUVSLENDeERBOEUsR05DTyxXQUlILE1BQU1DLEVBQWMxSixTQUFTaUQsY0FBYyxnQkFDckMwRyxFQUFlM0osU0FBU2lELGNBQWMsaUJBRTVDeUcsRUFBWXpFLGlCQUFpQixTQUFTLFdBQ2xDakMsRUFBWUksTUFBTUMsVUFBWSwrQkFDOUJFLEdBQ0osSUFDQW9HLEVBQWExRSxpQkFBaUIsU0FBUyxXQUVuQ2pDLEVBQVlJLE1BQU1DLFVBQVksK0JBQzlCLE1BQU11RyxFQXFDZCxXQUNJLE1BQU1DLEVBQWE3SixTQUFTd0QsZUFBZSxTQUFTQyxNQUNwRCxJQUFJcUcsRUFBWTlKLFNBQVN3RCxlQUFlLGVBQWVDLE1BRXZELEdBQUdvRyxFQUFXLENBRVYsTUFBTUUsRUFBYyxJQUFJcEksRUFBUWtJLEVBQVlDLEdBSTVDLE9BSEExQyxFQUFROUUsS0FBS3lILEdBR05BLENBQ1gsQ0FLSSxPQUhBN0csSUFDQUssU0FDQVAsRUFBWUksTUFBTUMsVUFBWSxpQ0FHdEMsQ0F2RDZCMkcsR0FFckIsR0FBRy9ELEVBQWtCLEVBd0I3QixTQUEwQmdFLEdBQ3RCekgsUUFBUUMsSUFBSSw0QkFBOEJ3SCxHQUMxQyxJQUFJLElBQUkzSixFQUFJLEVBQUdBLEVBQUk4RyxFQUFRL0csT0FBTyxFQUFHQyxJQUNqQ2tDLFFBQVFDLElBQUksd0JBQTBCMkUsRUFBUTlHLEdBQUdzQixPQUM5Q3dGLEVBQVE5RyxHQUFHc0IsT0FBU3FJLElBQ25CN0MsRUFBUTlHLEdBQUdzQixNQUFRd0YsRUFBUUEsRUFBUS9HLE9BQU8sR0FBR3VCLE1BQzdDd0YsRUFBUTlHLEdBQUd1QixZQUFjdUYsRUFBUUEsRUFBUS9HLE9BQU8sR0FBR3dCLFlBRy9ELENBaENZcUksQ0FBaUJoRSxFQUFXdkIsYUlDakMsU0FBOEJnQyxHQUNqQyxNQUNNRSxFQURjaEMsRUFBSSxtQkFDZ0JpQyxTQUN4QyxJQUFJLElBQUl4RyxFQUFJLEVBQUdBLEVBQUl1RyxFQUFvQnhHLE9BQVFDLElBQ3hDdUcsRUFBb0J2RyxHQUFHcUUsYUFBZWdDLElBQ3JDbkUsUUFBUUMsSUFBSSwrQkFBaUNvRSxFQUFvQnZHLEdBQUdxRSxhQUNwRWtDLEVBQW9CdkcsR0FBR3FFLFlBQWN5QyxFQUFRUCxFQUFvQnhHLFFBQVF1QixNQUdyRixDSlRZdUksQ0FBcUJqRSxFQUFXdkIsYUlZckJFLEVBQUksb0JBQ1pGLFlBQWN5QyxFQUFRQSxFQUFRL0csT0FBTyxHQUFHdUIsTUpYM0NxRixFQUFjMkMsRUFBYWhJLE9BQzNCcUUsR0FBb0IsRUFDcEIsSUFBSSxJQUFJa0IsRUFBSSxFQUFHQSxFQUFJQyxFQUFRL0csT0FBUThHLElBQy9CM0UsUUFBUUMsSUFBSzBFLEVBQUUsRUFBSSxJQUFLQyxFQUFRRCxHQUFHdkYsTUFFM0MsS0FBSyxDQUNELEdBQUdnSSxFQUFhLENBRVpuQyxFQUFvQm1DLEVBQWFoSSxPQUNqQ2dHLEVBQXFCZ0MsR0FFckIsSUFBSSxJQUFJekMsRUFBSSxFQUFHQSxFQUFJQyxFQUFRL0csT0FBUThHLElBQy9CM0UsUUFBUUMsSUFBSzBFLEVBQUUsRUFBSSxJQUFLQyxFQUFRRCxHQUFHdkYsTUFFM0MsQ0FDQTJCLEdBQ0osQ0FDSixHQUNKLENNdENBNkcsR0FDQSxNQUFNQyxFQUFVLElBQUkxSSxFQUFRLGlCQUFrQiw4REFDOUN5RixFQUFRLEdBQUtpRCxFQUNiekMsRUFBcUJ5QyxHQUNyQjVDLEVBQW9CLGtCQUNwQnRCLElBQ0FuQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2RpbnRvZG9saXN0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL29kaW50b2RvbGlzdC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL29kaW50b2RvbGlzdC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9vZGludG9kb2xpc3QvLi9zcmMvdGFza0NsYXNzLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy9wcm9qZWN0Q2xhc3MuanMiLCJ3ZWJwYWNrOi8vb2RpbnRvZG9saXN0Ly4vc3JjL3Byb2plY3RGb3JtLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy90YXNrRE9NLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy90YXNrRm9ybS5qcyIsIndlYnBhY2s6Ly9vZGludG9kb2xpc3QvLi9zcmMvcHJvamVjdEV2ZW50TGlzdGVuZXJzLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy9wcm9qZWN0RE9NLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy9tZW51RXZlbnRMaXN0ZW5lcnMuanMiLCJ3ZWJwYWNrOi8vb2RpbnRvZG9saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSB7XG5cdFx0XHR2YXIgaSA9IHNjcmlwdHMubGVuZ3RoIC0gMTtcblx0XHRcdHdoaWxlIChpID4gLTEgJiYgIXNjcmlwdFVybCkgc2NyaXB0VXJsID0gc2NyaXB0c1tpLS1dLnNyYztcblx0XHR9XG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImV4cG9ydCBjbGFzcyBUYXNre1xuICAgIGNvbnN0cnVjdG9yKHRUaXRsZSwgdERlc2MsIHREdWUsIHRQcmlvLCB0UHJvail7XG4gICAgICAgIHRoaXMudFRpdGxlID0gdFRpdGxlO1xuICAgICAgICB0aGlzLnREZXNjID0gdERlc2M7XG4gICAgICAgIHRoaXMudER1ZSA9IHREdWU7XG4gICAgICAgIHRoaXMudFByaW8gPSB0UHJpbztcbiAgICAgICAgdGhpcy50UHJvaiA9IHRQcm9qO1xuICAgIH1cbiAgICBzZXQgdFRpdGxlKG5ld3RUaXRsZSl7XG4gICAgICAgIHRoaXMuX3RUaXRsZSA9IG5ld3RUaXRsZTtcbiAgICB9XG4gICAgc2V0IHREZXNjKG5ld3REZXNjKXtcbiAgICAgICAgdGhpcy5fdERlc2MgPSBuZXd0RGVzYztcbiAgICB9XG4gICAgc2V0IHREdWUobmV3dER1ZSl7XG4gICAgICAgIHRoaXMuX3REdWUgPSBuZXd0RHVlO1xuICAgIH1cbiAgICBzZXQgdFByaW8obmV3dFByaW8pe1xuICAgICAgICB0aGlzLl90UHJpbyA9IG5ld3RQcmlvO1xuICAgIH1cbiAgICBzZXQgdFByb2oobmV3dFByb2ope1xuICAgICAgICB0aGlzLl90UHJvaiA9IG5ld3RQcm9qO1xuICAgIH1cblxuICAgIGdldCB0VGl0bGUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RUaXRsZTtcbiAgICB9XG4gICAgZ2V0IHREZXNjKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl90RGVzYztcbiAgICB9XG4gICAgZ2V0IHREdWUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3REdWU7XG4gICAgfVxuICAgIGdldCB0UHJpbygpe1xuICAgICAgICByZXR1cm4gdGhpcy5fdFByaW87XG4gICAgfVxuICAgIGdldCB0UHJvaigpe1xuICAgICAgICByZXR1cm4gdGhpcy5fdFByb2o7XG4gICAgfVxufSIsImltcG9ydCB7IFRhc2sgfSBmcm9tIFwiLi90YXNrQ2xhc3NcIjtcblxuZXhwb3J0IGNsYXNzIFByb2plY3R7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uKXtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMudG9Eb3MgPSBbXTtcbiAgICB9XG4gICAgbmV3VGFzayhUdGl0bGUsIFRkZXNjLCBUZHVlLCBUcHJpbywgVHByb2ope1xuICAgICAgICBsZXQgdCA9IG5ldyBUYXNrKFR0aXRsZSwgVGRlc2MsIFRkdWUsIFRwcmlvLCBUcHJvaik7XG4gICAgICAgIHRoaXMudG9Eb3MucHVzaCh0KTsvL3BsYWNlZCB1bmRlcnNjb3JlXG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cblxuICAgIHByaW50VGFza3MoKXtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMudG9Eb3MubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy50b0Rvc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXQgbnVtT2ZUYXNrcygpe1xuICAgICAgICByZXR1cm4gdGhpcy50b0Rvcy5sZW5ndGg7Ly9wbGFjZWQgdW5kZXJzY29yZVxuICAgIH1cblxuICAgIGdldCB0aXRsZSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5fdGl0bGU7XG4gICAgfVxuICAgIGdldCBkZXNjcmlwdGlvbigpe1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVzY3JpcHRpb247XG4gICAgfVxuICAgIGdldCB0b0RvTGlzdCgpey8vZ2V0IGFycmF5IHRoZW4gcHVzaCBhIHRvRG9cbiAgICAgICAgcmV0dXJuIHRoaXMudG9Eb3M7XG4gICAgfVxuXG4gICAgc2V0IHRpdGxlKG5ld1RpdGxlKXtcbiAgICAgICAgdGhpcy5fdGl0bGUgPSBuZXdUaXRsZTtcbiAgICB9XG4gICAgc2V0IGRlc2NyaXB0aW9uKG5ld0Rlc2Mpe1xuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IG5ld0Rlc2M7XG4gICAgfVxuXG59IiwiaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuL3Byb2plY3RDbGFzc1wiO1xuaW1wb3J0IHsgcHJvakFyciB9IGZyb20gXCIuL21lbnVFdmVudExpc3RlbmVyc1wiO1xuaW1wb3J0IHsgYWRkUHJvamVjdFRvU2lkZWJhciwgZWRpdFByb2plY3RJblNpZGViYXIsIGRpc3BsYXlQcm9qZWN0SW5NYWluLCBlZGl0UHJvamVjdE5hbWVNYWluIH0gZnJvbSBcIi4vcHJvamVjdERPTVwiO1xuLy9pbXBvcnQgeyBwcm9qZWN0RUxpc3RlbmVycyB9IGZyb20gXCIuL3Byb2plY3RFdmVudExpc3RlbmVyc1wiO1xuaW1wb3J0IHsgX3Rlc3RlcmluZywgZmluZFByb2plY3RJbkFyciwgcmVtb3ZlUHJvakFyciwgZWRpdEJ1dHRvbkNsaWNrZWQsIGN1cnJUaXRsZTIgfSBmcm9tIFwiLi9wcm9qZWN0RXZlbnRMaXN0ZW5lcnNcIjtcblxuY29uc3QgcHJvak92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ld1Byb2plY3RPdmVybGF5XCIpO1xuXG5leHBvcnQgZnVuY3Rpb24gcHJvamVjdE92ZXJsYXlTdHVmZigpe1xuICAgIC8vY29uc3QgcHJvak92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ld1Byb2plY3RPdmVybGF5XCIpO1xuXG4gICAgLy9idXR0b25zXG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlQnV0dG9uXCIpO1xuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3VibWl0QnV0dG9uXCIpO1xuXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICBwcm9qT3ZlcmxheS5zdHlsZS5hbmltYXRpb24gPSAncHJvamVjdFNsaWRlVXAgMS41cyBmb3J3YXJkcyc7XG4gICAgICAgIHByb2plY3RGb3JtQ2xlYXIoKTtcbiAgICB9KVxuICAgIHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJzdWJtaXQgYnV0dG9uIGNsaWNrZWRcIik7XG4gICAgICAgIHByb2pPdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9ICdwcm9qZWN0U2xpZGVVcCAxLjVzIGZvcndhcmRzJztcbiAgICAgICAgY29uc3QgcHJvamVjdFBhcmFtID0gZXh0cmFjdERhdGFGb3JQcm9qZWN0KCk7XG4gICAgICAgIC8vY3JlYXRlUHJvamVjdERPTShwcm9qZWN0UGFyYW0pOy8vdGhpcyB3aWxsIGJlIGluIHByb2plY3RET00uanMgZmlsZVxuICAgICAgICBpZihlZGl0QnV0dG9uQ2xpY2tlZCl7XG4gICAgICAgICAgICBlZGl0UHJvamVjdEluQXJyKGN1cnJUaXRsZTIudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgZWRpdFByb2plY3RJblNpZGViYXIoY3VyclRpdGxlMi50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICBlZGl0UHJvamVjdE5hbWVNYWluKCk7XG4gICAgICAgICAgICByZW1vdmVQcm9qQXJyKHByb2plY3RQYXJhbS50aXRsZSk7XG4gICAgICAgICAgICBlZGl0QnV0dG9uQ2xpY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yKGxldCBhID0gMDsgYSA8IHByb2pBcnIubGVuZ3RoOyBhKyspe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKChhKzEpKyBcIiBcIisgcHJvakFyclthXS50aXRsZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBpZihwcm9qZWN0UGFyYW0pe1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJwcm9qZWN0IG9iaiByZXR1cm5lZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICAgICAgYWRkUHJvamVjdFRvU2lkZWJhcihwcm9qZWN0UGFyYW0udGl0bGUpLy90aGlzIHdpbGwgYmUgaW4gcHJvamVjdERPTS5qcyBmaWxlXG4gICAgICAgICAgICAgICAgZGlzcGxheVByb2plY3RJbk1haW4ocHJvamVjdFBhcmFtKTtcbiAgICAgICAgICAgICAgICAvL3Byb2plY3RFTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICAgICAgZm9yKGxldCBhID0gMDsgYSA8IHByb2pBcnIubGVuZ3RoOyBhKyspe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygoYSsxKSsgXCIgXCIrIHByb2pBcnJbYV0udGl0bGUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvamVjdEZvcm1DbGVhcigpO1xuICAgICAgICB9XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gZWRpdFByb2plY3RJbkFycihyZXBsYWNlVGl0bGUpe1xuICAgIGNvbnNvbGUubG9nKFwiZWRpdFRpdGxlIGJlaW5nIHJlcGxhY2VkIFwiICsgcmVwbGFjZVRpdGxlKTtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgcHJvakFyci5sZW5ndGgtMTsgaSsrKXtcbiAgICAgICAgY29uc29sZS5sb2coXCJpbnNpZGUgZWRpdCBmdW5jIGFyciBcIiArIHByb2pBcnJbaV0udGl0bGUpO1xuICAgICAgICBpZihwcm9qQXJyW2ldLnRpdGxlID09IHJlcGxhY2VUaXRsZSl7XG4gICAgICAgICAgICBwcm9qQXJyW2ldLnRpdGxlID0gcHJvakFycltwcm9qQXJyLmxlbmd0aC0xXS50aXRsZTtcbiAgICAgICAgICAgIHByb2pBcnJbaV0uZGVzY3JpcHRpb24gPSBwcm9qQXJyW3Byb2pBcnIubGVuZ3RoLTFdLmRlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBleHRyYWN0RGF0YUZvclByb2plY3QoKXtcbiAgICBjb25zdCB0aXRsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKS52YWx1ZVxuICAgIGxldCBkZXNjSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpLnZhbHVlO1xuXG4gICAgaWYodGl0bGVJbnB1dCl7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJkZXRlY3RlZCB0aXRsZVwiKTsvL2RlYnVnZ2luZ1xuICAgICAgICBjb25zdCBwcm9qZWN0TWFkZSA9IG5ldyBQcm9qZWN0KHRpdGxlSW5wdXQsIGRlc2NJbnB1dCk7XG4gICAgICAgIHByb2pBcnIucHVzaChwcm9qZWN0TWFkZSk7XG4gICAgICAgIC8vY29uc29sZS5sb2cocHJvakFyclsocHJvakFyci5sZW5ndGgpLTFdLnRpdGxlKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhwcm9qQXJyWyhwcm9qQXJyLmxlbmd0aCktMV0uZGVzY3JpcHRpb24pO1xuICAgICAgICByZXR1cm4gcHJvamVjdE1hZGU7XG4gICAgfWVsc2V7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJOZWVkIGEgdGl0bGUgdG8gY3JlYXRlIGEgcHJvamVjdCFcIik7Ly9kZWJ1Z2dpbmdcbiAgICAgICAgZGlzcGxheU5lZWRUaXRsZSgpOy8vIENBTiBJTlNFUlQgRE9NIE1BTklQVUxBVElPTiBUTyBTSElGVCBET1dOIFRIRSBFUlJPUiBPVkVSTEFZIDopXG4gICAgICAgIHByb2plY3RGb3JtQ2xlYXIoKTtcbiAgICAgICAgcHJvak92ZXJsYXkuc3R5bGUuYW5pbWF0aW9uID0gXCJwcm9qZWN0U2xpZGVEb3duIDEuNXMgZm9yd2FyZHNcIjtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlOZWVkVGl0bGUoKXtcbiAgICBjb25zdCBlcnJvck92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVycm9yUHJvamVjdE92ZXJsYXlcIik7XG4gICAgZXJyb3JPdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9IFwicHJvamVjdFNsaWRlRG93biAxLjVzIGZvcndhcmRzXCJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIGVycm9yT3ZlcmxheS5zdHlsZS5hbmltYXRpb24gPSBcInByb2plY3RTbGlkZVVwIDEuNXMgZm9yd2FyZHNcIlxuICAgIH0sIDI1MDApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJvamVjdEZvcm1DbGVhcigpe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIikudmFsdWUgPSBcIlwiO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIikudmFsdWUgPSBcIlwiO1xufSIsImltcG9ydCBFZGl0IGZyb20gJy4uL3NyYy9pbWdzL2VkaXQucG5nJztcbmltcG9ydCBSZW1vdmUgZnJvbSAnLi4vc3JjL2ltZ3MvY2xvc2UucG5nJztcblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlUYXNrSW5NYWluKHRhc2spey8vKHByb2plY3QsIHVsKSBtaWdodCBiZSBuZWVkZWQgYXMgcGFyYW1zIGJ1dCBwcm9icyBub3RcbiAgICBjb25zdCBwcm9qVUwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9VTFwiKTtcblxuICAgIGNvbnN0IHRhc2tMSSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgLy90YXNrTEkuY2xhc3NMaXN0LmFkZChcInRvZG9cIik7XG5cbiAgICBjb25zdCBidXR0b25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIGNvbnN0IHRhc2tDaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgdGFza0NoZWNrYm94LnR5cGUgPSBcImNoZWNrYm94XCI7XG4gICAgLy90YXNrQ2hlY2tib3guY2xhc3NMaXN0LmFkZChcInRvZG9DaGVja1wiKTtcblxuICAgIGNvbnN0IHRhc2tEYXRlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIHRhc2tEYXRlSW5wdXQudHlwZSA9IFwiZGF0ZVwiO1xuICAgIC8vdGFza0RhdGVJbnB1dC5jbGFzc0xpc3QuYWRkKFwidG9kb0RhdGVcIik7XG5cbiAgICBjb25zdCB0YXNrRWRpdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHRhc2tSZW1vdmVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIGNvbnN0IHRhc2tFZGl0SWNvbiA9IG5ldyBJbWFnZSgpO1xuICAgIHRhc2tFZGl0SWNvbi5zcmMgPSBFZGl0O1xuICAgIHRhc2tFZGl0SWNvbi5jbGFzc0xpc3QuYWRkKCdwcm9qRWRpdCcpO1xuXG4gICAgY29uc3QgdGFza1JlbW92ZUljb24gPSBuZXcgSW1hZ2UoKTtcbiAgICB0YXNrUmVtb3ZlSWNvbi5zcmMgPSBSZW1vdmU7XG4gICAgdGFza1JlbW92ZUljb24uY2xhc3NMaXN0LmFkZCgncHJvalJlbW92ZScpO1xuXG4gICAgdGFza0VkaXREaXYuYXBwZW5kQ2hpbGQodGFza0VkaXRJY29uKTtcbiAgICB0YXNrUmVtb3ZlRGl2LmFwcGVuZENoaWxkKHRhc2tSZW1vdmVJY29uKTtcblxuICAgIHRhc2tMSS50ZXh0Q29udGVudCA9IHRhc2sudFRpdGxlICsgXCIgIFwiICsgdGFzay50RHVlO1xuICAgIHRhc2tMSS5hcHBlbmRDaGlsZCh0YXNrRGF0ZUlucHV0KTtcblxuICAgIGJ1dHRvbkRpdi5hcHBlbmRDaGlsZCh0YXNrQ2hlY2tib3gpO1xuICAgIGJ1dHRvbkRpdi5hcHBlbmRDaGlsZCh0YXNrRWRpdERpdik7XG4gICAgYnV0dG9uRGl2LmFwcGVuZENoaWxkKHRhc2tSZW1vdmVEaXYpO1xuXG4gICAgYnV0dG9uRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tCdXR0b25zJyk7XG5cbiAgICB0YXNrTEkuYXBwZW5kQ2hpbGQoYnV0dG9uRGl2KTtcblxuICAgIHRhc2tMSS5jbGFzc0xpc3QuYWRkKFwidG9kb1wiKTtcblxuICAgIHByb2pVTC5hcHBlbmRDaGlsZCh0YXNrTEkpO1xufSIsImltcG9ydCB7IGRxcyB9IGZyb20gXCIuL21lbnVFdmVudExpc3RlbmVyc1wiO1xuaW1wb3J0IHsgZmluZFByb2plY3RJbkFyciB9IGZyb20gXCIuL3Byb2plY3RFdmVudExpc3RlbmVyc1wiO1xuaW1wb3J0IHsgZGlzcGxheU5lZWRUaXRsZSB9IGZyb20gXCIuL3Byb2plY3RGb3JtXCI7XG4vL2ltcG9ydCB7IF90ZXN0ZXJpbmcgfSBmcm9tIFwiLi9wcm9qZWN0RXZlbnRMaXN0ZW5lcnNcIjtcbi8vaW1wb3J0IHsgVGFzayB9IGZyb20gXCIuL3Rhc2tDbGFzc1wiO1xuaW1wb3J0IHsgZGlzcGxheVRhc2tJbk1haW4gfSBmcm9tIFwiLi90YXNrRE9NXCI7XG5cbmV4cG9ydCBjb25zdCB0YXNrT3ZlcmxheSA9IGRxcyhcIi5uZXdUYXNrT3ZlcmxheVwiKTtcbi8vY29uc3QgY3VyclByb2ogPSB7fTsvL01JR0hUIEJFIE9LIFRPIFBMQUNFIFdJVEhJTiBleHRyYWN0RGF0YUZvclRhc2sgZnVuY1xuY29uc3QgdGFza0Nsb3NlID0gZHFzKFwiLnRhc2tDbG9zZUJ1dHRvblwiKTtcbmNvbnN0IHRhc2tTdWJtaXQgPSBkcXMoXCIudGFza1N1Ym1pdEJ1dHRvblwiKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHRhc2tPdmVybGF5TGlzdGVuZXJzKCl7XG4gICAgLy8gY29uc3QgdGFza0Nsb3NlID0gZHFzKFwiLnRhc2tDbG9zZUJ1dHRvblwiKTtcbiAgICAvLyBjb25zdCB0YXNrU3VibWl0ID0gZHFzKFwiLnRhc2tTdWJtaXRCdXR0b25cIik7XG5cbiAgICB0YXNrQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICB0YXNrRm9ybUNsZWFyKCk7XG4gICAgICAgIHRhc2tPdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9IFwicHJvamVjdFNsaWRlVXAgMS41cyBmb3J3YXJkc1wiXG4gICAgfSk7XG4gICAgdGFza1N1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF90YXNrU3VibWl0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF90YXNrU3VibWl0KCl7XG4gICAgdGFza092ZXJsYXkuc3R5bGUuYW5pbWF0aW9uID0gXCJwcm9qZWN0U2xpZGVVcCAxLjVzIGZvcndhcmRzXCJcbiAgICBjb25zdCBtYWRlVGFzayA9IGV4dHJhY3REYXRhRm9yVGFzaygpO1xuICAgIGlmKG1hZGVUYXNrKXtcbiAgICAgICAgZGlzcGxheVRhc2tJbk1haW4obWFkZVRhc2spOy8vY3VycmVudCBwcm9qZWN0IGlzIGFscmVhZHkgZGV0ZWN0ZWQgaW4gZXh0cmFjdERhdGFGb3JUYXNrIGZ1bmMuLm1heSBub3QgbmVlZCBwcm9qIGFuZCB1bCBhcyBwYXJhbXNcbiAgICAgICAgLy8gZm9yKGxldCBhID0gMDsgYSA8IGN1cnJQcm9qLnRvRG9MaXN0Lmxlbmd0aDsgYSsrKXsgICBUUlkgVE8gRElTUExBWSBBTEwgVEFTS1NcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKChhKzEpKyBcIiBcIisgY3VyclByb2oudG9Eb0xpc3RbYV0udGl0bGUpO1xuICAgICAgICAvLyB9XG4gICAgfVxuICAgIHRhc2tGb3JtQ2xlYXIoKTtcbiAgICBjbGVhckV2TGlzKCk7XG4gICAgXG4gICAgLy9QTEFDRSBUSElTIElOU0lERSBBIFNFUEVSQVRFIEZVTkNUSU9OIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gaW5zaWRlIGV2ZW50TGlzdGVuZXIgZm9yIHN1Ym1pdCB0YXNrIGZvcm0pJiUmJSYlJiUmJSYlXG59XG5cbmZ1bmN0aW9uIGNsZWFyRXZMaXMoKXtcbiAgICB0YXNrU3VibWl0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3Rhc2tTdWJtaXQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdERhdGFGb3JUYXNrKHByb2ope1xuICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidFRpdGxlXCIpLnZhbHVlO1xuICAgIGNvbnN0IHRhc2tEZXNjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0RGVzY3JpcHRpb25cIikudmFsdWU7XG4gICAgY29uc3QgdGFza0R1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInREdWVEYXRlXCIpLnZhbHVlO1xuICAgIGNvbnN0IHRhc2tQcmlvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0VGFza1ByaW9cIikudmFsdWU7XG4gICAgXG4gICAgY29uc3QgdGVtcCA9IGRxcyhcIi5wcm9qZWN0TmFtZU1haW5cIik7Ly9TSE9VTEQgTk9UIEJFIE5FRURFRCBHSVZFTiBQQVJBTVxuICAgIGNvbnN0IHRhc2tQcm9qID0gdGVtcC50ZXh0Q29udGVudDtcbiAgICBcbiAgICBjb25zb2xlLmxvZyh0YXNrUHJvaik7XG5cbiAgICBjb25zdCBmbmRQcm9qID0gZmluZFByb2plY3RJbkFycih0YXNrUHJvaik7XG5cblxuICAgIGlmKHRhc2tUaXRsZSAmJiB0YXNrRHVlRGF0ZSl7XG4gICAgICAgIGNvbnNvbGUubG9nKGZuZFByb2oudGl0bGUpO1xuICAgICAgICBjb25zdCB0YXNrTWFkZSA9IGZuZFByb2oubmV3VGFzayh0YXNrVGl0bGUsIHRhc2tEZXNjLCB0YXNrRHVlRGF0ZSwgdGFza1ByaW8sIGZuZFByb2oudGl0bGUpO1xuICAgICAgICAvL2NvbnN0IHRhc2tNYWRlID0gbmV3IFRhc2sodGFza1RpdGxlLCB0YXNrRGVzYywgdGFza0R1ZURhdGUsIHRhc2tQcmlvLCBwcm9qLnRpdGxlKTsvL3Rhc2tQcm9qIGFzIGxhc3QgcGFyYW1cbiAgICAgICAgLy9jb25zdCBjdXJyUHJvaiA9IGZpbmRQcm9qZWN0SW5BcnIodGFza1Byb2opO1xuICAgICAgICAvL3Byb2plY3QudG9Eb0xpc3QucHVzaCh0YXNrTWFkZSk7Ly9jdXJyUHJvai50b0RvTGlzdC5wdXNoKHRhc2tNYWRlKTsgRVJST1IgSVMgSEFQUEVOSU5HIEhFUkUgTkVFRCBUTyBGSU5EIEEgV0FZIFRPIEFDQ0VTIFRIRSBBUlJBWSBBTkQgUFVTSCBJTlRPIElUXG4gICAgICAgIHRhc2tGb3JtQ2xlYXIoKTtcbiAgICAgICAgcmV0dXJuIHRhc2tNYWRlO1xuICAgIH1lbHNle1xuICAgICAgICBkaXNwbGF5TmVlZFRpdGxlKCk7XG4gICAgICAgIHRhc2tGb3JtQ2xlYXIoKTtcbiAgICAgICAgdGFza092ZXJsYXkuc3R5bGUuYW5pbWF0aW9uID0gXCJwcm9qZWN0U2xpZGVEb3duIDEuNXMgZm9yd2FyZHNcIjtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRhc2tGb3JtQ2xlYXIoKXtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRUaXRsZVwiKS52YWx1ZSA9IFwiXCI7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0RGVzY3JpcHRpb25cIikudmFsdWUgPSBcIlwiO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidER1ZURhdGVcIikudmFsdWUgPSBcIlwiO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidFRhc2tQcmlvXCIpLnZhbHVlID0gXCJTZWxlY3QgT25lXCI7XG59IiwiaW1wb3J0IHsgZHFzIH0gZnJvbSBcIi4vbWVudUV2ZW50TGlzdGVuZXJzXCI7XG5pbXBvcnQgeyBwcm9qQXJyIH0gZnJvbSBcIi4vbWVudUV2ZW50TGlzdGVuZXJzXCI7XG5pbXBvcnQgeyBjbGVhck1haW4gfSBmcm9tIFwiLi9wcm9qZWN0RE9NXCI7XG5pbXBvcnQgeyB0YXNrT3ZlcmxheSwgdGFza092ZXJsYXlMaXN0ZW5lcnMgfSBmcm9tIFwiLi90YXNrRm9ybVwiO1xuaW1wb3J0IHsgcmVtb3ZlUHJvamVjdEZyb21TaWRlYmFyIH0gZnJvbSBcIi4vcHJvamVjdERPTVwiO1xuLy9pbXBvcnQgeyBwcm9qZWN0T3ZlcmxheVN0dWZmIH0gZnJvbSBcIi4vcHJvamVjdEZvcm1cIjtcbi8vaW1wb3J0IHsgcHJvak92ZXJsYXkgfSBmcm9tIFwiLi9tZW51RXZlbnRMaXN0ZW5lcnNcIjtcblxuLy9jb25zdCBwcm9qVGFza0FkZCA9IGRxcyhcIi5wcm9qQWRkXCIpO1xuLy9jb25zdCBwcm9qUmVtQnV0dG9uID0gZHFzKFwiLnByb2pSZW1vdmVcIik7XG5jb25zdCBwcm9qT3ZlcmxheTEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ld1Byb2plY3RPdmVybGF5XCIpO1xuZXhwb3J0IGxldCBlZGl0QnV0dG9uQ2xpY2tlZCA9IGZhbHNlO1xuZXhwb3J0IGxldCBjdXJyVGl0bGUyID0gbnVsbDsvLz0gZHFzKFwiLnByb2plY3ROYW1lTWFpblwiKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHByb2plY3RFTGlzdGVuZXJzKCl7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGVzdGVyaW5nKVxufTtcblxuZXhwb3J0IHZhciBfdGVzdGVyaW5nID0gZnVuY3Rpb24oZSl7XG4gICAgLy9nbyB0aHJvdWhnIGFycmF5IGNvbXBhcmluZyB0aXRsZVxuICAgICAgICAvL3doZW4gZm91bmQgZmlsbCBwcm9qZWN0Rm9ybSBhbmQgZHJvcCBmb3JtIGRvd24gZm9yIHVzZXJcbiAgICAgICAgLy9pZiBzdWJtaXQgdGhlbiByZXBsYWNlIGluZm8gd2l0aCBuZXcgaW5mb1xuICAgICAgICAvL2Vsc2UgaWYgY2FuY2VsIHRoZW4gbGVhdmUgcHJvamVjdCBhcyBpdCB3YXNcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcImluIHByb2pFZGl0QnV0dG9uIGV2ZW50TGlzdGVuZXJcIik7XG4gICAgICAgIGNvbnN0IGVkaXRCdXR0b24gPSBlLnRhcmdldC5tYXRjaGVzKFwiLnByb2pFZGl0XCIpO1xuICAgICAgICBjb25zdCByZW1vdmVCdXR0b24gPSBlLnRhcmdldC5tYXRjaGVzKFwiLnByb2pSZW1vdmVcIik7XG4gICAgICAgIGNvbnN0IGFkZFRhc2tCdXR0b24gPSBlLnRhcmdldC5tYXRjaGVzKFwiLnByb2pBZGRcIik7XG4gICAgICAgIGNvbnN0IGN1cnJUaXRsZSA9IGRxcyhcIi5wcm9qZWN0TmFtZU1haW5cIik7XG4gICAgICAgIGN1cnJUaXRsZTIgPSBjdXJyVGl0bGU7XG4gICAgICAgIGlmKGVkaXRCdXR0b24pey8vdGhpcyB3aWxsIGJlIGRvbmUgb25jZSAncmVtb3ZlJyBpcyBjb21wbGV0ZWRcbiAgICAgICAgICAgIC8vY29uc3Qgb2dTaXplQXJyID0gcHJvakFyci5sZW5ndGg7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImVkaXRCdXR0b24gY2xpY2tlZFwiKTtcbiAgICAgICAgICAgIGVkaXRGb3JtKGN1cnJUaXRsZS50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICAvL2NvbnN0IGZvdW5kUHJvaiA9IGZpbmRQcm9qZWN0SW5BcnIoY3VyclRpdGxlKTsvL3RoaXMgd2lsbCBiZSBsZWZ0IHRpbGwgdGhlIGVuZFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBmb3IobGV0IGEgPSAwOyBhIDwgcHJvakFyci5sZW5ndGg7IGErKyl7XG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coKGErMSkrIFwiIFwiKyBwcm9qQXJyW2FdLnRpdGxlKVxuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBlZGl0QnV0dG9uQ2xpY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAvL3Byb2plY3RPdmVybGF5U3R1ZmYoKTtcbiAgICAgICAgICAgIC8vIGlmKHByb2pBcnIubGVuZ3RoID4gb2dTaXplQXJyKXtcbiAgICAgICAgICAgIC8vICAgICBlZGl0UHJvamVjdEluQXJyKHByb2pBcnJbLTFdKTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgfWVsc2UgaWYocmVtb3ZlQnV0dG9uKXtcbiAgICAgICAgICAgIC8vY29uc3QgY3VyclRpdGxlID0gZHFzKFwiLnByb2plY3ROYW1lTWFpblwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVtb3ZlQnV0dG9uIGNsaWNrZWRcIik7XG4gICAgICAgICAgICByZW1vdmVQcm9qZWN0RnJvbVNpZGViYXIoY3VyclRpdGxlLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgIHJlbW92ZVByb2pBcnIoY3VyclRpdGxlLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgIGNsZWFyTWFpbigpO1xuICAgICAgICAgICAgLy9jb25zdCBzaWRlQmFyID0gZHFzKFwiLnNpZGViYXItbWVudVwiKTtcbiAgICAgICAgICAgIC8vc2lkZUJhci5zdHlsZS5hbmltYXRpb24gPSAnbWVudVNsaWRlT24gMS41cyBmb3J3YXJkcyc7XG4gICAgICAgICAgICBmb3IobGV0IGEgPSAwOyBhIDwgcHJvakFyci5sZW5ndGg7IGErKyl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coKGErMSkrIFwiIFwiKyBwcm9qQXJyW2FdLnRpdGxlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoYWRkVGFza0J1dHRvbil7XG4gICAgICAgICAgICB0YXNrT3ZlcmxheS5zdHlsZS5hbmltYXRpb24gPSBcInByb2plY3RTbGlkZURvd24gMS41cyBmb3J3YXJkc1wiO1xuICAgICAgICAgICAgLy9jb25zdCBmb3VuZFByb2ogPSBmaW5kUHJvamVjdEluQXJyKGN1cnJUaXRsZS50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiZm91bmRQcm9qZWN0SW5BcnI6IFwiICsgZm91bmRQcm9qLnRpdGxlKTtcbiAgICAgICAgICAgIHRhc2tPdmVybGF5TGlzdGVuZXJzKCk7Ly9hZGQgcHJvaiBhcyBwYXJhbSBoZXJlISEhIGZpbmQgcHJvaiBvbiBsaW5lIGJlZm9yZSB0aGlzXG4gICAgICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVByb2pBcnIocHJvak5hbWUpe1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwcm9qQXJyLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgaWYocHJvakFycltpXS50aXRsZSA9PSBwcm9qTmFtZSl7XG4gICAgICAgICAgICBwcm9qQXJyLnNwbGljZShpLCAxKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZWRpdEZvcm0ocHJvamVjdFRpdGxlKXsvL3BhcmFtIGlzIGN1cnJlbnQgdGl0bGUgaXQgd2lsbCBmaWxsIHRoZSBpbnB1dCB0aXRsZSBib3hcbiAgICBwcm9qT3ZlcmxheTEuc3R5bGUuYW5pbWF0aW9uID0gJ3Byb2plY3RTbGlkZURvd24gMS41cyBmb3J3YXJkcyc7XG4gICAgY29uc3QgdGl0bGVJbiA9IGRxcyhcIiN0aXRsZVwiKTtcbiAgICB0aXRsZUluLnZhbHVlID0gcHJvamVjdFRpdGxlO1xuXG4gICAgLy90aGUgcHJvamVjdCBmb3JtIHdpbGwgcHVzaCBpbiBhIG5ldyBwcm9qZWN0IHdpdGggYSBuZXcgdGl0bGUgYW5kIGRlc2NcbiAgICAvL0dyYWIgdGhlIHRpdGxlIGFuZCBkZXNjIG9mIHRoaXMgXCJuZXdcIiBwcm9qIGFuZCByZXBsYWNlIGZvciBpbmZvIG9uIGN1cnJQcm9qXG4gICAgLy9hZnRlcndhcmRzIHJlbW92ZSBsYXN0IGVudHJ5IG9uIHByb2pBcnJcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRQcm9qZWN0SW5BcnIodGl0bGUpey8vTUlHSFQgTk9UIE5FRUQgVEhJUyBNSUdIVCBOT1QgTkVFRCBUSElTIE1JR0hUIE5PVCBORUVEIFRISVNcbiAgICAvL2NvbnNvbGUubG9nKFwibG9va2luZyBmb3IgcHJvamVjdCBpbiBhcnJcIilcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwcm9qQXJyLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICBpZihwcm9qQXJyW2ldLnRpdGxlID09IHRpdGxlKXtcbiAgICAgICAgICAgIHJldHVybiBwcm9qQXJyW2ldO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCBSZW1vdmUgZnJvbSAnLi4vc3JjL2ltZ3MvY2xvc2UucG5nJztcbmltcG9ydCBDcmVhdGUgZnJvbSAnLi4vc3JjL2ltZ3MvYWRkLnBuZyc7XG5pbXBvcnQgRWRpdCBmcm9tICcuLi9zcmMvaW1ncy9lZGl0LnBuZyc7XG5pbXBvcnQgeyBkcXMsIHByb2pBcnIgfSBmcm9tICcuL21lbnVFdmVudExpc3RlbmVycyc7XG5pbXBvcnQgeyBwcm9qZWN0RUxpc3RlbmVycyB9IGZyb20gJy4vcHJvamVjdEV2ZW50TGlzdGVuZXJzJztcbmltcG9ydCB7IF90ZXN0ZXJpbmcgfSBmcm9tICcuL3Byb2plY3RFdmVudExpc3RlbmVycyc7XG5pbXBvcnQgeyBkaXNwbGF5VGFza0luTWFpbiB9IGZyb20gJy4vdGFza0RPTSc7XG5cbmNvbnN0IG1haW5TZWMgPSBkcXMoXCIucHJvamVjdFNlY3Rpb25cIik7XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRQcm9qZWN0VG9TaWRlYmFyKHByb2plY3RUaXRsZSl7XG4gICAgY29uc3QgcHJvalNpZGUgPSBkcXMoXCIuc2lkZWJhclByb2plY3RcIik7XG4gICAgbGV0IHByb2pUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBwcm9qVGl0bGUudGV4dENvbnRlbnQgPSBwcm9qZWN0VGl0bGU7XG4gICAgcHJvalRpdGxlLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3ROYW1lU2lkZWJhcicpO1xuICAgIHByb2pTaWRlLmFwcGVuZENoaWxkKHByb2pUaXRsZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUHJvamVjdEZyb21TaWRlYmFyKHByb2plY3RUaXRsZSl7XG4gICAgY29uc3Qgc2lkZWJhclByb2ogPSBkcXMoXCIuc2lkZWJhclByb2plY3RcIik7XG4gICAgY29uc3Qgc2lkZWJhclByb2pDaGlsZHJlbiA9IHNpZGViYXJQcm9qLmNoaWxkcmVuO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaWRlYmFyUHJvakNoaWxkcmVuLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgaWYoc2lkZWJhclByb2pDaGlsZHJlbltpXS50ZXh0Q29udGVudCA9PSBwcm9qZWN0VGl0bGUpe1xuICAgICAgICAgICAgc2lkZWJhclByb2oucmVtb3ZlQ2hpbGQoc2lkZWJhclByb2pDaGlsZHJlbltpXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZWRpdFByb2plY3RJblNpZGViYXIocHJvamVjdFRpdGxlKXtcbiAgICBjb25zdCBzaWRlYmFyUHJvaiA9IGRxcyhcIi5zaWRlYmFyUHJvamVjdFwiKTtcbiAgICBjb25zdCBzaWRlYmFyUHJvakNoaWxkcmVuID0gc2lkZWJhclByb2ouY2hpbGRyZW47XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHNpZGViYXJQcm9qQ2hpbGRyZW4ubGVuZ3RoOyBpKyspe1xuICAgICAgICBpZihzaWRlYmFyUHJvakNoaWxkcmVuW2ldLnRleHRDb250ZW50ID09IHByb2plY3RUaXRsZSl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImZvdW5kIHNpZGViYXIgcHJvamVjdCBuYW1lZCBcIiArIHNpZGViYXJQcm9qQ2hpbGRyZW5baV0udGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgc2lkZWJhclByb2pDaGlsZHJlbltpXS50ZXh0Q29udGVudCA9IHByb2pBcnJbc2lkZWJhclByb2pDaGlsZHJlbi5sZW5ndGhdLnRpdGxlOy8vcHJvakFycltzaWRlYmFyUHJvakNoaWxkcmVuLmxlbmd0aC0xXS50aXRsZVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZWRpdFByb2plY3ROYW1lTWFpbigpe1xuICAgIGNvbnN0IE9HUHJvak5hbWUgPSBkcXMoXCIucHJvamVjdE5hbWVNYWluXCIpO1xuICAgIE9HUHJvak5hbWUudGV4dENvbnRlbnQgPSBwcm9qQXJyW3Byb2pBcnIubGVuZ3RoLTFdLnRpdGxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheVByb2plY3RJbk1haW4ocHJvamVjdCl7XG4gICAgY2xlYXJNYWluKCk7XG4gICAgY29uc3QgcHJvakRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgY29uc3QgdGFza1NlY1VMID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICB0YXNrU2VjVUwuY2xhc3NMaXN0LmFkZChcInRvZG9VTFwiKVxuICAgIFxuICAgIGNvbnN0IHByb2pDaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgcHJvakNoZWNrYm94LnR5cGUgPSBcImNoZWNrYm94XCI7XG4gICAgcHJvakNoZWNrYm94LmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0Q2hlY2tib3hcIik7XG5cbiAgICBcbiAgICBjb25zdCBwcm9qTmFtZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgaWYocHJvamVjdC50aXRsZS5sZW5ndGggPiAzMCl7XG4gICAgICAgIGxldCBtYWluTW9kUHJvalRpdGxlID0gcHJvamVjdC50aXRsZS5zbGljZSgwLDMxKTtcbiAgICAgICAgcHJvak5hbWVTcGFuLnRleHRDb250ZW50ID0gbWFpbk1vZFByb2pUaXRsZSArIFwiLi4uXCI7XG4gICAgfWVsc2V7XG4gICAgICAgIHByb2pOYW1lU3Bhbi50ZXh0Q29udGVudCA9IHByb2plY3QudGl0bGU7XG4gICAgfVxuICAgIHByb2pOYW1lU3Bhbi5jbGFzc0xpc3QuYWRkKFwicHJvamVjdE5hbWVNYWluXCIpO1xuXG4gICAgXG4gICAgY29uc3QgYnV0dG9uQ29udCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIFxuICAgIGNvbnN0IGFkZERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGVkaXREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCByZW1vdmVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIGNvbnN0IGFkZEljb24gPSBuZXcgSW1hZ2UoKTtcbiAgICBhZGRJY29uLnNyYyA9IENyZWF0ZTtcbiAgICBhZGRJY29uLmNsYXNzTGlzdC5hZGQoJ3Byb2pBZGQnKTtcblxuICAgIGNvbnN0IGVkaXRJY29uID0gbmV3IEltYWdlKCk7XG4gICAgZWRpdEljb24uc3JjID0gRWRpdDtcbiAgICBlZGl0SWNvbi5jbGFzc0xpc3QuYWRkKCdwcm9qRWRpdCcpO1xuXG4gICAgY29uc3QgcmVtSWNvbiA9IG5ldyBJbWFnZSgpO1xuICAgIHJlbUljb24uc3JjID0gUmVtb3ZlO1xuICAgIHJlbUljb24uY2xhc3NMaXN0LmFkZCgncHJvalJlbW92ZScpO1xuXG4gICAgYWRkRGl2LmFwcGVuZENoaWxkKGFkZEljb24pO1xuICAgIGVkaXREaXYuYXBwZW5kQ2hpbGQoZWRpdEljb24pO1xuICAgIHJlbW92ZURpdi5hcHBlbmRDaGlsZChyZW1JY29uKTtcbiAgICBcbiAgICBidXR0b25Db250LmFwcGVuZENoaWxkKGFkZERpdik7XG4gICAgYnV0dG9uQ29udC5hcHBlbmRDaGlsZChlZGl0RGl2KTtcbiAgICBidXR0b25Db250LmFwcGVuZENoaWxkKHJlbW92ZURpdik7XG4gICAgYnV0dG9uQ29udC5jbGFzc0xpc3QuYWRkKFwicHJvamVjdE9wdGlvbnNcIik7XG5cbiAgICBwcm9qRGl2LmFwcGVuZENoaWxkKHByb2pDaGVja2JveCk7XG4gICAgcHJvakRpdi5hcHBlbmRDaGlsZChwcm9qTmFtZVNwYW4pO1xuICAgIHByb2pEaXYuYXBwZW5kQ2hpbGQoYnV0dG9uQ29udCk7XG4gICAgcHJvakRpdi5jbGFzc0xpc3QuYWRkKFwicHJvamVjdFwiKTtcblxuICAgIG1haW5TZWMuYXBwZW5kQ2hpbGQocHJvakRpdik7XG4gICAgbWFpblNlYy5hcHBlbmRDaGlsZCh0YXNrU2VjVUwpO1xuICAgIFxuICAgIC8vY2hlY2sgZm9yIHRhc2tzIHdpdGggYSBsb29wIGFuZCBkaXNwbGF5IGVhY2hcbiAgICBjaGVja0ZvclRhc2tzKHByb2plY3QpO1xuXG4gICAgLy9jYWxsIGV2ZW50TGlzdGVuZXIgaGVyZVxuICAgIHByb2plY3RFTGlzdGVuZXJzKCk7Ly9XSUxMIEhBVkUgVE8gQUREIEVWRU5UIExJU1RFTkVSUyBGT1IgVEFTS1MgSEVSRT8/P1xuICAgIGNvbnNvbGUubG9nKFwidGhpcyBjb25zb2xlIGxvZyBpcyBhZnRlciB0aGUgcHJvamVjdEVsaXN0ZW5lcnMgaXQgbG9va3MgbGlrZSBpdHMgd29ya2luZz8/XCIpO1xufVxuXG5mdW5jdGlvbiBjaGVja0ZvclRhc2tzKHByb2ope1xuICAgIC8vZ2l2ZW4gcHJvaiBhcyBwYXJhbSB3ZSB3aWxsIGNoZWNrIGlmIGl0IGNvbnRhaW5zIGFueSB0YXNrcyB0aGF0IG5lZWQgdG8gYmUgY3JlYXRlZFxuICAgIGNvbnN0IHRhc2tBcnIgPSBwcm9qLnRvRG9MaXN0O1xuICAgIGlmKHRhc2tBcnIpe1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGFza0Fyci5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBkaXNwbGF5VGFza0luTWFpbih0YXNrQXJyW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBjb25zdCBpID0gMDtcbiAgICAvLyB3aGlsZShwcm9qLnRvRG9MaXN0KXtcbiAgICAvLyAgICAgZGlzcGxheVRhc2tJbk1haW4ocHJvai50b0RvTGlzdFtpXSk7XG4gICAgLy8gICAgIGkrKztcbiAgICAvLyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhck1haW4oKXtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIF90ZXN0ZXJpbmcpO1xuICAgIHdoaWxlKG1haW5TZWMuZmlyc3RDaGlsZCl7XG4gICAgICAgIG1haW5TZWMucmVtb3ZlQ2hpbGQobWFpblNlYy5maXJzdENoaWxkKVxuICAgIH1cbn0iLCJpbXBvcnQgTWVudSBmcm9tICcuLi9zcmMvaW1ncy9tZW51LnBuZydcbmltcG9ydCBCcmFuZCBmcm9tICcuLi9zcmMvaW1ncy9Xb3JrZXJBbnRzTW9kLnBuZyc7XG5pbXBvcnQgQ2xvc2UgZnJvbSAnLi4vc3JjL2ltZ3MvY2xvc2UucG5nJztcbmltcG9ydCBDcmVhdGUgZnJvbSAnLi4vc3JjL2ltZ3MvYWRkLnBuZyc7XG5pbXBvcnQgeyBkaXNwbGF5UHJvamVjdEluTWFpbiB9IGZyb20gJy4vcHJvamVjdERPTSc7XG5pbXBvcnQgeyBmaW5kUHJvamVjdEluQXJyIH0gZnJvbSAnLi9wcm9qZWN0RXZlbnRMaXN0ZW5lcnMnO1xuLy9JIE5FRUQgVE8gQUREIEEgR0xPQkFMIFZBUklBQkxFIEFSUkFZIFRIQVQgU1RPUkVTIEFMTCBUSEUgUFJPSkVDVFMgSEVSRVxuZXhwb3J0IGxldCBwcm9qQXJyID0gW107XG5cbmV4cG9ydCBmdW5jdGlvbiBkcXMoYyl7XG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZW51RXZlbnRMaXN0ZW4oKXtcbiAgICBjb25zdCBtZW51Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51Q29udGFpbmVyXCIpO1xuICAgIGNvbnN0IG1haW5Mb2dvQ29udCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbkxvZ29cIik7XG4gICAgY29uc3QgY2xvc2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnVDbG9zZVwiKTtcbiAgICBjb25zdCBjcmVhdGVQcm9qQ29udCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3JlYXRlUHJvalwiKTtcbiAgICBcbiAgICBjb25zdCBtZW51SWNvbiA9IG5ldyBJbWFnZSgpO1xuICAgIG1lbnVJY29uLnNyYyA9IE1lbnU7XG4gICAgbWVudUljb24uY2xhc3NMaXN0LmFkZCgnbWFpbi1tZW51LWxvZ28nKTtcblxuICAgIGNvbnN0IG1haW5Mb2dvSW1nID0gbmV3IEltYWdlKCk7XG4gICAgbWFpbkxvZ29JbWcuc3JjID0gQnJhbmQ7XG4gICAgbWFpbkxvZ29JbWcuY2xhc3NMaXN0LmFkZCgnbWFpbi1sb2dvJyk7XG5cbiAgICBjb25zdCBjbG9zZUljb24gPSBuZXcgSW1hZ2UoKTtcbiAgICBjbG9zZUljb24uc3JjID0gQ2xvc2U7XG4gICAgY2xvc2VJY29uLmNsYXNzTGlzdC5hZGQoJ21lbnVDbG9zZScpO1xuXG4gICAgY29uc3QgY3JlYXRlUHJvakljb24gPSBuZXcgSW1hZ2UoKTtcbiAgICBjcmVhdGVQcm9qSWNvbi5zcmMgPSBDcmVhdGU7XG4gICAgY3JlYXRlUHJvakljb24uY2xhc3NMaXN0LmFkZCgnYWRkUHJvakJ1dHRvbicpO1xuXG4gICAgbWVudUNvbnRhaW5lci5hcHBlbmRDaGlsZChtZW51SWNvbik7XG4gICAgbWFpbkxvZ29Db250LmFwcGVuZENoaWxkKG1haW5Mb2dvSW1nKTtcbiAgICBjbG9zZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjbG9zZUljb24pO1xuICAgIGNyZWF0ZVByb2pDb250LmFwcGVuZENoaWxkKGNyZWF0ZVByb2pJY29uKTtcblxuICAgIGNvbnN0IHNpZGVCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpZGViYXItbWVudVwiKTtcbiAgICBjb25zdCBwcm9qT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3UHJvamVjdE92ZXJsYXlcIik7XG5cbiAgICBtZW51Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgc2lkZUJhci5zdHlsZS5hbmltYXRpb24gPSAnbWVudVNsaWRlT24gMS41cyBmb3J3YXJkcyc7XG4gICAgfSk7XG4gICAgY2xvc2VDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICBzaWRlQmFyLnN0eWxlLmFuaW1hdGlvbiA9ICdtZW51U2xpZGVDbG9zZSAxLjVzIGZvcndhcmRzJztcbiAgICB9KTtcbiAgICBjcmVhdGVQcm9qQ29udC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJjcmVhdGUgcHJvamVjdCBidXR0b24gY2xpY2tlZCEhXCIpO1xuICAgICAgICBzaWRlQmFyLnN0eWxlLmFuaW1hdGlvbiA9ICdtZW51U2xpZGVDbG9zZSAxLjVzIGZvcndhcmRzJztcbiAgICAgICAgcHJvak92ZXJsYXkuc3R5bGUuYW5pbWF0aW9uID0gJ3Byb2plY3RTbGlkZURvd24gMS41cyBmb3J3YXJkcyc7XG4gICAgfSk7XG4gICAgc2lkZUJhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGlmKGUudGFyZ2V0LnRhZ05hbWUgPT09ICdTUEFOJyl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInRoZSBmb2xsb3dpbmcgaXMgZS50YXJnZXQudmFsdWVcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLnRhcmdldC50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICBjb25zdCBkaXNwUHJvaiA9IGZpbmRQcm9qZWN0SW5BcnIoZS50YXJnZXQudGV4dENvbnRlbnQpXG4gICAgICAgICAgICBkaXNwbGF5UHJvamVjdEluTWFpbihkaXNwUHJvaik7XG4gICAgICAgICAgICAvL2Rpc3BsYXlUYXNrSW5NYWluKGRpc3BQcm9qKTsvL1RISVMgTUlHSFQgSEFWRSBUTyBCRSBDQUxMRUQgV0lUSElOIERJU1BMQVlQUk9KRUNUSU5NQUlOIFdJVEggVEhFIFBST0pFQ1QgQU5EIFVMIFBBUkFNRVRFUlNcbiAgICAgICAgfVxuICAgIH0pO1xufSIsImltcG9ydCB7IG1lbnVFdmVudExpc3RlbiwgcHJvakFyciB9IGZyb20gXCIuL21lbnVFdmVudExpc3RlbmVyc1wiO1xuaW1wb3J0IHsgYWRkUHJvamVjdFRvU2lkZWJhciwgZGlzcGxheVByb2plY3RJbk1haW4gfSBmcm9tIFwiLi9wcm9qZWN0RE9NXCI7XG5pbXBvcnQgeyBwcm9qZWN0T3ZlcmxheVN0dWZmIH0gZnJvbSBcIi4vcHJvamVjdEZvcm1cIjtcbmltcG9ydCB7IHRhc2tPdmVybGF5TGlzdGVuZXJzLCBfdGFza1N1Ym1pdCB9IGZyb20gXCIuL3Rhc2tGb3JtXCI7XG5pbXBvcnQgeyBwcm9qZWN0RUxpc3RlbmVycyB9IGZyb20gXCIuL3Byb2plY3RFdmVudExpc3RlbmVyc1wiO1xuaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuL3Byb2plY3RDbGFzc1wiO1xuLy8gaW1wb3J0IHsgY3JlYXRlUHJvamVjdEZyb21EYXRhIH0gZnJvbSBcIi4vcHJvamVjdEZvcm1cIjtcbm1lbnVFdmVudExpc3RlbigpO1xucHJvamVjdE92ZXJsYXlTdHVmZigpO1xuY29uc3QgZGVmUHJvaiA9IG5ldyBQcm9qZWN0KFwiZGVmYXVsdFByb2plY3RcIiwgXCJUaGlzIGlzIGEgZGVmYXVsdCBwcm9qZWN0LiBZb3UgY2FuIGFsc28gY3JlYXRlIHlvdXIgb3duIDopXCIpO1xucHJvakFyclswXSA9IGRlZlByb2o7XG5kaXNwbGF5UHJvamVjdEluTWFpbihkZWZQcm9qKTtcbmFkZFByb2plY3RUb1NpZGViYXIoXCJkZWZhdWx0UHJvamVjdFwiKTtcbnByb2plY3RFTGlzdGVuZXJzKCk7Ly9USElTIFdBUyBDT01NRU5URUQgT1VUXG50YXNrT3ZlcmxheUxpc3RlbmVycygpOy8vVEhJUyBXQVMgQ09NTUVOVEVEIE9VVFxuLy8gbGV0IHByb2oxID0gbmV3IFByb2plY3QoXCJjYXJsb3NCcnVoXCIsIFwiYXBpdWZcIik7XG4vLyBjb25zb2xlLmxvZyhwcm9qMS5uYW1lKTtcbi8vIGNvbnNvbGUubG9nKHByb2oxLmRlc2NyaXB0aW9uKTsiXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImciLCJnbG9iYWxUaGlzIiwidGhpcyIsIkZ1bmN0aW9uIiwiZSIsIndpbmRvdyIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImRvY3VtZW50IiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImxlbmd0aCIsImkiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwiVGFzayIsImNvbnN0cnVjdG9yIiwidFRpdGxlIiwidERlc2MiLCJ0RHVlIiwidFByaW8iLCJ0UHJvaiIsIm5ld3RUaXRsZSIsIl90VGl0bGUiLCJuZXd0RGVzYyIsIl90RGVzYyIsIm5ld3REdWUiLCJfdER1ZSIsIm5ld3RQcmlvIiwiX3RQcmlvIiwibmV3dFByb2oiLCJfdFByb2oiLCJQcm9qZWN0IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInRvRG9zIiwibmV3VGFzayIsIlR0aXRsZSIsIlRkZXNjIiwiVGR1ZSIsIlRwcmlvIiwiVHByb2oiLCJ0IiwicHVzaCIsInByaW50VGFza3MiLCJjb25zb2xlIiwibG9nIiwibnVtT2ZUYXNrcyIsIl90aXRsZSIsIl9kZXNjcmlwdGlvbiIsInRvRG9MaXN0IiwibmV3VGl0bGUiLCJuZXdEZXNjIiwicHJvak92ZXJsYXkiLCJxdWVyeVNlbGVjdG9yIiwiZGlzcGxheU5lZWRUaXRsZSIsImVycm9yT3ZlcmxheSIsInN0eWxlIiwiYW5pbWF0aW9uIiwic2V0VGltZW91dCIsInByb2plY3RGb3JtQ2xlYXIiLCJnZXRFbGVtZW50QnlJZCIsInZhbHVlIiwiZGlzcGxheVRhc2tJbk1haW4iLCJ0YXNrIiwicHJvalVMIiwidGFza0xJIiwiY3JlYXRlRWxlbWVudCIsImJ1dHRvbkRpdiIsInRhc2tDaGVja2JveCIsInR5cGUiLCJ0YXNrRGF0ZUlucHV0IiwidGFza0VkaXREaXYiLCJ0YXNrUmVtb3ZlRGl2IiwidGFza0VkaXRJY29uIiwiSW1hZ2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0YXNrUmVtb3ZlSWNvbiIsImFwcGVuZENoaWxkIiwidGV4dENvbnRlbnQiLCJ0YXNrT3ZlcmxheSIsImRxcyIsInRhc2tDbG9zZSIsInRhc2tTdWJtaXQiLCJ0YXNrT3ZlcmxheUxpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXNrRm9ybUNsZWFyIiwiX3Rhc2tTdWJtaXQiLCJtYWRlVGFzayIsInByb2oiLCJ0YXNrVGl0bGUiLCJ0YXNrRGVzYyIsInRhc2tEdWVEYXRlIiwidGFza1ByaW8iLCJ0YXNrUHJvaiIsImZuZFByb2oiLCJmaW5kUHJvamVjdEluQXJyIiwidGFza01hZGUiLCJleHRyYWN0RGF0YUZvclRhc2siLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicHJvak92ZXJsYXkxIiwiZWRpdEJ1dHRvbkNsaWNrZWQiLCJjdXJyVGl0bGUyIiwicHJvamVjdEVMaXN0ZW5lcnMiLCJfdGVzdGVyaW5nIiwiZWRpdEJ1dHRvbiIsInRhcmdldCIsIm1hdGNoZXMiLCJyZW1vdmVCdXR0b24iLCJhZGRUYXNrQnV0dG9uIiwiY3VyclRpdGxlIiwicHJvamVjdFRpdGxlIiwic2lkZWJhclByb2oiLCJzaWRlYmFyUHJvakNoaWxkcmVuIiwiY2hpbGRyZW4iLCJyZW1vdmVDaGlsZCIsInJlbW92ZVByb2plY3RGcm9tU2lkZWJhciIsInJlbW92ZVByb2pBcnIiLCJjbGVhck1haW4iLCJhIiwicHJvakFyciIsInByb2pOYW1lIiwic3BsaWNlIiwiaW5kZXgiLCJtYWluU2VjIiwiYWRkUHJvamVjdFRvU2lkZWJhciIsInByb2pTaWRlIiwicHJvalRpdGxlIiwiZGlzcGxheVByb2plY3RJbk1haW4iLCJwcm9qZWN0IiwicHJvakRpdiIsInRhc2tTZWNVTCIsInByb2pDaGVja2JveCIsInByb2pOYW1lU3BhbiIsIm1haW5Nb2RQcm9qVGl0bGUiLCJzbGljZSIsImJ1dHRvbkNvbnQiLCJhZGREaXYiLCJlZGl0RGl2IiwicmVtb3ZlRGl2IiwiYWRkSWNvbiIsImVkaXRJY29uIiwicmVtSWNvbiIsInRhc2tBcnIiLCJjaGVja0ZvclRhc2tzIiwiZmlyc3RDaGlsZCIsImMiLCJtZW51Q29udGFpbmVyIiwibWFpbkxvZ29Db250IiwiY2xvc2VDb250YWluZXIiLCJjcmVhdGVQcm9qQ29udCIsIm1lbnVJY29uIiwibWFpbkxvZ29JbWciLCJjbG9zZUljb24iLCJjcmVhdGVQcm9qSWNvbiIsInNpZGVCYXIiLCJ0YWdOYW1lIiwibWVudUV2ZW50TGlzdGVuIiwiY2xvc2VCdXR0b24iLCJzdWJtaXRCdXR0b24iLCJwcm9qZWN0UGFyYW0iLCJ0aXRsZUlucHV0IiwiZGVzY0lucHV0IiwicHJvamVjdE1hZGUiLCJleHRyYWN0RGF0YUZvclByb2plY3QiLCJyZXBsYWNlVGl0bGUiLCJlZGl0UHJvamVjdEluQXJyIiwiZWRpdFByb2plY3RJblNpZGViYXIiLCJwcm9qZWN0T3ZlcmxheVN0dWZmIiwiZGVmUHJvaiJdLCJzb3VyY2VSb290IjoiIn0=