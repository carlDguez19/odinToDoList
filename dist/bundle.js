(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var o=n.getElementsByTagName("script");if(o.length)for(var i=o.length-1;i>-1&&!e;)e=o[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e=t.p+"abbfad808c2786a6a2d4.png",n=t.p+"986e98635b18601755cf.png",o=t.p+"177a54134d0bd5aefd06.png",i=t.p+"edb755c23d1ebcf9c7a4.png",c=t.p+"c9c7160b568bb10d504c.png";class s{constructor(t,e,n,o,i){this.tTitle=t,this.tDesc=e,this.tDue=n,this.tPrio=o,this.tProj=i}set tTitle(t){this._tTitle=t}set tDesc(t){this._tDesc=t}set tDue(t){this._tDue=t}set tPrio(t){this._tPrio=t}set tProj(t){this._tProj=t}get tTitle(){return this._tTitle}get tDesc(){return this._tDesc}get tDue(){return this._tDue}get tPrio(){return this._tPrio}get tProj(){return this._tProj}}class l{constructor(t,e){this.title=t,this.description=e,this.toDos=[]}newTask(t,e,n,o,i){let c=new s(t,e,n,o,i);return this.toDos.push(c),c}printTasks(){for(var t=0;t<this.toDos.length;t++)console.log(this.toDos[t])}get numOfTasks(){return this.toDos.length}get title(){return this._title}get description(){return this._description}get toDoList(){return this.toDos}set title(t){this._title=t}set description(t){this._description=t}}const r=document.querySelector(".newProjectOverlay");function d(){const t=document.querySelector(".errorProjectOverlay");t.style.animation="projectSlideDown 1.5s forwards",setTimeout((function(){t.style.animation="projectSlideUp 1.5s forwards"}),2500)}function a(){document.getElementById("title").value="",document.getElementById("description").value=""}function u(t){const e=document.querySelector(".todoUL"),n=document.createElement("li"),i=document.createElement("div"),s=document.createElement("input");s.type="checkbox";const l=document.createElement("input");l.type="date";const r=document.createElement("div"),d=document.createElement("div"),a=new Image;a.src=c,a.classList.add("projEdit");const u=new Image;u.src=o,u.classList.add("projRemove"),r.appendChild(a),d.appendChild(u),n.textContent=t.tTitle+"  "+t.tDue,n.appendChild(l),i.appendChild(s),i.appendChild(r),i.appendChild(d),i.classList.add("taskButtons"),n.appendChild(i),n.classList.add("todo"),e.appendChild(n)}const p=I(".newTaskOverlay"),m=I(".taskCloseButton"),h=I(".taskSubmitButton");function g(){m.addEventListener("click",(function(){v(),p.style.animation="projectSlideUp 1.5s forwards"})),h.addEventListener("click",f)}function f(){p.style.animation="projectSlideUp 1.5s forwards";const t=function(t){const e=document.getElementById("tTitle").value,n=document.getElementById("tDescription").value,o=document.getElementById("tDueDate").value,i=document.getElementById("tTaskPrio").value,c=I(".projectNameMain").textContent;console.log(c);const s=L(c);if(e&&o){console.log(s.title);const t=s.newTask(e,n,o,i,s.title);return v(),t}return d(),v(),void(p.style.animation="projectSlideDown 1.5s forwards")}();t&&u(t),v(),h.removeEventListener("click",f)}function v(){document.getElementById("tTitle").value="",document.getElementById("tDescription").value="",document.getElementById("tDueDate").value="",document.getElementById("tTaskPrio").value="Select One"}const y=document.querySelector(".newProjectOverlay");let C=!1,j=null;function w(){document.addEventListener("click",E)}var E=function(t){const e=t.target.matches(".projEdit"),n=t.target.matches(".projRemove"),o=t.target.matches(".projAdd"),i=I(".projectNameMain");if(j=i,e)console.log("editButton clicked"),c=i.textContent,y.style.animation="projectSlideDown 1.5s forwards",I("#title").value=c,C=!0;else if(n){console.log("removeButton clicked"),function(t){const e=I(".sidebarProject"),n=e.children;for(let o=0;o<n.length;o++)n[o].textContent==t&&e.removeChild(n[o])}(i.textContent),S(i.textContent),P();for(let t=0;t<B.length;t++)console.log(t+1+" "+B[t].title)}else o&&(p.style.animation="projectSlideDown 1.5s forwards",g());var c};function S(t){for(let e=0;e<B.length;e++)B[e].title==t&&B.splice(e,1)}function L(t){let e=0;for(let n=0;n<B.length;n++)if(e=n,B[n].title==t)return B[n]}const D=I(".projectSection");function k(t){const e=I(".sidebarProject");let n=document.createElement("span");n.textContent=t,n.classList.add("projectNameSidebar"),e.appendChild(n)}function b(t){P();const e=document.createElement("div"),n=document.createElement("ul");n.classList.add("todoUL");const s=document.createElement("input");s.type="checkbox",s.classList.add("projectCheckbox");const l=document.createElement("span");if(t.title.length>30){let e=t.title.slice(0,31);l.textContent=e+"..."}else l.textContent=t.title;l.classList.add("projectNameMain");const r=document.createElement("div"),d=document.createElement("div"),a=document.createElement("div"),p=document.createElement("div"),m=new Image;m.src=i,m.classList.add("projAdd");const h=new Image;h.src=c,h.classList.add("projEdit");const g=new Image;g.src=o,g.classList.add("projRemove"),d.appendChild(m),a.appendChild(h),p.appendChild(g),r.appendChild(d),r.appendChild(a),r.appendChild(p),r.classList.add("projectOptions"),e.appendChild(s),e.appendChild(l),e.appendChild(r),e.classList.add("project"),D.appendChild(e),D.appendChild(n),function(t){const e=t.toDoList;if(e)for(var n=0;n<e.length;n++)u(e[n])}(t),w(),console.log("this console log is after the projectElisteners it looks like its working??")}function P(){for(document.removeEventListener("click",E);D.firstChild;)D.removeChild(D.firstChild)}let B=[];function I(t){return document.querySelector(t)}!function(){const t=document.querySelector(".menuContainer"),c=document.querySelector(".mainLogo"),s=document.querySelector(".menuClose"),l=document.querySelector(".createProj"),r=new Image;r.src=e,r.classList.add("main-menu-logo");const d=new Image;d.src=n,d.classList.add("main-logo");const a=new Image;a.src=o,a.classList.add("menuClose");const u=new Image;u.src=i,u.classList.add("addProjButton"),t.appendChild(r),c.appendChild(d),s.appendChild(a),l.appendChild(u);const p=document.querySelector(".sidebar-menu"),m=document.querySelector(".newProjectOverlay");t.addEventListener("click",(function(){p.style.animation="menuSlideOn 1.5s forwards"})),s.addEventListener("click",(function(){p.style.animation="menuSlideClose 1.5s forwards"})),l.addEventListener("click",(function(){p.style.animation="menuSlideClose 1.5s forwards",m.style.animation="projectSlideDown 1.5s forwards"})),p.addEventListener("click",(t=>{"SPAN"===t.target.tagName&&(console.log("the following is e.target.value"),console.log(t.target.textContent),b(L(t.target.textContent)))}))}(),function(){const t=document.querySelector(".closeButton"),e=document.querySelector(".submitButton");t.addEventListener("click",(function(){r.style.animation="projectSlideUp 1.5s forwards",a()})),e.addEventListener("click",(function(){r.style.animation="projectSlideUp 1.5s forwards";const t=function(){const t=document.getElementById("title").value;let e=document.getElementById("description").value;if(t){const n=new l(t,e);return B.push(n),n}return d(),a(),void(r.style.animation="projectSlideDown 1.5s forwards")}();if(C){!function(t){console.log("editTitle being replaced "+t);for(let e=0;e<B.length-1;e++)console.log("inside edit func arr "+B[e].title),B[e].title==t&&(B[e].title=B[B.length-1].title,B[e].description=B[B.length-1].description)}(j.textContent),function(t){const e=I(".sidebarProject").children;for(let n=0;n<e.length;n++)e[n].textContent==t&&(console.log("found sidebar project named "+e[n].textContent),e[n].textContent=B[e.length-1].title)}(j.textContent),I(".projectNameMain").textContent=B[B.length-1].title,S(t.title),C=!1;for(let t=0;t<B.length;t++)console.log(t+1+" "+B[t].title)}else{if(t){k(t.title),b(t);for(let t=0;t<B.length;t++)console.log(t+1+" "+B[t].title)}a()}}))}();const T=new l("defaultProject","This is a default project. You can also create your own :)");B[0]=T,b(T),k("defaultProject"),w(),g()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUlrQixFQUFJLEVBQUdBLEVBQUlDLEVBQVEvRyxPQUFROEcsSUFDL0IzRSxRQUFRQyxJQUFLMEUsRUFBRSxFQUFJLElBQUtDLEVBQVFELEdBQUd2RixNQUUzQyxLQUFLLENBQ0QsR0FBR2dJLEVBQWEsQ0FFWm5DLEVBQW9CbUMsRUFBYWhJLE9BQ2pDZ0csRUFBcUJnQyxHQUVyQixJQUFJLElBQUl6QyxFQUFJLEVBQUdBLEVBQUlDLEVBQVEvRyxPQUFROEcsSUFDL0IzRSxRQUFRQyxJQUFLMEUsRUFBRSxFQUFJLElBQUtDLEVBQVFELEdBQUd2RixNQUUzQyxDQUNBMkIsR0FDSixDQUNKLEdBQ0osQ010Q0E2RyxHQUNBLE1BQU1DLEVBQVUsSUFBSTFJLEVBQVEsaUJBQWtCLDhEQUM5Q3lGLEVBQVEsR0FBS2lELEVBQ2J6QyxFQUFxQnlDLEdBQ3JCNUMsRUFBb0Isa0JBQ3BCdEIsSUFDQW5CLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZGludG9kb2xpc3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vb2RpbnRvZG9saXN0L3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vb2RpbnRvZG9saXN0L3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy90YXNrQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vb2RpbnRvZG9saXN0Ly4vc3JjL3Byb2plY3RDbGFzcy5qcyIsIndlYnBhY2s6Ly9vZGludG9kb2xpc3QvLi9zcmMvcHJvamVjdEZvcm0uanMiLCJ3ZWJwYWNrOi8vb2RpbnRvZG9saXN0Ly4vc3JjL3Rhc2tET00uanMiLCJ3ZWJwYWNrOi8vb2RpbnRvZG9saXN0Ly4vc3JjL3Rhc2tGb3JtLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy9wcm9qZWN0RXZlbnRMaXN0ZW5lcnMuanMiLCJ3ZWJwYWNrOi8vb2RpbnRvZG9saXN0Ly4vc3JjL3Byb2plY3RET00uanMiLCJ3ZWJwYWNrOi8vb2RpbnRvZG9saXN0Ly4vc3JjL21lbnVFdmVudExpc3RlbmVycy5qcyIsIndlYnBhY2s6Ly9vZGludG9kb2xpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjO1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHtcblx0XHRcdHZhciBpID0gc2NyaXB0cy5sZW5ndGggLSAxO1xuXHRcdFx0d2hpbGUgKGkgPiAtMSAmJiAhc2NyaXB0VXJsKSBzY3JpcHRVcmwgPSBzY3JpcHRzW2ktLV0uc3JjO1xuXHRcdH1cblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiZXhwb3J0IGNsYXNzIFRhc2t7XG4gICAgY29uc3RydWN0b3IodFRpdGxlLCB0RGVzYywgdER1ZSwgdFByaW8sIHRQcm9qKXtcbiAgICAgICAgdGhpcy50VGl0bGUgPSB0VGl0bGU7XG4gICAgICAgIHRoaXMudERlc2MgPSB0RGVzYztcbiAgICAgICAgdGhpcy50RHVlID0gdER1ZTtcbiAgICAgICAgdGhpcy50UHJpbyA9IHRQcmlvO1xuICAgICAgICB0aGlzLnRQcm9qID0gdFByb2o7XG4gICAgfVxuICAgIHNldCB0VGl0bGUobmV3dFRpdGxlKXtcbiAgICAgICAgdGhpcy5fdFRpdGxlID0gbmV3dFRpdGxlO1xuICAgIH1cbiAgICBzZXQgdERlc2MobmV3dERlc2Mpe1xuICAgICAgICB0aGlzLl90RGVzYyA9IG5ld3REZXNjO1xuICAgIH1cbiAgICBzZXQgdER1ZShuZXd0RHVlKXtcbiAgICAgICAgdGhpcy5fdER1ZSA9IG5ld3REdWU7XG4gICAgfVxuICAgIHNldCB0UHJpbyhuZXd0UHJpbyl7XG4gICAgICAgIHRoaXMuX3RQcmlvID0gbmV3dFByaW87XG4gICAgfVxuICAgIHNldCB0UHJvaihuZXd0UHJvail7XG4gICAgICAgIHRoaXMuX3RQcm9qID0gbmV3dFByb2o7XG4gICAgfVxuXG4gICAgZ2V0IHRUaXRsZSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5fdFRpdGxlO1xuICAgIH1cbiAgICBnZXQgdERlc2MoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3REZXNjO1xuICAgIH1cbiAgICBnZXQgdER1ZSgpe1xuICAgICAgICByZXR1cm4gdGhpcy5fdER1ZTtcbiAgICB9XG4gICAgZ2V0IHRQcmlvKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl90UHJpbztcbiAgICB9XG4gICAgZ2V0IHRQcm9qKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl90UHJvajtcbiAgICB9XG59IiwiaW1wb3J0IHsgVGFzayB9IGZyb20gXCIuL3Rhc2tDbGFzc1wiO1xuXG5leHBvcnQgY2xhc3MgUHJvamVjdHtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24pe1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy50b0RvcyA9IFtdO1xuICAgIH1cbiAgICBuZXdUYXNrKFR0aXRsZSwgVGRlc2MsIFRkdWUsIFRwcmlvLCBUcHJvail7XG4gICAgICAgIGxldCB0ID0gbmV3IFRhc2soVHRpdGxlLCBUZGVzYywgVGR1ZSwgVHByaW8sIFRwcm9qKTtcbiAgICAgICAgdGhpcy50b0Rvcy5wdXNoKHQpOy8vcGxhY2VkIHVuZGVyc2NvcmVcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuXG4gICAgcHJpbnRUYXNrcygpe1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy50b0Rvcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnRvRG9zW2ldKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBudW1PZlRhc2tzKCl7XG4gICAgICAgIHJldHVybiB0aGlzLnRvRG9zLmxlbmd0aDsvL3BsYWNlZCB1bmRlcnNjb3JlXG4gICAgfVxuXG4gICAgZ2V0IHRpdGxlKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl90aXRsZTtcbiAgICB9XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgZ2V0IHRvRG9MaXN0KCl7Ly9nZXQgYXJyYXkgdGhlbiBwdXNoIGEgdG9Eb1xuICAgICAgICByZXR1cm4gdGhpcy50b0RvcztcbiAgICB9XG5cbiAgICBzZXQgdGl0bGUobmV3VGl0bGUpe1xuICAgICAgICB0aGlzLl90aXRsZSA9IG5ld1RpdGxlO1xuICAgIH1cbiAgICBzZXQgZGVzY3JpcHRpb24obmV3RGVzYyl7XG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gbmV3RGVzYztcbiAgICB9XG5cbn0iLCJpbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdENsYXNzXCI7XG5pbXBvcnQgeyBwcm9qQXJyIH0gZnJvbSBcIi4vbWVudUV2ZW50TGlzdGVuZXJzXCI7XG5pbXBvcnQgeyBhZGRQcm9qZWN0VG9TaWRlYmFyLCBlZGl0UHJvamVjdEluU2lkZWJhciwgZGlzcGxheVByb2plY3RJbk1haW4sIGVkaXRQcm9qZWN0TmFtZU1haW4gfSBmcm9tIFwiLi9wcm9qZWN0RE9NXCI7XG4vL2ltcG9ydCB7IHByb2plY3RFTGlzdGVuZXJzIH0gZnJvbSBcIi4vcHJvamVjdEV2ZW50TGlzdGVuZXJzXCI7XG5pbXBvcnQgeyBfdGVzdGVyaW5nLCBmaW5kUHJvamVjdEluQXJyLCByZW1vdmVQcm9qQXJyLCBlZGl0QnV0dG9uQ2xpY2tlZCwgY3VyclRpdGxlMiB9IGZyb20gXCIuL3Byb2plY3RFdmVudExpc3RlbmVyc1wiO1xuXG5jb25zdCBwcm9qT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3UHJvamVjdE92ZXJsYXlcIik7XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9qZWN0T3ZlcmxheVN0dWZmKCl7XG4gICAgLy9jb25zdCBwcm9qT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3UHJvamVjdE92ZXJsYXlcIik7XG5cbiAgICAvL2J1dHRvbnNcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xvc2VCdXR0b25cIik7XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdWJtaXRCdXR0b25cIik7XG5cbiAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHByb2pPdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9ICdwcm9qZWN0U2xpZGVVcCAxLjVzIGZvcndhcmRzJztcbiAgICAgICAgcHJvamVjdEZvcm1DbGVhcigpO1xuICAgIH0pXG4gICAgc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInN1Ym1pdCBidXR0b24gY2xpY2tlZFwiKTtcbiAgICAgICAgcHJvak92ZXJsYXkuc3R5bGUuYW5pbWF0aW9uID0gJ3Byb2plY3RTbGlkZVVwIDEuNXMgZm9yd2FyZHMnO1xuICAgICAgICBjb25zdCBwcm9qZWN0UGFyYW0gPSBleHRyYWN0RGF0YUZvclByb2plY3QoKTtcbiAgICAgICAgLy9jcmVhdGVQcm9qZWN0RE9NKHByb2plY3RQYXJhbSk7Ly90aGlzIHdpbGwgYmUgaW4gcHJvamVjdERPTS5qcyBmaWxlXG4gICAgICAgIGlmKGVkaXRCdXR0b25DbGlja2VkKXtcbiAgICAgICAgICAgIGVkaXRQcm9qZWN0SW5BcnIoY3VyclRpdGxlMi50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICBlZGl0UHJvamVjdEluU2lkZWJhcihjdXJyVGl0bGUyLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgIGVkaXRQcm9qZWN0TmFtZU1haW4oKTtcbiAgICAgICAgICAgIHJlbW92ZVByb2pBcnIocHJvamVjdFBhcmFtLnRpdGxlKTtcbiAgICAgICAgICAgIGVkaXRCdXR0b25DbGlja2VkID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IobGV0IGEgPSAwOyBhIDwgcHJvakFyci5sZW5ndGg7IGErKyl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coKGErMSkrIFwiIFwiKyBwcm9qQXJyW2FdLnRpdGxlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGlmKHByb2plY3RQYXJhbSl7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcInByb2plY3Qgb2JqIHJldHVybmVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICAgICAgICBhZGRQcm9qZWN0VG9TaWRlYmFyKHByb2plY3RQYXJhbS50aXRsZSkvL3RoaXMgd2lsbCBiZSBpbiBwcm9qZWN0RE9NLmpzIGZpbGVcbiAgICAgICAgICAgICAgICBkaXNwbGF5UHJvamVjdEluTWFpbihwcm9qZWN0UGFyYW0pO1xuICAgICAgICAgICAgICAgIC8vcHJvamVjdEVMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGEgPSAwOyBhIDwgcHJvakFyci5sZW5ndGg7IGErKyl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKChhKzEpKyBcIiBcIisgcHJvakFyclthXS50aXRsZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9qZWN0Rm9ybUNsZWFyKCk7XG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5mdW5jdGlvbiBlZGl0UHJvamVjdEluQXJyKHJlcGxhY2VUaXRsZSl7XG4gICAgY29uc29sZS5sb2coXCJlZGl0VGl0bGUgYmVpbmcgcmVwbGFjZWQgXCIgKyByZXBsYWNlVGl0bGUpO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwcm9qQXJyLmxlbmd0aC0xOyBpKyspe1xuICAgICAgICBjb25zb2xlLmxvZyhcImluc2lkZSBlZGl0IGZ1bmMgYXJyIFwiICsgcHJvakFycltpXS50aXRsZSk7XG4gICAgICAgIGlmKHByb2pBcnJbaV0udGl0bGUgPT0gcmVwbGFjZVRpdGxlKXtcbiAgICAgICAgICAgIHByb2pBcnJbaV0udGl0bGUgPSBwcm9qQXJyW3Byb2pBcnIubGVuZ3RoLTFdLnRpdGxlO1xuICAgICAgICAgICAgcHJvakFycltpXS5kZXNjcmlwdGlvbiA9IHByb2pBcnJbcHJvakFyci5sZW5ndGgtMV0uZGVzY3JpcHRpb247XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3REYXRhRm9yUHJvamVjdCgpe1xuICAgIGNvbnN0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpdGxlXCIpLnZhbHVlXG4gICAgbGV0IGRlc2NJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIikudmFsdWU7XG5cbiAgICBpZih0aXRsZUlucHV0KXtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcImRldGVjdGVkIHRpdGxlXCIpOy8vZGVidWdnaW5nXG4gICAgICAgIGNvbnN0IHByb2plY3RNYWRlID0gbmV3IFByb2plY3QodGl0bGVJbnB1dCwgZGVzY0lucHV0KTtcbiAgICAgICAgcHJvakFyci5wdXNoKHByb2plY3RNYWRlKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhwcm9qQXJyWyhwcm9qQXJyLmxlbmd0aCktMV0udGl0bGUpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKHByb2pBcnJbKHByb2pBcnIubGVuZ3RoKS0xXS5kZXNjcmlwdGlvbik7XG4gICAgICAgIHJldHVybiBwcm9qZWN0TWFkZTtcbiAgICB9ZWxzZXtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIk5lZWQgYSB0aXRsZSB0byBjcmVhdGUgYSBwcm9qZWN0IVwiKTsvL2RlYnVnZ2luZ1xuICAgICAgICBkaXNwbGF5TmVlZFRpdGxlKCk7Ly8gQ0FOIElOU0VSVCBET00gTUFOSVBVTEFUSU9OIFRPIFNISUZUIERPV04gVEhFIEVSUk9SIE9WRVJMQVkgOilcbiAgICAgICAgcHJvamVjdEZvcm1DbGVhcigpO1xuICAgICAgICBwcm9qT3ZlcmxheS5zdHlsZS5hbmltYXRpb24gPSBcInByb2plY3RTbGlkZURvd24gMS41cyBmb3J3YXJkc1wiO1xuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheU5lZWRUaXRsZSgpe1xuICAgIGNvbnN0IGVycm9yT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZXJyb3JQcm9qZWN0T3ZlcmxheVwiKTtcbiAgICBlcnJvck92ZXJsYXkuc3R5bGUuYW5pbWF0aW9uID0gXCJwcm9qZWN0U2xpZGVEb3duIDEuNXMgZm9yd2FyZHNcIlxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgZXJyb3JPdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9IFwicHJvamVjdFNsaWRlVXAgMS41cyBmb3J3YXJkc1wiXG4gICAgfSwgMjUwMCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9qZWN0Rm9ybUNsZWFyKCl7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKS52YWx1ZSA9IFwiXCI7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvblwiKS52YWx1ZSA9IFwiXCI7XG59IiwiaW1wb3J0IEVkaXQgZnJvbSAnLi4vc3JjL2ltZ3MvZWRpdC5wbmcnO1xuaW1wb3J0IFJlbW92ZSBmcm9tICcuLi9zcmMvaW1ncy9jbG9zZS5wbmcnO1xuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheVRhc2tJbk1haW4odGFzayl7Ly8ocHJvamVjdCwgdWwpIG1pZ2h0IGJlIG5lZWRlZCBhcyBwYXJhbXMgYnV0IHByb2JzIG5vdFxuICAgIGNvbnN0IHByb2pVTCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb1VMXCIpO1xuXG4gICAgY29uc3QgdGFza0xJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAvL3Rhc2tMSS5jbGFzc0xpc3QuYWRkKFwidG9kb1wiKTtcblxuICAgIGNvbnN0IGJ1dHRvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgY29uc3QgdGFza0NoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICB0YXNrQ2hlY2tib3gudHlwZSA9IFwiY2hlY2tib3hcIjtcbiAgICAvL3Rhc2tDaGVja2JveC5jbGFzc0xpc3QuYWRkKFwidG9kb0NoZWNrXCIpO1xuXG4gICAgY29uc3QgdGFza0RhdGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgdGFza0RhdGVJbnB1dC50eXBlID0gXCJkYXRlXCI7XG4gICAgLy90YXNrRGF0ZUlucHV0LmNsYXNzTGlzdC5hZGQoXCJ0b2RvRGF0ZVwiKTtcblxuICAgIGNvbnN0IHRhc2tFZGl0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgdGFza1JlbW92ZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgY29uc3QgdGFza0VkaXRJY29uID0gbmV3IEltYWdlKCk7XG4gICAgdGFza0VkaXRJY29uLnNyYyA9IEVkaXQ7XG4gICAgdGFza0VkaXRJY29uLmNsYXNzTGlzdC5hZGQoJ3Byb2pFZGl0Jyk7XG5cbiAgICBjb25zdCB0YXNrUmVtb3ZlSWNvbiA9IG5ldyBJbWFnZSgpO1xuICAgIHRhc2tSZW1vdmVJY29uLnNyYyA9IFJlbW92ZTtcbiAgICB0YXNrUmVtb3ZlSWNvbi5jbGFzc0xpc3QuYWRkKCdwcm9qUmVtb3ZlJyk7XG5cbiAgICB0YXNrRWRpdERpdi5hcHBlbmRDaGlsZCh0YXNrRWRpdEljb24pO1xuICAgIHRhc2tSZW1vdmVEaXYuYXBwZW5kQ2hpbGQodGFza1JlbW92ZUljb24pO1xuXG4gICAgdGFza0xJLnRleHRDb250ZW50ID0gdGFzay50VGl0bGUgKyBcIiAgXCIgKyB0YXNrLnREdWU7XG4gICAgdGFza0xJLmFwcGVuZENoaWxkKHRhc2tEYXRlSW5wdXQpO1xuXG4gICAgYnV0dG9uRGl2LmFwcGVuZENoaWxkKHRhc2tDaGVja2JveCk7XG4gICAgYnV0dG9uRGl2LmFwcGVuZENoaWxkKHRhc2tFZGl0RGl2KTtcbiAgICBidXR0b25EaXYuYXBwZW5kQ2hpbGQodGFza1JlbW92ZURpdik7XG5cbiAgICBidXR0b25EaXYuY2xhc3NMaXN0LmFkZCgndGFza0J1dHRvbnMnKTtcblxuICAgIHRhc2tMSS5hcHBlbmRDaGlsZChidXR0b25EaXYpO1xuXG4gICAgdGFza0xJLmNsYXNzTGlzdC5hZGQoXCJ0b2RvXCIpO1xuXG4gICAgcHJvalVMLmFwcGVuZENoaWxkKHRhc2tMSSk7XG59IiwiaW1wb3J0IHsgZHFzIH0gZnJvbSBcIi4vbWVudUV2ZW50TGlzdGVuZXJzXCI7XG5pbXBvcnQgeyBmaW5kUHJvamVjdEluQXJyIH0gZnJvbSBcIi4vcHJvamVjdEV2ZW50TGlzdGVuZXJzXCI7XG5pbXBvcnQgeyBkaXNwbGF5TmVlZFRpdGxlIH0gZnJvbSBcIi4vcHJvamVjdEZvcm1cIjtcbi8vaW1wb3J0IHsgX3Rlc3RlcmluZyB9IGZyb20gXCIuL3Byb2plY3RFdmVudExpc3RlbmVyc1wiO1xuLy9pbXBvcnQgeyBUYXNrIH0gZnJvbSBcIi4vdGFza0NsYXNzXCI7XG5pbXBvcnQgeyBkaXNwbGF5VGFza0luTWFpbiB9IGZyb20gXCIuL3Rhc2tET01cIjtcblxuZXhwb3J0IGNvbnN0IHRhc2tPdmVybGF5ID0gZHFzKFwiLm5ld1Rhc2tPdmVybGF5XCIpO1xuLy9jb25zdCBjdXJyUHJvaiA9IHt9Oy8vTUlHSFQgQkUgT0sgVE8gUExBQ0UgV0lUSElOIGV4dHJhY3REYXRhRm9yVGFzayBmdW5jXG5jb25zdCB0YXNrQ2xvc2UgPSBkcXMoXCIudGFza0Nsb3NlQnV0dG9uXCIpO1xuY29uc3QgdGFza1N1Ym1pdCA9IGRxcyhcIi50YXNrU3VibWl0QnV0dG9uXCIpO1xuXG5leHBvcnQgZnVuY3Rpb24gdGFza092ZXJsYXlMaXN0ZW5lcnMoKXtcbiAgICAvLyBjb25zdCB0YXNrQ2xvc2UgPSBkcXMoXCIudGFza0Nsb3NlQnV0dG9uXCIpO1xuICAgIC8vIGNvbnN0IHRhc2tTdWJtaXQgPSBkcXMoXCIudGFza1N1Ym1pdEJ1dHRvblwiKTtcblxuICAgIHRhc2tDbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHRhc2tGb3JtQ2xlYXIoKTtcbiAgICAgICAgdGFza092ZXJsYXkuc3R5bGUuYW5pbWF0aW9uID0gXCJwcm9qZWN0U2xpZGVVcCAxLjVzIGZvcndhcmRzXCJcbiAgICB9KTtcbiAgICB0YXNrU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3Rhc2tTdWJtaXQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX3Rhc2tTdWJtaXQoKXtcbiAgICB0YXNrT3ZlcmxheS5zdHlsZS5hbmltYXRpb24gPSBcInByb2plY3RTbGlkZVVwIDEuNXMgZm9yd2FyZHNcIlxuICAgIGNvbnN0IG1hZGVUYXNrID0gZXh0cmFjdERhdGFGb3JUYXNrKCk7XG4gICAgaWYobWFkZVRhc2spe1xuICAgICAgICBkaXNwbGF5VGFza0luTWFpbihtYWRlVGFzayk7Ly9jdXJyZW50IHByb2plY3QgaXMgYWxyZWFkeSBkZXRlY3RlZCBpbiBleHRyYWN0RGF0YUZvclRhc2sgZnVuYy4ubWF5IG5vdCBuZWVkIHByb2ogYW5kIHVsIGFzIHBhcmFtc1xuICAgICAgICAvLyBmb3IobGV0IGEgPSAwOyBhIDwgY3VyclByb2oudG9Eb0xpc3QubGVuZ3RoOyBhKyspeyAgIFRSWSBUTyBESVNQTEFZIEFMTCBUQVNLU1xuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coKGErMSkrIFwiIFwiKyBjdXJyUHJvai50b0RvTGlzdFthXS50aXRsZSk7XG4gICAgICAgIC8vIH1cbiAgICB9XG4gICAgdGFza0Zvcm1DbGVhcigpO1xuICAgIGNsZWFyRXZMaXMoKTtcbiAgICBcbiAgICAvL1BMQUNFIFRISVMgSU5TSURFIEEgU0VQRVJBVEUgRlVOQ1RJT04gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiBpbnNpZGUgZXZlbnRMaXN0ZW5lciBmb3Igc3VibWl0IHRhc2sgZm9ybSkmJSYlJiUmJSYlJiVcbn1cblxuZnVuY3Rpb24gY2xlYXJFdkxpcygpe1xuICAgIHRhc2tTdWJtaXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGFza1N1Ym1pdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0RGF0YUZvclRhc2socHJvail7XG4gICAgY29uc3QgdGFza1RpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0VGl0bGVcIikudmFsdWU7XG4gICAgY29uc3QgdGFza0Rlc2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInREZXNjcmlwdGlvblwiKS52YWx1ZTtcbiAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidER1ZURhdGVcIikudmFsdWU7XG4gICAgY29uc3QgdGFza1ByaW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRUYXNrUHJpb1wiKS52YWx1ZTtcbiAgICBcbiAgICBjb25zdCB0ZW1wID0gZHFzKFwiLnByb2plY3ROYW1lTWFpblwiKTsvL1NIT1VMRCBOT1QgQkUgTkVFREVEIEdJVkVOIFBBUkFNXG4gICAgY29uc3QgdGFza1Byb2ogPSB0ZW1wLnRleHRDb250ZW50O1xuICAgIFxuICAgIGNvbnNvbGUubG9nKHRhc2tQcm9qKTtcblxuICAgIGNvbnN0IGZuZFByb2ogPSBmaW5kUHJvamVjdEluQXJyKHRhc2tQcm9qKTtcblxuXG4gICAgaWYodGFza1RpdGxlICYmIHRhc2tEdWVEYXRlKXtcbiAgICAgICAgY29uc29sZS5sb2coZm5kUHJvai50aXRsZSk7XG4gICAgICAgIGNvbnN0IHRhc2tNYWRlID0gZm5kUHJvai5uZXdUYXNrKHRhc2tUaXRsZSwgdGFza0Rlc2MsIHRhc2tEdWVEYXRlLCB0YXNrUHJpbywgZm5kUHJvai50aXRsZSk7XG4gICAgICAgIC8vY29uc3QgdGFza01hZGUgPSBuZXcgVGFzayh0YXNrVGl0bGUsIHRhc2tEZXNjLCB0YXNrRHVlRGF0ZSwgdGFza1ByaW8sIHByb2oudGl0bGUpOy8vdGFza1Byb2ogYXMgbGFzdCBwYXJhbVxuICAgICAgICAvL2NvbnN0IGN1cnJQcm9qID0gZmluZFByb2plY3RJbkFycih0YXNrUHJvaik7XG4gICAgICAgIC8vcHJvamVjdC50b0RvTGlzdC5wdXNoKHRhc2tNYWRlKTsvL2N1cnJQcm9qLnRvRG9MaXN0LnB1c2godGFza01hZGUpOyBFUlJPUiBJUyBIQVBQRU5JTkcgSEVSRSBORUVEIFRPIEZJTkQgQSBXQVkgVE8gQUNDRVMgVEhFIEFSUkFZIEFORCBQVVNIIElOVE8gSVRcbiAgICAgICAgdGFza0Zvcm1DbGVhcigpO1xuICAgICAgICByZXR1cm4gdGFza01hZGU7XG4gICAgfWVsc2V7XG4gICAgICAgIGRpc3BsYXlOZWVkVGl0bGUoKTtcbiAgICAgICAgdGFza0Zvcm1DbGVhcigpO1xuICAgICAgICB0YXNrT3ZlcmxheS5zdHlsZS5hbmltYXRpb24gPSBcInByb2plY3RTbGlkZURvd24gMS41cyBmb3J3YXJkc1wiO1xuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdGFza0Zvcm1DbGVhcigpe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidFRpdGxlXCIpLnZhbHVlID0gXCJcIjtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInREZXNjcmlwdGlvblwiKS52YWx1ZSA9IFwiXCI7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0RHVlRGF0ZVwiKS52YWx1ZSA9IFwiXCI7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0VGFza1ByaW9cIikudmFsdWUgPSBcIlNlbGVjdCBPbmVcIjtcbn0iLCJpbXBvcnQgeyBkcXMgfSBmcm9tIFwiLi9tZW51RXZlbnRMaXN0ZW5lcnNcIjtcbmltcG9ydCB7IHByb2pBcnIgfSBmcm9tIFwiLi9tZW51RXZlbnRMaXN0ZW5lcnNcIjtcbmltcG9ydCB7IGNsZWFyTWFpbiB9IGZyb20gXCIuL3Byb2plY3RET01cIjtcbmltcG9ydCB7IHRhc2tPdmVybGF5LCB0YXNrT3ZlcmxheUxpc3RlbmVycyB9IGZyb20gXCIuL3Rhc2tGb3JtXCI7XG5pbXBvcnQgeyByZW1vdmVQcm9qZWN0RnJvbVNpZGViYXIgfSBmcm9tIFwiLi9wcm9qZWN0RE9NXCI7XG4vL2ltcG9ydCB7IHByb2plY3RPdmVybGF5U3R1ZmYgfSBmcm9tIFwiLi9wcm9qZWN0Rm9ybVwiO1xuLy9pbXBvcnQgeyBwcm9qT3ZlcmxheSB9IGZyb20gXCIuL21lbnVFdmVudExpc3RlbmVyc1wiO1xuXG4vL2NvbnN0IHByb2pUYXNrQWRkID0gZHFzKFwiLnByb2pBZGRcIik7XG4vL2NvbnN0IHByb2pSZW1CdXR0b24gPSBkcXMoXCIucHJvalJlbW92ZVwiKTtcbmNvbnN0IHByb2pPdmVybGF5MSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3UHJvamVjdE92ZXJsYXlcIik7XG5leHBvcnQgbGV0IGVkaXRCdXR0b25DbGlja2VkID0gZmFsc2U7XG5leHBvcnQgbGV0IGN1cnJUaXRsZTIgPSBudWxsOy8vPSBkcXMoXCIucHJvamVjdE5hbWVNYWluXCIpO1xuXG5leHBvcnQgZnVuY3Rpb24gcHJvamVjdEVMaXN0ZW5lcnMoKXtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF90ZXN0ZXJpbmcpXG59O1xuXG5leHBvcnQgdmFyIF90ZXN0ZXJpbmcgPSBmdW5jdGlvbihlKXtcbiAgICAvL2dvIHRocm91aGcgYXJyYXkgY29tcGFyaW5nIHRpdGxlXG4gICAgICAgIC8vd2hlbiBmb3VuZCBmaWxsIHByb2plY3RGb3JtIGFuZCBkcm9wIGZvcm0gZG93biBmb3IgdXNlclxuICAgICAgICAvL2lmIHN1Ym1pdCB0aGVuIHJlcGxhY2UgaW5mbyB3aXRoIG5ldyBpbmZvXG4gICAgICAgIC8vZWxzZSBpZiBjYW5jZWwgdGhlbiBsZWF2ZSBwcm9qZWN0IGFzIGl0IHdhc1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiaW4gcHJvakVkaXRCdXR0b24gZXZlbnRMaXN0ZW5lclwiKTtcbiAgICAgICAgY29uc3QgZWRpdEJ1dHRvbiA9IGUudGFyZ2V0Lm1hdGNoZXMoXCIucHJvakVkaXRcIik7XG4gICAgICAgIGNvbnN0IHJlbW92ZUJ1dHRvbiA9IGUudGFyZ2V0Lm1hdGNoZXMoXCIucHJvalJlbW92ZVwiKTtcbiAgICAgICAgY29uc3QgYWRkVGFza0J1dHRvbiA9IGUudGFyZ2V0Lm1hdGNoZXMoXCIucHJvakFkZFwiKTtcbiAgICAgICAgY29uc3QgY3VyclRpdGxlID0gZHFzKFwiLnByb2plY3ROYW1lTWFpblwiKTtcbiAgICAgICAgY3VyclRpdGxlMiA9IGN1cnJUaXRsZTtcbiAgICAgICAgaWYoZWRpdEJ1dHRvbil7Ly90aGlzIHdpbGwgYmUgZG9uZSBvbmNlICdyZW1vdmUnIGlzIGNvbXBsZXRlZFxuICAgICAgICAgICAgLy9jb25zdCBvZ1NpemVBcnIgPSBwcm9qQXJyLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZWRpdEJ1dHRvbiBjbGlja2VkXCIpO1xuICAgICAgICAgICAgZWRpdEZvcm0oY3VyclRpdGxlLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgIC8vY29uc3QgZm91bmRQcm9qID0gZmluZFByb2plY3RJbkFycihjdXJyVGl0bGUpOy8vdGhpcyB3aWxsIGJlIGxlZnQgdGlsbCB0aGUgZW5kXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGZvcihsZXQgYSA9IDA7IGEgPCBwcm9qQXJyLmxlbmd0aDsgYSsrKXtcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygoYSsxKSsgXCIgXCIrIHByb2pBcnJbYV0udGl0bGUpXG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGVkaXRCdXR0b25DbGlja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vcHJvamVjdE92ZXJsYXlTdHVmZigpO1xuICAgICAgICAgICAgLy8gaWYocHJvakFyci5sZW5ndGggPiBvZ1NpemVBcnIpe1xuICAgICAgICAgICAgLy8gICAgIGVkaXRQcm9qZWN0SW5BcnIocHJvakFyclstMV0pO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICB9ZWxzZSBpZihyZW1vdmVCdXR0b24pe1xuICAgICAgICAgICAgLy9jb25zdCBjdXJyVGl0bGUgPSBkcXMoXCIucHJvamVjdE5hbWVNYWluXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZW1vdmVCdXR0b24gY2xpY2tlZFwiKTtcbiAgICAgICAgICAgIHJlbW92ZVByb2plY3RGcm9tU2lkZWJhcihjdXJyVGl0bGUudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgcmVtb3ZlUHJvakFycihjdXJyVGl0bGUudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgY2xlYXJNYWluKCk7XG4gICAgICAgICAgICAvL2NvbnN0IHNpZGVCYXIgPSBkcXMoXCIuc2lkZWJhci1tZW51XCIpO1xuICAgICAgICAgICAgLy9zaWRlQmFyLnN0eWxlLmFuaW1hdGlvbiA9ICdtZW51U2xpZGVPbiAxLjVzIGZvcndhcmRzJztcbiAgICAgICAgICAgIGZvcihsZXQgYSA9IDA7IGEgPCBwcm9qQXJyLmxlbmd0aDsgYSsrKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygoYSsxKSsgXCIgXCIrIHByb2pBcnJbYV0udGl0bGUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZihhZGRUYXNrQnV0dG9uKXtcbiAgICAgICAgICAgIHRhc2tPdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9IFwicHJvamVjdFNsaWRlRG93biAxLjVzIGZvcndhcmRzXCI7XG4gICAgICAgICAgICAvL2NvbnN0IGZvdW5kUHJvaiA9IGZpbmRQcm9qZWN0SW5BcnIoY3VyclRpdGxlLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJmb3VuZFByb2plY3RJbkFycjogXCIgKyBmb3VuZFByb2oudGl0bGUpO1xuICAgICAgICAgICAgdGFza092ZXJsYXlMaXN0ZW5lcnMoKTsvL2FkZCBwcm9qIGFzIHBhcmFtIGhlcmUhISEgZmluZCBwcm9qIG9uIGxpbmUgYmVmb3JlIHRoaXNcbiAgICAgICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUHJvakFycihwcm9qTmFtZSl7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHByb2pBcnIubGVuZ3RoOyBpKyspe1xuICAgICAgICBpZihwcm9qQXJyW2ldLnRpdGxlID09IHByb2pOYW1lKXtcbiAgICAgICAgICAgIHByb2pBcnIuc3BsaWNlKGksIDEpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBlZGl0Rm9ybShwcm9qZWN0VGl0bGUpey8vcGFyYW0gaXMgY3VycmVudCB0aXRsZSBpdCB3aWxsIGZpbGwgdGhlIGlucHV0IHRpdGxlIGJveFxuICAgIHByb2pPdmVybGF5MS5zdHlsZS5hbmltYXRpb24gPSAncHJvamVjdFNsaWRlRG93biAxLjVzIGZvcndhcmRzJztcbiAgICBjb25zdCB0aXRsZUluID0gZHFzKFwiI3RpdGxlXCIpO1xuICAgIHRpdGxlSW4udmFsdWUgPSBwcm9qZWN0VGl0bGU7XG5cbiAgICAvL3RoZSBwcm9qZWN0IGZvcm0gd2lsbCBwdXNoIGluIGEgbmV3IHByb2plY3Qgd2l0aCBhIG5ldyB0aXRsZSBhbmQgZGVzY1xuICAgIC8vR3JhYiB0aGUgdGl0bGUgYW5kIGRlc2Mgb2YgdGhpcyBcIm5ld1wiIHByb2ogYW5kIHJlcGxhY2UgZm9yIGluZm8gb24gY3VyclByb2pcbiAgICAvL2FmdGVyd2FyZHMgcmVtb3ZlIGxhc3QgZW50cnkgb24gcHJvakFyclxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFByb2plY3RJbkFycih0aXRsZSl7Ly9NSUdIVCBOT1QgTkVFRCBUSElTIE1JR0hUIE5PVCBORUVEIFRISVMgTUlHSFQgTk9UIE5FRUQgVEhJU1xuICAgIC8vY29uc29sZS5sb2coXCJsb29raW5nIGZvciBwcm9qZWN0IGluIGFyclwiKVxuICAgIGxldCBpbmRleCA9IDA7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHByb2pBcnIubGVuZ3RoOyBpKyspe1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgIGlmKHByb2pBcnJbaV0udGl0bGUgPT0gdGl0bGUpe1xuICAgICAgICAgICAgcmV0dXJuIHByb2pBcnJbaV07XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IFJlbW92ZSBmcm9tICcuLi9zcmMvaW1ncy9jbG9zZS5wbmcnO1xuaW1wb3J0IENyZWF0ZSBmcm9tICcuLi9zcmMvaW1ncy9hZGQucG5nJztcbmltcG9ydCBFZGl0IGZyb20gJy4uL3NyYy9pbWdzL2VkaXQucG5nJztcbmltcG9ydCB7IGRxcywgcHJvakFyciB9IGZyb20gJy4vbWVudUV2ZW50TGlzdGVuZXJzJztcbmltcG9ydCB7IHByb2plY3RFTGlzdGVuZXJzIH0gZnJvbSAnLi9wcm9qZWN0RXZlbnRMaXN0ZW5lcnMnO1xuaW1wb3J0IHsgX3Rlc3RlcmluZyB9IGZyb20gJy4vcHJvamVjdEV2ZW50TGlzdGVuZXJzJztcbmltcG9ydCB7IGRpc3BsYXlUYXNrSW5NYWluIH0gZnJvbSAnLi90YXNrRE9NJztcblxuY29uc3QgbWFpblNlYyA9IGRxcyhcIi5wcm9qZWN0U2VjdGlvblwiKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFByb2plY3RUb1NpZGViYXIocHJvamVjdFRpdGxlKXtcbiAgICBjb25zdCBwcm9qU2lkZSA9IGRxcyhcIi5zaWRlYmFyUHJvamVjdFwiKTtcbiAgICBsZXQgcHJvalRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHByb2pUaXRsZS50ZXh0Q29udGVudCA9IHByb2plY3RUaXRsZTtcbiAgICBwcm9qVGl0bGUuY2xhc3NMaXN0LmFkZCgncHJvamVjdE5hbWVTaWRlYmFyJyk7XG4gICAgcHJvalNpZGUuYXBwZW5kQ2hpbGQocHJvalRpdGxlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVQcm9qZWN0RnJvbVNpZGViYXIocHJvamVjdFRpdGxlKXtcbiAgICBjb25zdCBzaWRlYmFyUHJvaiA9IGRxcyhcIi5zaWRlYmFyUHJvamVjdFwiKTtcbiAgICBjb25zdCBzaWRlYmFyUHJvakNoaWxkcmVuID0gc2lkZWJhclByb2ouY2hpbGRyZW47XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHNpZGViYXJQcm9qQ2hpbGRyZW4ubGVuZ3RoOyBpKyspe1xuICAgICAgICBpZihzaWRlYmFyUHJvakNoaWxkcmVuW2ldLnRleHRDb250ZW50ID09IHByb2plY3RUaXRsZSl7XG4gICAgICAgICAgICBzaWRlYmFyUHJvai5yZW1vdmVDaGlsZChzaWRlYmFyUHJvakNoaWxkcmVuW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBlZGl0UHJvamVjdEluU2lkZWJhcihwcm9qZWN0VGl0bGUpe1xuICAgIGNvbnN0IHNpZGViYXJQcm9qID0gZHFzKFwiLnNpZGViYXJQcm9qZWN0XCIpO1xuICAgIGNvbnN0IHNpZGViYXJQcm9qQ2hpbGRyZW4gPSBzaWRlYmFyUHJvai5jaGlsZHJlbjtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2lkZWJhclByb2pDaGlsZHJlbi5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGlmKHNpZGViYXJQcm9qQ2hpbGRyZW5baV0udGV4dENvbnRlbnQgPT0gcHJvamVjdFRpdGxlKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZm91bmQgc2lkZWJhciBwcm9qZWN0IG5hbWVkIFwiICsgc2lkZWJhclByb2pDaGlsZHJlbltpXS50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICBzaWRlYmFyUHJvakNoaWxkcmVuW2ldLnRleHRDb250ZW50ID0gcHJvakFycltzaWRlYmFyUHJvakNoaWxkcmVuLmxlbmd0aC0xXS50aXRsZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVkaXRQcm9qZWN0TmFtZU1haW4oKXtcbiAgICBjb25zdCBPR1Byb2pOYW1lID0gZHFzKFwiLnByb2plY3ROYW1lTWFpblwiKTtcbiAgICBPR1Byb2pOYW1lLnRleHRDb250ZW50ID0gcHJvakFycltwcm9qQXJyLmxlbmd0aC0xXS50aXRsZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0SW5NYWluKHByb2plY3Qpe1xuICAgIGNsZWFyTWFpbigpO1xuICAgIGNvbnN0IHByb2pEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIGNvbnN0IHRhc2tTZWNVTCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgdGFza1NlY1VMLmNsYXNzTGlzdC5hZGQoXCJ0b2RvVUxcIilcbiAgICBcbiAgICBjb25zdCBwcm9qQ2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIHByb2pDaGVja2JveC50eXBlID0gXCJjaGVja2JveFwiO1xuICAgIHByb2pDaGVja2JveC5jbGFzc0xpc3QuYWRkKFwicHJvamVjdENoZWNrYm94XCIpO1xuXG4gICAgXG4gICAgY29uc3QgcHJvak5hbWVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGlmKHByb2plY3QudGl0bGUubGVuZ3RoID4gMzApe1xuICAgICAgICBsZXQgbWFpbk1vZFByb2pUaXRsZSA9IHByb2plY3QudGl0bGUuc2xpY2UoMCwzMSk7XG4gICAgICAgIHByb2pOYW1lU3Bhbi50ZXh0Q29udGVudCA9IG1haW5Nb2RQcm9qVGl0bGUgKyBcIi4uLlwiO1xuICAgIH1lbHNle1xuICAgICAgICBwcm9qTmFtZVNwYW4udGV4dENvbnRlbnQgPSBwcm9qZWN0LnRpdGxlO1xuICAgIH1cbiAgICBwcm9qTmFtZVNwYW4uY2xhc3NMaXN0LmFkZChcInByb2plY3ROYW1lTWFpblwiKTtcblxuICAgIFxuICAgIGNvbnN0IGJ1dHRvbkNvbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBcbiAgICBjb25zdCBhZGREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBlZGl0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgcmVtb3ZlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBjb25zdCBhZGRJY29uID0gbmV3IEltYWdlKCk7XG4gICAgYWRkSWNvbi5zcmMgPSBDcmVhdGU7XG4gICAgYWRkSWNvbi5jbGFzc0xpc3QuYWRkKCdwcm9qQWRkJyk7XG5cbiAgICBjb25zdCBlZGl0SWNvbiA9IG5ldyBJbWFnZSgpO1xuICAgIGVkaXRJY29uLnNyYyA9IEVkaXQ7XG4gICAgZWRpdEljb24uY2xhc3NMaXN0LmFkZCgncHJvakVkaXQnKTtcblxuICAgIGNvbnN0IHJlbUljb24gPSBuZXcgSW1hZ2UoKTtcbiAgICByZW1JY29uLnNyYyA9IFJlbW92ZTtcbiAgICByZW1JY29uLmNsYXNzTGlzdC5hZGQoJ3Byb2pSZW1vdmUnKTtcblxuICAgIGFkZERpdi5hcHBlbmRDaGlsZChhZGRJY29uKTtcbiAgICBlZGl0RGl2LmFwcGVuZENoaWxkKGVkaXRJY29uKTtcbiAgICByZW1vdmVEaXYuYXBwZW5kQ2hpbGQocmVtSWNvbik7XG4gICAgXG4gICAgYnV0dG9uQ29udC5hcHBlbmRDaGlsZChhZGREaXYpO1xuICAgIGJ1dHRvbkNvbnQuYXBwZW5kQ2hpbGQoZWRpdERpdik7XG4gICAgYnV0dG9uQ29udC5hcHBlbmRDaGlsZChyZW1vdmVEaXYpO1xuICAgIGJ1dHRvbkNvbnQuY2xhc3NMaXN0LmFkZChcInByb2plY3RPcHRpb25zXCIpO1xuXG4gICAgcHJvakRpdi5hcHBlbmRDaGlsZChwcm9qQ2hlY2tib3gpO1xuICAgIHByb2pEaXYuYXBwZW5kQ2hpbGQocHJvak5hbWVTcGFuKTtcbiAgICBwcm9qRGl2LmFwcGVuZENoaWxkKGJ1dHRvbkNvbnQpO1xuICAgIHByb2pEaXYuY2xhc3NMaXN0LmFkZChcInByb2plY3RcIik7XG5cbiAgICBtYWluU2VjLmFwcGVuZENoaWxkKHByb2pEaXYpO1xuICAgIG1haW5TZWMuYXBwZW5kQ2hpbGQodGFza1NlY1VMKTtcbiAgICBcbiAgICAvL2NoZWNrIGZvciB0YXNrcyB3aXRoIGEgbG9vcCBhbmQgZGlzcGxheSBlYWNoXG4gICAgY2hlY2tGb3JUYXNrcyhwcm9qZWN0KTtcblxuICAgIC8vY2FsbCBldmVudExpc3RlbmVyIGhlcmVcbiAgICBwcm9qZWN0RUxpc3RlbmVycygpOy8vV0lMTCBIQVZFIFRPIEFERCBFVkVOVCBMSVNURU5FUlMgRk9SIFRBU0tTIEhFUkU/Pz9cbiAgICBjb25zb2xlLmxvZyhcInRoaXMgY29uc29sZSBsb2cgaXMgYWZ0ZXIgdGhlIHByb2plY3RFbGlzdGVuZXJzIGl0IGxvb2tzIGxpa2UgaXRzIHdvcmtpbmc/P1wiKTtcbn1cblxuZnVuY3Rpb24gY2hlY2tGb3JUYXNrcyhwcm9qKXtcbiAgICAvL2dpdmVuIHByb2ogYXMgcGFyYW0gd2Ugd2lsbCBjaGVjayBpZiBpdCBjb250YWlucyBhbnkgdGFza3MgdGhhdCBuZWVkIHRvIGJlIGNyZWF0ZWRcbiAgICBjb25zdCB0YXNrQXJyID0gcHJvai50b0RvTGlzdDtcbiAgICBpZih0YXNrQXJyKXtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRhc2tBcnIubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgZGlzcGxheVRhc2tJbk1haW4odGFza0FycltpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gY29uc3QgaSA9IDA7XG4gICAgLy8gd2hpbGUocHJvai50b0RvTGlzdCl7XG4gICAgLy8gICAgIGRpc3BsYXlUYXNrSW5NYWluKHByb2oudG9Eb0xpc3RbaV0pO1xuICAgIC8vICAgICBpKys7XG4gICAgLy8gfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJNYWluKCl7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGVzdGVyaW5nKTtcbiAgICB3aGlsZShtYWluU2VjLmZpcnN0Q2hpbGQpe1xuICAgICAgICBtYWluU2VjLnJlbW92ZUNoaWxkKG1haW5TZWMuZmlyc3RDaGlsZClcbiAgICB9XG59IiwiaW1wb3J0IE1lbnUgZnJvbSAnLi4vc3JjL2ltZ3MvbWVudS5wbmcnXG5pbXBvcnQgQnJhbmQgZnJvbSAnLi4vc3JjL2ltZ3MvV29ya2VyQW50c01vZC5wbmcnO1xuaW1wb3J0IENsb3NlIGZyb20gJy4uL3NyYy9pbWdzL2Nsb3NlLnBuZyc7XG5pbXBvcnQgQ3JlYXRlIGZyb20gJy4uL3NyYy9pbWdzL2FkZC5wbmcnO1xuaW1wb3J0IHsgZGlzcGxheVByb2plY3RJbk1haW4gfSBmcm9tICcuL3Byb2plY3RET00nO1xuaW1wb3J0IHsgZmluZFByb2plY3RJbkFyciB9IGZyb20gJy4vcHJvamVjdEV2ZW50TGlzdGVuZXJzJztcbi8vSSBORUVEIFRPIEFERCBBIEdMT0JBTCBWQVJJQUJMRSBBUlJBWSBUSEFUIFNUT1JFUyBBTEwgVEhFIFBST0pFQ1RTIEhFUkVcbmV4cG9ydCBsZXQgcHJvakFyciA9IFtdO1xuXG5leHBvcnQgZnVuY3Rpb24gZHFzKGMpe1xuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWVudUV2ZW50TGlzdGVuKCl7XG4gICAgY29uc3QgbWVudUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudUNvbnRhaW5lclwiKTtcbiAgICBjb25zdCBtYWluTG9nb0NvbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW5Mb2dvXCIpO1xuICAgIGNvbnN0IGNsb3NlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51Q2xvc2VcIik7XG4gICAgY29uc3QgY3JlYXRlUHJvakNvbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNyZWF0ZVByb2pcIik7XG4gICAgXG4gICAgY29uc3QgbWVudUljb24gPSBuZXcgSW1hZ2UoKTtcbiAgICBtZW51SWNvbi5zcmMgPSBNZW51O1xuICAgIG1lbnVJY29uLmNsYXNzTGlzdC5hZGQoJ21haW4tbWVudS1sb2dvJyk7XG5cbiAgICBjb25zdCBtYWluTG9nb0ltZyA9IG5ldyBJbWFnZSgpO1xuICAgIG1haW5Mb2dvSW1nLnNyYyA9IEJyYW5kO1xuICAgIG1haW5Mb2dvSW1nLmNsYXNzTGlzdC5hZGQoJ21haW4tbG9nbycpO1xuXG4gICAgY29uc3QgY2xvc2VJY29uID0gbmV3IEltYWdlKCk7XG4gICAgY2xvc2VJY29uLnNyYyA9IENsb3NlO1xuICAgIGNsb3NlSWNvbi5jbGFzc0xpc3QuYWRkKCdtZW51Q2xvc2UnKTtcblxuICAgIGNvbnN0IGNyZWF0ZVByb2pJY29uID0gbmV3IEltYWdlKCk7XG4gICAgY3JlYXRlUHJvakljb24uc3JjID0gQ3JlYXRlO1xuICAgIGNyZWF0ZVByb2pJY29uLmNsYXNzTGlzdC5hZGQoJ2FkZFByb2pCdXR0b24nKTtcblxuICAgIG1lbnVDb250YWluZXIuYXBwZW5kQ2hpbGQobWVudUljb24pO1xuICAgIG1haW5Mb2dvQ29udC5hcHBlbmRDaGlsZChtYWluTG9nb0ltZyk7XG4gICAgY2xvc2VDb250YWluZXIuYXBwZW5kQ2hpbGQoY2xvc2VJY29uKTtcbiAgICBjcmVhdGVQcm9qQ29udC5hcHBlbmRDaGlsZChjcmVhdGVQcm9qSWNvbik7XG5cbiAgICBjb25zdCBzaWRlQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaWRlYmFyLW1lbnVcIik7XG4gICAgY29uc3QgcHJvak92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ld1Byb2plY3RPdmVybGF5XCIpO1xuXG4gICAgbWVudUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHNpZGVCYXIuc3R5bGUuYW5pbWF0aW9uID0gJ21lbnVTbGlkZU9uIDEuNXMgZm9yd2FyZHMnO1xuICAgIH0pO1xuICAgIGNsb3NlQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgc2lkZUJhci5zdHlsZS5hbmltYXRpb24gPSAnbWVudVNsaWRlQ2xvc2UgMS41cyBmb3J3YXJkcyc7XG4gICAgfSk7XG4gICAgY3JlYXRlUHJvakNvbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiY3JlYXRlIHByb2plY3QgYnV0dG9uIGNsaWNrZWQhIVwiKTtcbiAgICAgICAgc2lkZUJhci5zdHlsZS5hbmltYXRpb24gPSAnbWVudVNsaWRlQ2xvc2UgMS41cyBmb3J3YXJkcyc7XG4gICAgICAgIHByb2pPdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9ICdwcm9qZWN0U2xpZGVEb3duIDEuNXMgZm9yd2FyZHMnO1xuICAgIH0pO1xuICAgIHNpZGVCYXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBpZihlLnRhcmdldC50YWdOYW1lID09PSAnU1BBTicpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aGUgZm9sbG93aW5nIGlzIGUudGFyZ2V0LnZhbHVlXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgY29uc3QgZGlzcFByb2ogPSBmaW5kUHJvamVjdEluQXJyKGUudGFyZ2V0LnRleHRDb250ZW50KVxuICAgICAgICAgICAgZGlzcGxheVByb2plY3RJbk1haW4oZGlzcFByb2opO1xuICAgICAgICAgICAgLy9kaXNwbGF5VGFza0luTWFpbihkaXNwUHJvaik7Ly9USElTIE1JR0hUIEhBVkUgVE8gQkUgQ0FMTEVEIFdJVEhJTiBESVNQTEFZUFJPSkVDVElOTUFJTiBXSVRIIFRIRSBQUk9KRUNUIEFORCBVTCBQQVJBTUVURVJTXG4gICAgICAgIH1cbiAgICB9KTtcbn0iLCJpbXBvcnQgeyBtZW51RXZlbnRMaXN0ZW4sIHByb2pBcnIgfSBmcm9tIFwiLi9tZW51RXZlbnRMaXN0ZW5lcnNcIjtcbmltcG9ydCB7IGFkZFByb2plY3RUb1NpZGViYXIsIGRpc3BsYXlQcm9qZWN0SW5NYWluIH0gZnJvbSBcIi4vcHJvamVjdERPTVwiO1xuaW1wb3J0IHsgcHJvamVjdE92ZXJsYXlTdHVmZiB9IGZyb20gXCIuL3Byb2plY3RGb3JtXCI7XG5pbXBvcnQgeyB0YXNrT3ZlcmxheUxpc3RlbmVycywgX3Rhc2tTdWJtaXQgfSBmcm9tIFwiLi90YXNrRm9ybVwiO1xuaW1wb3J0IHsgcHJvamVjdEVMaXN0ZW5lcnMgfSBmcm9tIFwiLi9wcm9qZWN0RXZlbnRMaXN0ZW5lcnNcIjtcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0Q2xhc3NcIjtcbi8vIGltcG9ydCB7IGNyZWF0ZVByb2plY3RGcm9tRGF0YSB9IGZyb20gXCIuL3Byb2plY3RGb3JtXCI7XG5tZW51RXZlbnRMaXN0ZW4oKTtcbnByb2plY3RPdmVybGF5U3R1ZmYoKTtcbmNvbnN0IGRlZlByb2ogPSBuZXcgUHJvamVjdChcImRlZmF1bHRQcm9qZWN0XCIsIFwiVGhpcyBpcyBhIGRlZmF1bHQgcHJvamVjdC4gWW91IGNhbiBhbHNvIGNyZWF0ZSB5b3VyIG93biA6KVwiKTtcbnByb2pBcnJbMF0gPSBkZWZQcm9qO1xuZGlzcGxheVByb2plY3RJbk1haW4oZGVmUHJvaik7XG5hZGRQcm9qZWN0VG9TaWRlYmFyKFwiZGVmYXVsdFByb2plY3RcIik7XG5wcm9qZWN0RUxpc3RlbmVycygpOy8vVEhJUyBXQVMgQ09NTUVOVEVEIE9VVFxudGFza092ZXJsYXlMaXN0ZW5lcnMoKTsvL1RISVMgV0FTIENPTU1FTlRFRCBPVVRcbi8vIGxldCBwcm9qMSA9IG5ldyBQcm9qZWN0KFwiY2FybG9zQnJ1aFwiLCBcImFwaXVmXCIpO1xuLy8gY29uc29sZS5sb2cocHJvajEubmFtZSk7XG4vLyBjb25zb2xlLmxvZyhwcm9qMS5kZXNjcmlwdGlvbik7Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJkb2N1bWVudCIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsZW5ndGgiLCJpIiwiRXJyb3IiLCJyZXBsYWNlIiwicCIsIlRhc2siLCJjb25zdHJ1Y3RvciIsInRUaXRsZSIsInREZXNjIiwidER1ZSIsInRQcmlvIiwidFByb2oiLCJuZXd0VGl0bGUiLCJfdFRpdGxlIiwibmV3dERlc2MiLCJfdERlc2MiLCJuZXd0RHVlIiwiX3REdWUiLCJuZXd0UHJpbyIsIl90UHJpbyIsIm5ld3RQcm9qIiwiX3RQcm9qIiwiUHJvamVjdCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJ0b0RvcyIsIm5ld1Rhc2siLCJUdGl0bGUiLCJUZGVzYyIsIlRkdWUiLCJUcHJpbyIsIlRwcm9qIiwidCIsInB1c2giLCJwcmludFRhc2tzIiwiY29uc29sZSIsImxvZyIsIm51bU9mVGFza3MiLCJfdGl0bGUiLCJfZGVzY3JpcHRpb24iLCJ0b0RvTGlzdCIsIm5ld1RpdGxlIiwibmV3RGVzYyIsInByb2pPdmVybGF5IiwicXVlcnlTZWxlY3RvciIsImRpc3BsYXlOZWVkVGl0bGUiLCJlcnJvck92ZXJsYXkiLCJzdHlsZSIsImFuaW1hdGlvbiIsInNldFRpbWVvdXQiLCJwcm9qZWN0Rm9ybUNsZWFyIiwiZ2V0RWxlbWVudEJ5SWQiLCJ2YWx1ZSIsImRpc3BsYXlUYXNrSW5NYWluIiwidGFzayIsInByb2pVTCIsInRhc2tMSSIsImNyZWF0ZUVsZW1lbnQiLCJidXR0b25EaXYiLCJ0YXNrQ2hlY2tib3giLCJ0eXBlIiwidGFza0RhdGVJbnB1dCIsInRhc2tFZGl0RGl2IiwidGFza1JlbW92ZURpdiIsInRhc2tFZGl0SWNvbiIsIkltYWdlIiwiY2xhc3NMaXN0IiwiYWRkIiwidGFza1JlbW92ZUljb24iLCJhcHBlbmRDaGlsZCIsInRleHRDb250ZW50IiwidGFza092ZXJsYXkiLCJkcXMiLCJ0YXNrQ2xvc2UiLCJ0YXNrU3VibWl0IiwidGFza092ZXJsYXlMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwidGFza0Zvcm1DbGVhciIsIl90YXNrU3VibWl0IiwibWFkZVRhc2siLCJwcm9qIiwidGFza1RpdGxlIiwidGFza0Rlc2MiLCJ0YXNrRHVlRGF0ZSIsInRhc2tQcmlvIiwidGFza1Byb2oiLCJmbmRQcm9qIiwiZmluZFByb2plY3RJbkFyciIsInRhc2tNYWRlIiwiZXh0cmFjdERhdGFGb3JUYXNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInByb2pPdmVybGF5MSIsImVkaXRCdXR0b25DbGlja2VkIiwiY3VyclRpdGxlMiIsInByb2plY3RFTGlzdGVuZXJzIiwiX3Rlc3RlcmluZyIsImVkaXRCdXR0b24iLCJ0YXJnZXQiLCJtYXRjaGVzIiwicmVtb3ZlQnV0dG9uIiwiYWRkVGFza0J1dHRvbiIsImN1cnJUaXRsZSIsInByb2plY3RUaXRsZSIsInNpZGViYXJQcm9qIiwic2lkZWJhclByb2pDaGlsZHJlbiIsImNoaWxkcmVuIiwicmVtb3ZlQ2hpbGQiLCJyZW1vdmVQcm9qZWN0RnJvbVNpZGViYXIiLCJyZW1vdmVQcm9qQXJyIiwiY2xlYXJNYWluIiwiYSIsInByb2pBcnIiLCJwcm9qTmFtZSIsInNwbGljZSIsImluZGV4IiwibWFpblNlYyIsImFkZFByb2plY3RUb1NpZGViYXIiLCJwcm9qU2lkZSIsInByb2pUaXRsZSIsImRpc3BsYXlQcm9qZWN0SW5NYWluIiwicHJvamVjdCIsInByb2pEaXYiLCJ0YXNrU2VjVUwiLCJwcm9qQ2hlY2tib3giLCJwcm9qTmFtZVNwYW4iLCJtYWluTW9kUHJvalRpdGxlIiwic2xpY2UiLCJidXR0b25Db250IiwiYWRkRGl2IiwiZWRpdERpdiIsInJlbW92ZURpdiIsImFkZEljb24iLCJlZGl0SWNvbiIsInJlbUljb24iLCJ0YXNrQXJyIiwiY2hlY2tGb3JUYXNrcyIsImZpcnN0Q2hpbGQiLCJjIiwibWVudUNvbnRhaW5lciIsIm1haW5Mb2dvQ29udCIsImNsb3NlQ29udGFpbmVyIiwiY3JlYXRlUHJvakNvbnQiLCJtZW51SWNvbiIsIm1haW5Mb2dvSW1nIiwiY2xvc2VJY29uIiwiY3JlYXRlUHJvakljb24iLCJzaWRlQmFyIiwidGFnTmFtZSIsIm1lbnVFdmVudExpc3RlbiIsImNsb3NlQnV0dG9uIiwic3VibWl0QnV0dG9uIiwicHJvamVjdFBhcmFtIiwidGl0bGVJbnB1dCIsImRlc2NJbnB1dCIsInByb2plY3RNYWRlIiwiZXh0cmFjdERhdGFGb3JQcm9qZWN0IiwicmVwbGFjZVRpdGxlIiwiZWRpdFByb2plY3RJbkFyciIsImVkaXRQcm9qZWN0SW5TaWRlYmFyIiwicHJvamVjdE92ZXJsYXlTdHVmZiIsImRlZlByb2oiXSwic291cmNlUm9vdCI6IiJ9