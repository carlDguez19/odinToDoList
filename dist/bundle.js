(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var o=n.getElementsByTagName("script");if(o.length)for(var s=o.length-1;s>-1&&!e;)e=o[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e=t.p+"abbfad808c2786a6a2d4.png",n=t.p+"986e98635b18601755cf.png",o=t.p+"177a54134d0bd5aefd06.png",s=t.p+"edb755c23d1ebcf9c7a4.png",i=t.p+"c9c7160b568bb10d504c.png";class r{constructor(t,e,n,o,s){this.tTitle=t,this.tDesc=e,this.tDue=n,this.tPrio=o,this.tProj=s}set tTitle(t){this._tTitle=t}set tDesc(t){this._tDesc=t}set tDue(t){this._tDue=t}set tPrio(t){this._tPrio=t}set tProj(t){this._tProj=t}get tTitle(){return this._tTitle}get tDesc(){return this._tDesc}get tDue(){return this._tDue}get tPrio(){return this._tPrio}get tProj(){return this._tProj}}class c{constructor(t,e){this.title=t,this.description=e,this.toDos=[]}getLastTask(){return this.toDos[this.toDos.length-1]}removeLastTask(){this.toDos.splice(this.toDos.length-1,1)}editTask(t){for(let e=0;e<this.toDos.length;e++)this.toDos[e].tTitle==t&&(this.toDos[e].tTitle=this.toDos[this.toDos.length-1].tTitle,this.toDos[e].tDesc=this.toDos[this.toDos.length-1].tDesc,this.toDos[e].tDue=this.toDos[this.toDos.length-1].tDue,this.toDos[e].tPrio=this.toDos[this.toDos.length-1].tPrio,this.toDos[e].tProj=this.toDos[this.toDos.length-1].tProj)}newTask(t,e,n,o,s){let i=new r(t,e,n,o,s);return this.toDos.push(i),i}findTask(t){for(var e=0;e<this.toDos.length;e++)if(this.toDos[e].tTitle==t)return this.toDos[e]}removeTaskFromArr(t){for(var e=0;e<this.toDos.length;e++)this.toDos[e].tTitle==t&&this.toDos.splice(e,1)}printTasks(){console.log("current tasks in project: ");for(var t=0;t<this.toDos.length;t++)console.log(this.toDos[t].tTitle)}get numOfTasks(){return this.toDos.length}get title(){return this._title}get description(){return this._description}get toDoList(){return this.toDos}set title(t){this._title=t}set description(t){this._description=t}}const l=document.querySelector(".newProjectOverlay");function a(){const t=document.querySelector(".errorProjectOverlay");t.style.animation="projectSlideDown 1.5s forwards",setTimeout((function(){t.style.animation="projectSlideUp 1.5s forwards"}),2500)}function d(){document.getElementById("title").value="",document.getElementById("description").value=""}function u(){A(".infoCloseButton").addEventListener("click",m)}function m(){p.style.animation="projectSlideUp 1.5s forwards",setTimeout((function(){h.textContent=""}),1500)}const p=A(".infoDescOverlay"),h=A(".infoSec");let f=!1,g=null,D=!1;function v(t){const e=t.target.parentElement.parentElement.parentElement;if(t.target.matches(".taskProjEdit")){f=!0,console.log("morePestoPlease: "+e.textContent);const t=N(A(".projectNameMain").textContent);g=t.findTask(e.textContent),function(t){y.style.animation="projectSlideDown 1.5s forwards";const e=A("#tTitle"),n=A("#tDueDate");e.value=t.tTitle,n.value=t.tDue,T()}(g)}else if(t.target.matches(".taskProjRemove")){D=!0,console.log(e.textContent);const t=N(A(".projectNameMain").textContent);t.removeTaskFromArr(e.textContent),t.printTasks(),j(e.textContent)}else if(t.target.matches(".titleTaskDisp")){const e=t.target.parentElement;n=N(A(".projectNameMain").textContent).findTask(e.textContent),p.style.animation="projectSlideDown 1.5s forwards",h.textContent+="DUE DATE: "+n.tDue+" DESCRIPTION: "+n.tDesc,u()}var n}function C(t){const e=document.querySelector(".todoUL"),n=document.createElement("li"),s=document.createElement("div");s.textContent=t.tTitle,s.classList.add("titleTaskDisp");const r=document.createElement("div"),c=document.createElement("input");c.type="checkbox";const l=document.createElement("div"),a=document.createElement("div"),d=new Image;d.src=i,d.classList.add("taskProjEdit");const u=new Image;u.src=o,u.classList.add("taskProjRemove"),l.appendChild(d),a.appendChild(u),r.appendChild(l),r.appendChild(a),r.appendChild(c),r.classList.add("taskButtons"),n.appendChild(s),n.appendChild(r),n.classList.add("todo"),e.appendChild(n),document.addEventListener("click",v)}function j(t){const e=A(".todoUL"),n=e.children;for(let o=0;o<n.length;o++)n[o].textContent==t&&e.removeChild(n[o])}const y=A(".newTaskOverlay"),E=A(".taskCloseButton"),w=A(".taskSubmitButton");function T(){E.addEventListener("click",(function(){P(),y.style.animation="projectSlideUp 1.5s forwards"})),w.addEventListener("click",k)}function k(){if(y.style.animation="projectSlideUp 1.5s forwards",console.log("taskEditButton bool value: "+f),f){const t=L(),e=N(A(".projectNameMain").textContent);j(g.tTitle),e.editTask(g.tTitle),C(t),e.removeLastTask(),e.printTasks(),f=!1,S()}else{const t=L();t&&C(t),P(),S()}}function S(){w.removeEventListener("click",k)}function L(){const t=document.getElementById("tTitle").value,e=document.getElementById("tDescription").value,n=document.getElementById("tDueDate").value,o=document.getElementById("tTaskPrio").value,s=N(A(".projectNameMain").textContent);if(t&&n){const i=s.newTask(t,e,n,o,s.title);return P(),i}return a(),P(),void(y.style.animation="projectSlideDown 1.5s forwards")}function P(){document.getElementById("tTitle").value="",document.getElementById("tDescription").value="",document.getElementById("tDueDate").value="",document.getElementById("tTaskPrio").value="Select One"}const x=document.querySelector(".newProjectOverlay");let b=!1,I=null;var B=function(t){const e=t.target.matches(".projEdit"),n=t.target.matches(".projRemove"),o=t.target.matches(".projAdd"),s=A(".projectNameMain");if(I=s,e)i=s.textContent,x.style.animation="projectSlideDown 1.5s forwards",A("#title").value=i,b=!0;else if(n){!function(t){const e=A(".sidebarProject"),n=e.children;for(let o=0;o<n.length;o++)n[o].textContent==t&&e.removeChild(n[o])}(s.textContent),function(t){for(let e=0;e<M.length;e++)M[e].title==t&&M.splice(e,1)}(s.textContent),U(),console.log("current projects in array are: ");for(let t=0;t<M.length;t++)console.log(M[t].title)}else if(o)y.style.animation="projectSlideDown 1.5s forwards",T();else if(s){r=N(s.textContent),p.style.animation="projectSlideDown 1.5s forwards",h.textContent="DESCRIPTION: "+r.description,u()}var i,r};function N(t){let e=0;for(let n=0;n<M.length;n++)if(e=n,M[n].title==t)return console.log("project found"),M[n]}const _=A(".projectSection");function q(t){const e=A(".sidebarProject");let n=document.createElement("span");n.textContent=t,n.classList.add("projectNameSidebar"),e.appendChild(n)}function O(t){U();const e=document.createElement("div"),n=document.createElement("ul");n.classList.add("todoUL");const r=document.createElement("input");r.type="checkbox",r.classList.add("projectCheckbox");const c=document.createElement("span");if(t.title.length>30){let e=t.title.slice(0,31);c.textContent=e+"..."}else c.textContent=t.title;c.classList.add("projectNameMain");const l=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div"),u=document.createElement("div"),m=new Image;m.src=s,m.classList.add("projAdd");const p=new Image;p.src=i,p.classList.add("projEdit");const h=new Image;h.src=o,h.classList.add("projRemove"),a.appendChild(m),d.appendChild(p),u.appendChild(h),l.appendChild(a),l.appendChild(d),l.appendChild(u),l.classList.add("projectOptions"),e.appendChild(r),e.appendChild(c),e.appendChild(l),e.classList.add("project"),_.appendChild(e),_.appendChild(n),function(t){const e=t.toDoList;if(e)for(var n=0;n<e.length;n++)C(e[n])}(t),document.addEventListener("click",B)}function U(){for(document.removeEventListener("click",B);_.firstChild;)_.removeChild(_.firstChild)}let M=[];function A(t){return document.querySelector(t)}!function(){const t=document.querySelector(".menuContainer"),i=document.querySelector(".mainLogo"),r=document.querySelector(".menuClose"),c=document.querySelector(".createProj"),l=new Image;l.src=e,l.classList.add("main-menu-logo");const a=new Image;a.src=n,a.classList.add("main-logo");const d=new Image;d.src=o,d.classList.add("menuClose");const u=new Image;u.src=s,u.classList.add("addProjButton"),t.appendChild(l),i.appendChild(a),r.appendChild(d),c.appendChild(u);const m=document.querySelector(".sidebar-menu"),p=document.querySelector(".newProjectOverlay");t.addEventListener("click",(function(){m.style.animation="menuSlideOn 1.5s forwards"})),r.addEventListener("click",(function(){m.style.animation="menuSlideClose 1.5s forwards"})),c.addEventListener("click",(function(){m.style.animation="menuSlideClose 1.5s forwards",p.style.animation="projectSlideDown 1.5s forwards"})),m.addEventListener("click",(t=>{"SPAN"===t.target.tagName&&O(N(t.target.textContent))}))}(),function(){const t=document.querySelector(".closeButton"),e=document.querySelector(".submitButton");t.addEventListener("click",(function(){l.style.animation="projectSlideUp 1.5s forwards",d()})),e.addEventListener("click",(function(){l.style.animation="projectSlideUp 1.5s forwards";const t=function(){const t=document.getElementById("title").value;let e=document.getElementById("description").value;if(t){const n=new c(t,e);return M.push(n),n}return a(),d(),void(l.style.animation="projectSlideDown 1.5s forwards")}();b?(function(t){for(let e=0;e<M.length;e++)M[e].title==t&&(M[e].title=M[M.length-1].title,M[e].description=M[M.length-1].description)}(I.textContent),function(t){const e=A(".sidebarProject").children;for(let n=0;n<e.length;n++)e[n].textContent==t&&(e[n].textContent=M[e.length].title)}(I.textContent),A(".projectNameMain").textContent=M[M.length-1].title,M.splice(M.length-1,1),b=!1):(t&&(q(t.title),O(t)),d())}))}();const R=new c("defaultProject","This is a default project. You can also create your own :)");M[0]=R,O(R),q("defaultProject")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFDQSxJQUFJQSxFQUFzQixDQUFDLEVDRDNCQSxFQUFvQkMsRUFBSSxXQUN2QixHQUEwQixpQkFBZkMsV0FBeUIsT0FBT0EsV0FDM0MsSUFDQyxPQUFPQyxNQUFRLElBQUlDLFNBQVMsY0FBYixFQUNoQixDQUFFLE1BQU9DLEdBQ1IsR0FBc0IsaUJBQVhDLE9BQXFCLE9BQU9BLE1BQ3hDLENBQ0EsQ0FQdUIsRyxNQ0F4QixJQUFJQyxFQUNBUCxFQUFvQkMsRUFBRU8sZ0JBQWVELEVBQVlQLEVBQW9CQyxFQUFFUSxTQUFXLElBQ3RGLElBQUlDLEVBQVdWLEVBQW9CQyxFQUFFUyxTQUNyQyxJQUFLSCxHQUFhRyxJQUNiQSxFQUFTQyxnQkFDWkosRUFBWUcsRUFBU0MsY0FBY0MsTUFDL0JMLEdBQVcsQ0FDZixJQUFJTSxFQUFVSCxFQUFTSSxxQkFBcUIsVUFDNUMsR0FBR0QsRUFBUUUsT0FFVixJQURBLElBQUlDLEVBQUlILEVBQVFFLE9BQVMsRUFDbEJDLEdBQUssSUFBTVQsR0FBV0EsRUFBWU0sRUFBUUcsS0FBS0osR0FFeEQsQ0FJRCxJQUFLTCxFQUFXLE1BQU0sSUFBSVUsTUFBTSx5REFDaENWLEVBQVlBLEVBQVVXLFFBQVEsT0FBUSxJQUFJQSxRQUFRLFFBQVMsSUFBSUEsUUFBUSxZQUFhLEtBQ3BGbEIsRUFBb0JtQixFQUFJWixDLGdMQ2xCakIsTUFBTWEsRUFDVCxXQUFBQyxDQUFZQyxFQUFRQyxFQUFPQyxFQUFNQyxFQUFPQyxHQUNwQ3ZCLEtBQUttQixPQUFTQSxFQUNkbkIsS0FBS29CLE1BQVFBLEVBQ2JwQixLQUFLcUIsS0FBT0EsRUFDWnJCLEtBQUtzQixNQUFRQSxFQUNidEIsS0FBS3VCLE1BQVFBLENBQ2pCLENBQ0EsVUFBSUosQ0FBT0ssR0FDUHhCLEtBQUt5QixRQUFVRCxDQUNuQixDQUNBLFNBQUlKLENBQU1NLEdBQ04xQixLQUFLMkIsT0FBU0QsQ0FDbEIsQ0FDQSxRQUFJTCxDQUFLTyxHQUNMNUIsS0FBSzZCLE1BQVFELENBQ2pCLENBQ0EsU0FBSU4sQ0FBTVEsR0FDTjlCLEtBQUsrQixPQUFTRCxDQUNsQixDQUNBLFNBQUlQLENBQU1TLEdBQ05oQyxLQUFLaUMsT0FBU0QsQ0FDbEIsQ0FFQSxVQUFJYixHQUNBLE9BQU9uQixLQUFLeUIsT0FDaEIsQ0FDQSxTQUFJTCxHQUNBLE9BQU9wQixLQUFLMkIsTUFDaEIsQ0FDQSxRQUFJTixHQUNBLE9BQU9yQixLQUFLNkIsS0FDaEIsQ0FDQSxTQUFJUCxHQUNBLE9BQU90QixLQUFLK0IsTUFDaEIsQ0FDQSxTQUFJUixHQUNBLE9BQU92QixLQUFLaUMsTUFDaEIsRUNwQ0csTUFBTUMsRUFDVCxXQUFBaEIsQ0FBWWlCLEVBQU9DLEdBQ2ZwQyxLQUFLbUMsTUFBUUEsRUFDYm5DLEtBQUtvQyxZQUFjQSxFQUNuQnBDLEtBQUtxQyxNQUFRLEVBQ2pCLENBRUEsV0FBQUMsR0FDSSxPQUFPdEMsS0FBS3FDLE1BQU1yQyxLQUFLcUMsTUFBTXpCLE9BQU8sRUFDeEMsQ0FFQSxjQUFBMkIsR0FDSXZDLEtBQUtxQyxNQUFNRyxPQUFPeEMsS0FBS3FDLE1BQU16QixPQUFPLEVBQUUsRUFDMUMsQ0FFQSxRQUFBNkIsQ0FBU0MsR0FDTCxJQUFJLElBQUk3QixFQUFJLEVBQUdBLEVBQUliLEtBQUtxQyxNQUFNekIsT0FBUUMsSUFDL0JiLEtBQUtxQyxNQUFNeEIsR0FBR00sUUFBVXVCLElBQ3ZCMUMsS0FBS3FDLE1BQU14QixHQUFHTSxPQUFTbkIsS0FBS3FDLE1BQU1yQyxLQUFLcUMsTUFBTXpCLE9BQU8sR0FBR08sT0FDdkRuQixLQUFLcUMsTUFBTXhCLEdBQUdPLE1BQVFwQixLQUFLcUMsTUFBTXJDLEtBQUtxQyxNQUFNekIsT0FBTyxHQUFHUSxNQUN0RHBCLEtBQUtxQyxNQUFNeEIsR0FBR1EsS0FBT3JCLEtBQUtxQyxNQUFNckMsS0FBS3FDLE1BQU16QixPQUFPLEdBQUdTLEtBQ3JEckIsS0FBS3FDLE1BQU14QixHQUFHUyxNQUFRdEIsS0FBS3FDLE1BQU1yQyxLQUFLcUMsTUFBTXpCLE9BQU8sR0FBR1UsTUFDdER0QixLQUFLcUMsTUFBTXhCLEdBQUdVLE1BQVF2QixLQUFLcUMsTUFBTXJDLEtBQUtxQyxNQUFNekIsT0FBTyxHQUFHVyxNQUdsRSxDQUVBLE9BQUFvQixDQUFRQyxFQUFRQyxFQUFPQyxFQUFNQyxFQUFPQyxHQUNoQyxJQUFJQyxFQUFJLElBQUloQyxFQUFLMkIsRUFBUUMsRUFBT0MsRUFBTUMsRUFBT0MsR0FFN0MsT0FEQWhELEtBQUtxQyxNQUFNYSxLQUFLRCxHQUNUQSxDQUNYLENBRUEsUUFBQUUsQ0FBU0MsR0FDTCxJQUFJLElBQUl2QyxFQUFJLEVBQUdBLEVBQUliLEtBQUtxQyxNQUFNekIsT0FBUUMsSUFDbEMsR0FBR2IsS0FBS3FDLE1BQU14QixHQUFHTSxRQUFVaUMsRUFDdkIsT0FBT3BELEtBQUtxQyxNQUFNeEIsRUFHOUIsQ0FFQSxpQkFBQXdDLENBQWtCRCxHQUNkLElBQUksSUFBSXZDLEVBQUksRUFBR0EsRUFBSWIsS0FBS3FDLE1BQU16QixPQUFRQyxJQUMvQmIsS0FBS3FDLE1BQU14QixHQUFHTSxRQUFVaUMsR0FDdkJwRCxLQUFLcUMsTUFBTUcsT0FBTzNCLEVBQUUsRUFHaEMsQ0FFQSxVQUFBeUMsR0FDSUMsUUFBUUMsSUFBSSw4QkFDWixJQUFJLElBQUkzQyxFQUFJLEVBQUdBLEVBQUliLEtBQUtxQyxNQUFNekIsT0FBUUMsSUFDbEMwQyxRQUFRQyxJQUFJeEQsS0FBS3FDLE1BQU14QixHQUFHTSxPQUVsQyxDQUVBLGNBQUlzQyxHQUNBLE9BQU96RCxLQUFLcUMsTUFBTXpCLE1BQ3RCLENBRUEsU0FBSXVCLEdBQ0EsT0FBT25DLEtBQUswRCxNQUNoQixDQUNBLGVBQUl0QixHQUNBLE9BQU9wQyxLQUFLMkQsWUFDaEIsQ0FDQSxZQUFJQyxHQUNBLE9BQU81RCxLQUFLcUMsS0FDaEIsQ0FFQSxTQUFJRixDQUFNMEIsR0FDTjdELEtBQUswRCxPQUFTRyxDQUNsQixDQUNBLGVBQUl6QixDQUFZMEIsR0FDWjlELEtBQUsyRCxhQUFlRyxDQUN4QixFQ3hFSixNQUFNQyxFQUFjeEQsU0FBU3lELGNBQWMsc0JBd0RwQyxTQUFTQyxJQUNaLE1BQU1DLEVBQWUzRCxTQUFTeUQsY0FBYyx3QkFDNUNFLEVBQWFDLE1BQU1DLFVBQVksaUNBQy9CQyxZQUFXLFdBQ1BILEVBQWFDLE1BQU1DLFVBQVksOEJBQ25DLEdBQUcsS0FDUCxDQUVPLFNBQVNFLElBQ1ovRCxTQUFTZ0UsZUFBZSxTQUFTQyxNQUFRLEdBQ3pDakUsU0FBU2dFLGVBQWUsZUFBZUMsTUFBUSxFQUNuRCxDQ3JFTyxTQUFTQyxJQUNNQyxFQUFJLG9CQUNaQyxpQkFBaUIsUUFBU0MsRUFDeEMsQ0FFQSxTQUFTQSxJQUNMQyxFQUFZVixNQUFNQyxVQUFZLCtCQUM5QkMsWUFBVyxXQUNQUyxFQUFZQyxZQUFjLEVBQzlCLEdBQUcsS0FDUCxDQ0FPLE1BQU1GLEVBQWNILEVBQUksb0JBQ2xCSSxFQUFjSixFQUFJLFlBQ3hCLElBQUlNLEdBQWlCLEVBQ2pCdkMsRUFBVyxLQUNsQndDLEdBQWdCLEVBUWIsU0FBU0MsRUFBZWhGLEdBTzNCLE1BQU13QyxFQUFXeEMsRUFBRWlGLE9BQU9DLGNBQWNBLGNBQWNBLGNBS3RELEdBQUdsRixFQUFFaUYsT0FBT0UsUUFBUSxpQkFBaUIsQ0FHakNMLEdBQWlCLEVBQ2pCekIsUUFBUUMsSUFBSSxvQkFBc0JkLEVBQVNxQyxhQUkzQyxNQUNNTyxFQUFTQyxFQURJYixFQUFJLG9CQUNvQkssYUFDM0N0QyxFQUFXNkMsRUFBT25DLFNBQVNULEVBQVNxQyxhQXNDckMsU0FBc0JTLEdBQ3pCQyxFQUFZdEIsTUFBTUMsVUFBWSxpQ0FFOUIsTUFBTXNCLEVBQWdCaEIsRUFBSSxXQUNwQmlCLEVBQWVqQixFQUFJLGFBQ3pCZ0IsRUFBY2xCLE1BQVFnQixFQUFLckUsT0FDM0J3RSxFQUFhbkIsTUFBUWdCLEVBQUtuRSxLQUMxQnVFLEdBQ0osQ0ExQ1FDLENBQWFwRCxFQUNqQixNQUNLLEdBQUd2QyxFQUFFaUYsT0FBT0UsUUFBUSxtQkFBbUIsQ0FDeENKLEdBQWdCLEVBQ2hCMUIsUUFBUUMsSUFBSWQsRUFBU3FDLGFBQ3JCLE1BQ01lLEVBQVVQLEVBREliLEVBQUksb0JBQ3FCSyxhQUM3Q2UsRUFBUXpDLGtCQUFrQlgsRUFBU3FDLGFBQ25DZSxFQUFReEMsYUFDUnlDLEVBQWNyRCxFQUFTcUMsWUFFM0IsTUFFSyxHQUFHN0UsRUFBRWlGLE9BQU9FLFFBQVEsa0JBQWtCLENBQ3ZDLE1BQU1XLEVBQVk5RixFQUFFaUYsT0FBT0MsY0FhTkksRUFYTkQsRUFESWIsRUFBSSxvQkFDb0JLLGFBQ25CNUIsU0FBUzZDLEVBQVVqQixhQVcvQ0YsRUFBWVYsTUFBTUMsVUFBWSxpQ0FFOUJVLEVBQVlDLGFBQWUsYUFBZVMsRUFBS25FLEtBQU8saUJBQW1CbUUsRUFBS3BFLE1BQzlFcUQsR0FaQSxDQVFKLElBQTZCZSxDQU43QixDQ2xFTyxTQUFTUyxFQUFrQlQsR0FDOUIsTUFBTVUsRUFBUzNGLFNBQVN5RCxjQUFjLFdBRWhDbUMsRUFBUzVGLFNBQVM2RixjQUFjLE1BRWhDQyxFQUFZOUYsU0FBUzZGLGNBQWMsT0FDekNDLEVBQVV0QixZQUFjUyxFQUFLckUsT0FDN0JrRixFQUFVQyxVQUFVQyxJQUFJLGlCQUV4QixNQUFNQyxFQUFZakcsU0FBUzZGLGNBQWMsT0FFbkNLLEVBQWVsRyxTQUFTNkYsY0FBYyxTQUM1Q0ssRUFBYUMsS0FBTyxXQU1wQixNQUFNQyxFQUFjcEcsU0FBUzZGLGNBQWMsT0FDckNRLEVBQWdCckcsU0FBUzZGLGNBQWMsT0FFdkNTLEVBQWUsSUFBSUMsTUFDekJELEVBQWFwRyxJQUFNLEVBQ25Cb0csRUFBYVAsVUFBVUMsSUFBSSxnQkFFM0IsTUFBTVEsRUFBaUIsSUFBSUQsTUFDM0JDLEVBQWV0RyxJQUFNLEVBQ3JCc0csRUFBZVQsVUFBVUMsSUFBSSxrQkFFN0JJLEVBQVlLLFlBQVlILEdBQ3hCRCxFQUFjSSxZQUFZRCxHQUkxQlAsRUFBVVEsWUFBWUwsR0FDdEJILEVBQVVRLFlBQVlKLEdBQ3RCSixFQUFVUSxZQUFZUCxHQUV0QkQsRUFBVUYsVUFBVUMsSUFBSSxlQUV4QkosRUFBT2EsWUFBWVgsR0FFbkJGLEVBQU9hLFlBQVlSLEdBSW5CTCxFQUFPRyxVQUFVQyxJQUFJLFFBRXJCTCxFQUFPYyxZQUFZYixHRDdDbkI1RixTQUFTb0UsaUJBQWlCLFFBQVNPLEVDZ0R2QyxDQUVPLFNBQVNhLEVBQWNQLEdBRTFCLE1BQU15QixFQUFXdkMsRUFBSSxXQUNmd0MsRUFBaUJELEVBQVNFLFNBQ2hDLElBQUksSUFBSXRHLEVBQUksRUFBR0EsRUFBSXFHLEVBQWV0RyxPQUFRQyxJQUNuQ3FHLEVBQWVyRyxHQUFHa0UsYUFBZVMsR0FDaEN5QixFQUFTRyxZQUFZRixFQUFlckcsR0FJaEQsQ0M5RE8sTUFBTTRFLEVBQWNmLEVBQUksbUJBQ3pCMkMsRUFBWTNDLEVBQUksb0JBQ2hCNEMsRUFBYTVDLEVBQUkscUJBRWhCLFNBQVNrQixJQUNaeUIsRUFBVTFDLGlCQUFpQixTQUFTLFdBQ2hDNEMsSUFDQTlCLEVBQVl0QixNQUFNQyxVQUFZLDhCQUNsQyxJQUNBa0QsRUFBVzNDLGlCQUFpQixRQUFTNkMsRUFDekMsQ0FFTyxTQUFTQSxJQUdaLEdBRkEvQixFQUFZdEIsTUFBTUMsVUFBWSwrQkFDOUJiLFFBQVFDLElBQUksOEJBQWdDd0IsR0FDekNBLEVBQWUsQ0FNZCxNQUFNeUMsRUFBYUMsSUFFYnBDLEVBQVNDLEVBREliLEVBQUksb0JBQ29CSyxhQUMzQ2dCLEVBQWN0RCxFQUFTdEIsUUFDdkJtRSxFQUFPN0MsU0FBU0EsRUFBU3RCLFFBQ3pCOEUsRUFBa0J3QixHQUNsQm5DLEVBQU8vQyxpQkFFUCtDLEVBQU9oQyxhQU9QMEIsR0FBaUIsRUFDakIyQyxHQUNKLEtBQ0ksQ0FDQSxNQUFNQyxFQUFXRixJQUNkRSxHQUNDM0IsRUFBa0IyQixHQUV0QkwsSUFDQUksR0FDSixDQUNKLENBRUEsU0FBU0EsSUFDTEwsRUFBV08sb0JBQW9CLFFBQVNMLEVBQzVDLENBRU8sU0FBU0UsSUFDWixNQUFNSSxFQUFZdkgsU0FBU2dFLGVBQWUsVUFBVUMsTUFDOUN1RCxFQUFXeEgsU0FBU2dFLGVBQWUsZ0JBQWdCQyxNQUNuRHdELEVBQWN6SCxTQUFTZ0UsZUFBZSxZQUFZQyxNQUNsRHlELEVBQVcxSCxTQUFTZ0UsZUFBZSxhQUFhQyxNQUtoRDBELEVBQVUzQyxFQUhIYixFQUFJLG9CQUNLSyxhQUt0QixHQUFHK0MsR0FBYUUsRUFBWSxDQUN4QixNQUFNRyxFQUFXRCxFQUFRdkYsUUFBUW1GLEVBQVdDLEVBQVVDLEVBQWFDLEVBQVVDLEVBQVEvRixPQUVyRixPQURBb0YsSUFDT1ksQ0FDWCxDQUlJLE9BSEFsRSxJQUNBc0QsU0FDQTlCLEVBQVl0QixNQUFNQyxVQUFZLGlDQUd0QyxDQUVPLFNBQVNtRCxJQUNaaEgsU0FBU2dFLGVBQWUsVUFBVUMsTUFBUSxHQUMxQ2pFLFNBQVNnRSxlQUFlLGdCQUFnQkMsTUFBUSxHQUNoRGpFLFNBQVNnRSxlQUFlLFlBQVlDLE1BQVEsR0FDNUNqRSxTQUFTZ0UsZUFBZSxhQUFhQyxNQUFRLFlBQ2pELENDakZBLE1BQU00RCxFQUFlN0gsU0FBU3lELGNBQWMsc0JBQ3JDLElBQUlxRSxHQUFvQixFQUNwQkMsRUFBYSxLQU1qQixJQUFJQyxFQUFhLFNBQVNySSxHQUt6QixNQUFNc0ksRUFBYXRJLEVBQUVpRixPQUFPRSxRQUFRLGFBQzlCb0QsRUFBZXZJLEVBQUVpRixPQUFPRSxRQUFRLGVBQ2hDcUQsRUFBZ0J4SSxFQUFFaUYsT0FBT0UsUUFBUSxZQUNqQ3NELEVBQVlqRSxFQUFJLG9CQUd0QixHQUZBNEQsRUFBYUssRUFFVkgsRUErQk9JLEVBOUJHRCxFQUFVNUQsWUErQjNCcUQsRUFBYWpFLE1BQU1DLFVBQVksaUNBQ2ZNLEVBQUksVUFDWkYsTUFBUW9FLEVBaENSUCxHQUFvQixPQUVuQixHQUFHSSxFQUFhLEVDZHRCLFNBQWtDRyxHQUNyQyxNQUFNQyxFQUFjbkUsRUFBSSxtQkFDbEJvRSxFQUFzQkQsRUFBWTFCLFNBQ3hDLElBQUksSUFBSXRHLEVBQUksRUFBR0EsRUFBSWlJLEVBQW9CbEksT0FBUUMsSUFDeENpSSxFQUFvQmpJLEdBQUdrRSxhQUFlNkQsR0FDckNDLEVBQVl6QixZQUFZMEIsRUFBb0JqSSxHQUd4RCxDRFFZa0ksQ0FBeUJKLEVBQVU1RCxhQStCeEMsU0FBdUI1QyxHQUMxQixJQUFJLElBQUl0QixFQUFJLEVBQUdBLEVBQUltSSxFQUFRcEksT0FBUUMsSUFDNUJtSSxFQUFRbkksR0FBR3NCLE9BQVNBLEdBQ25CNkcsRUFBUXhHLE9BQU8zQixFQUFFLEVBRzdCLENBcENZb0ksQ0FBY04sRUFBVTVELGFBQ3hCbUUsSUFDQTNGLFFBQVFDLElBQUksbUNBQ1osSUFBSSxJQUFJM0MsRUFBSSxFQUFHQSxFQUFJbUksRUFBUXBJLE9BQVFDLElBQy9CMEMsUUFBUUMsSUFBSXdGLEVBQVFuSSxHQUFHc0IsTUFFL0IsTUFDSyxHQUFHdUcsRUFDSmpELEVBQVl0QixNQUFNQyxVQUFZLGlDQUM5QndCLFNBRUMsR0FBRytDLEVBQVUsQ0FNR1EsRUFMQTVELEVBQWlCb0QsRUFBVTVELGFBTXBERixFQUFZVixNQUFNQyxVQUFZLGlDQUU5QlUsRUFBWUMsWUFBYyxnQkFBa0JvRSxFQUFLL0csWUFDakRxQyxHQVBJLENBVVIsSUFBa0JtRSxFQVBXTyxDQUY3QixFQXVCTyxTQUFTNUQsRUFBaUJwRCxHQUM3QixJQUFJaUgsRUFBUSxFQUNaLElBQUksSUFBSXZJLEVBQUksRUFBR0EsRUFBSW1JLEVBQVFwSSxPQUFRQyxJQUUvQixHQURBdUksRUFBUXZJLEVBQ0xtSSxFQUFRbkksR0FBR3NCLE9BQVNBLEVBRW5CLE9BREFvQixRQUFRQyxJQUFJLGlCQUNMd0YsRUFBUW5JLEVBRzNCLENDekVBLE1BQU13SSxFQUFVM0UsRUFBSSxtQkFFYixTQUFTNEUsRUFBb0JWLEdBQ2hDLE1BQU1XLEVBQVc3RSxFQUFJLG1CQUNyQixJQUFJOEUsRUFBWWpKLFNBQVM2RixjQUFjLFFBQ3ZDb0QsRUFBVXpFLFlBQWM2RCxFQUN4QlksRUFBVWxELFVBQVVDLElBQUksc0JBQ3hCZ0QsRUFBU3ZDLFlBQVl3QyxFQUN6QixDQTBCTyxTQUFTQyxFQUFxQkMsR0FDakNSLElBQ0EsTUFBTVMsRUFBVXBKLFNBQVM2RixjQUFjLE9BRWpDd0QsRUFBWXJKLFNBQVM2RixjQUFjLE1BQ3pDd0QsRUFBVXRELFVBQVVDLElBQUksVUFFeEIsTUFBTXNELEVBQWV0SixTQUFTNkYsY0FBYyxTQUM1Q3lELEVBQWFuRCxLQUFPLFdBQ3BCbUQsRUFBYXZELFVBQVVDLElBQUksbUJBRzNCLE1BQU11RCxFQUFldkosU0FBUzZGLGNBQWMsUUFDNUMsR0FBR3NELEVBQVF2SCxNQUFNdkIsT0FBUyxHQUFHLENBQ3pCLElBQUltSixFQUFtQkwsRUFBUXZILE1BQU02SCxNQUFNLEVBQUUsSUFDN0NGLEVBQWEvRSxZQUFjZ0YsRUFBbUIsS0FDbEQsTUFDSUQsRUFBYS9FLFlBQWMyRSxFQUFRdkgsTUFFdkMySCxFQUFheEQsVUFBVUMsSUFBSSxtQkFHM0IsTUFBTTBELEVBQWExSixTQUFTNkYsY0FBYyxPQUVwQzhELEVBQVMzSixTQUFTNkYsY0FBYyxPQUNoQytELEVBQVU1SixTQUFTNkYsY0FBYyxPQUNqQ2dFLEVBQVk3SixTQUFTNkYsY0FBYyxPQUVuQ2lFLEVBQVUsSUFBSXZELE1BQ3BCdUQsRUFBUTVKLElBQU0sRUFDZDRKLEVBQVEvRCxVQUFVQyxJQUFJLFdBRXRCLE1BQU0rRCxFQUFXLElBQUl4RCxNQUNyQndELEVBQVM3SixJQUFNLEVBQ2Y2SixFQUFTaEUsVUFBVUMsSUFBSSxZQUV2QixNQUFNZ0UsRUFBVSxJQUFJekQsTUFDcEJ5RCxFQUFROUosSUFBTSxFQUNkOEosRUFBUWpFLFVBQVVDLElBQUksY0FFdEIyRCxFQUFPbEQsWUFBWXFELEdBQ25CRixFQUFRbkQsWUFBWXNELEdBQ3BCRixFQUFVcEQsWUFBWXVELEdBRXRCTixFQUFXakQsWUFBWWtELEdBQ3ZCRCxFQUFXakQsWUFBWW1ELEdBQ3ZCRixFQUFXakQsWUFBWW9ELEdBQ3ZCSCxFQUFXM0QsVUFBVUMsSUFBSSxrQkFFekJvRCxFQUFRM0MsWUFBWTZDLEdBQ3BCRixFQUFRM0MsWUFBWThDLEdBQ3BCSCxFQUFRM0MsWUFBWWlELEdBQ3BCTixFQUFRckQsVUFBVUMsSUFBSSxXQUV0QjhDLEVBQVFyQyxZQUFZMkMsR0FDcEJOLEVBQVFyQyxZQUFZNEMsR0FTeEIsU0FBdUJULEdBRW5CLE1BQU1xQixFQUFVckIsRUFBS3ZGLFNBQ3JCLEdBQUc0RyxFQUNDLElBQUksSUFBSTNKLEVBQUksRUFBR0EsRUFBSTJKLEVBQVE1SixPQUFRQyxJQUMvQm9GLEVBQWtCdUUsRUFBUTNKLEdBR3RDLENBZEk0SixDQUFjZixHRHZGZG5KLFNBQVNvRSxpQkFBaUIsUUFBUzRELEVDMkZ2QyxDQVlPLFNBQVNXLElBRVosSUFEQTNJLFNBQVNzSCxvQkFBb0IsUUFBU1UsR0FDaENjLEVBQVFxQixZQUNWckIsRUFBUWpDLFlBQVlpQyxFQUFRcUIsV0FFcEMsQ0NqSE8sSUFBSTFCLEVBQVUsR0FFZCxTQUFTdEUsRUFBSWlHLEdBQ2hCLE9BQU9wSyxTQUFTeUQsY0FBYzJHLEVBQ2xDLEVBRU8sV0FDSCxNQUFNQyxFQUFnQnJLLFNBQVN5RCxjQUFjLGtCQUN2QzZHLEVBQWV0SyxTQUFTeUQsY0FBYyxhQUN0QzhHLEVBQWlCdkssU0FBU3lELGNBQWMsY0FDeEMrRyxFQUFpQnhLLFNBQVN5RCxjQUFjLGVBRXhDZ0gsRUFBVyxJQUFJbEUsTUFDckJrRSxFQUFTdkssSUFBTSxFQUNmdUssRUFBUzFFLFVBQVVDLElBQUksa0JBRXZCLE1BQU0wRSxFQUFjLElBQUluRSxNQUN4Qm1FLEVBQVl4SyxJQUFNLEVBQ2xCd0ssRUFBWTNFLFVBQVVDLElBQUksYUFFMUIsTUFBTTJFLEVBQVksSUFBSXBFLE1BQ3RCb0UsRUFBVXpLLElBQU0sRUFDaEJ5SyxFQUFVNUUsVUFBVUMsSUFBSSxhQUV4QixNQUFNNEUsRUFBaUIsSUFBSXJFLE1BQzNCcUUsRUFBZTFLLElBQU0sRUFDckIwSyxFQUFlN0UsVUFBVUMsSUFBSSxpQkFFN0JxRSxFQUFjNUQsWUFBWWdFLEdBQzFCSCxFQUFhN0QsWUFBWWlFLEdBQ3pCSCxFQUFlOUQsWUFBWWtFLEdBQzNCSCxFQUFlL0QsWUFBWW1FLEdBRTNCLE1BQU1DLEVBQVU3SyxTQUFTeUQsY0FBYyxpQkFDakNELEVBQWN4RCxTQUFTeUQsY0FBYyxzQkFFM0M0RyxFQUFjakcsaUJBQWlCLFNBQVMsV0FDcEN5RyxFQUFRakgsTUFBTUMsVUFBWSwyQkFDOUIsSUFDQTBHLEVBQWVuRyxpQkFBaUIsU0FBUyxXQUNyQ3lHLEVBQVFqSCxNQUFNQyxVQUFZLDhCQUM5QixJQUNBMkcsRUFBZXBHLGlCQUFpQixTQUFTLFdBQ3JDeUcsRUFBUWpILE1BQU1DLFVBQVksK0JBQzFCTCxFQUFZSSxNQUFNQyxVQUFZLGdDQUNsQyxJQUNBZ0gsRUFBUXpHLGlCQUFpQixTQUFVekUsSUFDUCxTQUFyQkEsRUFBRWlGLE9BQU9rRyxTQUlSNUIsRUFEaUJsRSxFQUFpQnJGLEVBQUVpRixPQUFPSixhQUUvQyxHQUVSLENDdkRBdUcsR1JBTyxXQUVILE1BQU1DLEVBQWNoTCxTQUFTeUQsY0FBYyxnQkFDckN3SCxFQUFlakwsU0FBU3lELGNBQWMsaUJBRTVDdUgsRUFBWTVHLGlCQUFpQixTQUFTLFdBQ2xDWixFQUFZSSxNQUFNQyxVQUFZLCtCQUM5QkUsR0FDSixJQUNBa0gsRUFBYTdHLGlCQUFpQixTQUFTLFdBQ25DWixFQUFZSSxNQUFNQyxVQUFZLCtCQUM5QixNQUFNcUgsRUEwQmQsV0FDSSxNQUFNQyxFQUFhbkwsU0FBU2dFLGVBQWUsU0FBU0MsTUFDcEQsSUFBSW1ILEVBQVlwTCxTQUFTZ0UsZUFBZSxlQUFlQyxNQUV2RCxHQUFHa0gsRUFBVyxDQUVWLE1BQU1FLEVBQWMsSUFBSTFKLEVBQVF3SixFQUFZQyxHQUU1QyxPQURBM0MsRUFBUTlGLEtBQUswSSxHQUNOQSxDQUNYLENBSUksT0FIQTNILElBQ0FLLFNBQ0FQLEVBQVlJLE1BQU1DLFVBQVksaUNBR3RDLENBekM2QnlILEdBQ2xCeEQsR0FnQlgsU0FBMEJ5RCxHQUN0QixJQUFJLElBQUlqTCxFQUFJLEVBQUdBLEVBQUltSSxFQUFRcEksT0FBUUMsSUFDNUJtSSxFQUFRbkksR0FBR3NCLE9BQVMySixJQUNuQjlDLEVBQVFuSSxHQUFHc0IsTUFBUTZHLEVBQVFBLEVBQVFwSSxPQUFPLEdBQUd1QixNQUM3QzZHLEVBQVFuSSxHQUFHdUIsWUFBYzRHLEVBQVFBLEVBQVFwSSxPQUFPLEdBQUd3QixZQUcvRCxDQXRCWTJKLENBQWlCekQsRUFBV3ZELGFNTWpDLFNBQThCNkQsR0FDakMsTUFDTUUsRUFEY3BFLEVBQUksbUJBQ2dCeUMsU0FDeEMsSUFBSSxJQUFJdEcsRUFBSSxFQUFHQSxFQUFJaUksRUFBb0JsSSxPQUFRQyxJQUN4Q2lJLEVBQW9CakksR0FBR2tFLGFBQWU2RCxJQUVyQ0UsRUFBb0JqSSxHQUFHa0UsWUFBY2lFLEVBQVFGLEVBQW9CbEksUUFBUXVCLE1BR3JGLENOZFk2SixDQUFxQjFELEVBQVd2RCxhTWlCckJMLEVBQUksb0JBQ1pLLFlBQWNpRSxFQUFRQSxFQUFRcEksT0FBTyxHQUFHdUIsTU5oQjNDNkcsRUFBUXhHLE9BQU93RyxFQUFRcEksT0FBTyxFQUFFLEdBQ2hDeUgsR0FBb0IsSUFFakJvRCxJQUNDbkMsRUFBb0JtQyxFQUFhdEosT0FDakNzSCxFQUFxQmdDLElBRXpCbkgsSUFFUixHQUNKLENRekJBMkgsR0FDQSxNQUFNQyxFQUFVLElBQUloSyxFQUFRLGlCQUFrQiw4REFDOUM4RyxFQUFRLEdBQUtrRCxFQUNiekMsRUFBcUJ5QyxHQUNyQjVDLEVBQW9CLGlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2RpbnRvZG9saXN0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL29kaW50b2RvbGlzdC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL29kaW50b2RvbGlzdC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9vZGludG9kb2xpc3QvLi9zcmMvdGFza0NsYXNzLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy9wcm9qZWN0Q2xhc3MuanMiLCJ3ZWJwYWNrOi8vb2RpbnRvZG9saXN0Ly4vc3JjL3Byb2plY3RGb3JtLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy9pbmZvRGVzY0xpc3RlbmVycy5qcyIsIndlYnBhY2s6Ly9vZGludG9kb2xpc3QvLi9zcmMvdGFza0V2ZW50TGlzdGVuZXJzLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy90YXNrRE9NLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy90YXNrRm9ybS5qcyIsIndlYnBhY2s6Ly9vZGludG9kb2xpc3QvLi9zcmMvcHJvamVjdEV2ZW50TGlzdGVuZXJzLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy9wcm9qZWN0RE9NLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy9tZW51RXZlbnRMaXN0ZW5lcnMuanMiLCJ3ZWJwYWNrOi8vb2RpbnRvZG9saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSB7XG5cdFx0XHR2YXIgaSA9IHNjcmlwdHMubGVuZ3RoIC0gMTtcblx0XHRcdHdoaWxlIChpID4gLTEgJiYgIXNjcmlwdFVybCkgc2NyaXB0VXJsID0gc2NyaXB0c1tpLS1dLnNyYztcblx0XHR9XG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImV4cG9ydCBjbGFzcyBUYXNre1xuICAgIGNvbnN0cnVjdG9yKHRUaXRsZSwgdERlc2MsIHREdWUsIHRQcmlvLCB0UHJvail7XG4gICAgICAgIHRoaXMudFRpdGxlID0gdFRpdGxlO1xuICAgICAgICB0aGlzLnREZXNjID0gdERlc2M7XG4gICAgICAgIHRoaXMudER1ZSA9IHREdWU7XG4gICAgICAgIHRoaXMudFByaW8gPSB0UHJpbztcbiAgICAgICAgdGhpcy50UHJvaiA9IHRQcm9qO1xuICAgIH1cbiAgICBzZXQgdFRpdGxlKG5ld3RUaXRsZSl7XG4gICAgICAgIHRoaXMuX3RUaXRsZSA9IG5ld3RUaXRsZTtcbiAgICB9XG4gICAgc2V0IHREZXNjKG5ld3REZXNjKXtcbiAgICAgICAgdGhpcy5fdERlc2MgPSBuZXd0RGVzYztcbiAgICB9XG4gICAgc2V0IHREdWUobmV3dER1ZSl7XG4gICAgICAgIHRoaXMuX3REdWUgPSBuZXd0RHVlO1xuICAgIH1cbiAgICBzZXQgdFByaW8obmV3dFByaW8pe1xuICAgICAgICB0aGlzLl90UHJpbyA9IG5ld3RQcmlvO1xuICAgIH1cbiAgICBzZXQgdFByb2oobmV3dFByb2ope1xuICAgICAgICB0aGlzLl90UHJvaiA9IG5ld3RQcm9qO1xuICAgIH1cblxuICAgIGdldCB0VGl0bGUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RUaXRsZTtcbiAgICB9XG4gICAgZ2V0IHREZXNjKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl90RGVzYztcbiAgICB9XG4gICAgZ2V0IHREdWUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3REdWU7XG4gICAgfVxuICAgIGdldCB0UHJpbygpe1xuICAgICAgICByZXR1cm4gdGhpcy5fdFByaW87XG4gICAgfVxuICAgIGdldCB0UHJvaigpe1xuICAgICAgICByZXR1cm4gdGhpcy5fdFByb2o7XG4gICAgfVxufSIsImltcG9ydCB7IFRhc2sgfSBmcm9tIFwiLi90YXNrQ2xhc3NcIjtcblxuZXhwb3J0IGNsYXNzIFByb2plY3R7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uKXtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMudG9Eb3MgPSBbXTtcbiAgICB9XG5cbiAgICBnZXRMYXN0VGFzaygpe1xuICAgICAgICByZXR1cm4gdGhpcy50b0Rvc1t0aGlzLnRvRG9zLmxlbmd0aC0xXTtcbiAgICB9XG5cbiAgICByZW1vdmVMYXN0VGFzaygpe1xuICAgICAgICB0aGlzLnRvRG9zLnNwbGljZSh0aGlzLnRvRG9zLmxlbmd0aC0xLDEpO1xuICAgIH1cblxuICAgIGVkaXRUYXNrKHRhc2tOYW1lKXtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMudG9Eb3MubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgaWYodGhpcy50b0Rvc1tpXS50VGl0bGUgPT0gdGFza05hbWUpe1xuICAgICAgICAgICAgICAgIHRoaXMudG9Eb3NbaV0udFRpdGxlID0gdGhpcy50b0Rvc1t0aGlzLnRvRG9zLmxlbmd0aC0xXS50VGl0bGU7XG4gICAgICAgICAgICAgICAgdGhpcy50b0Rvc1tpXS50RGVzYyA9IHRoaXMudG9Eb3NbdGhpcy50b0Rvcy5sZW5ndGgtMV0udERlc2M7XG4gICAgICAgICAgICAgICAgdGhpcy50b0Rvc1tpXS50RHVlID0gdGhpcy50b0Rvc1t0aGlzLnRvRG9zLmxlbmd0aC0xXS50RHVlO1xuICAgICAgICAgICAgICAgIHRoaXMudG9Eb3NbaV0udFByaW8gPSB0aGlzLnRvRG9zW3RoaXMudG9Eb3MubGVuZ3RoLTFdLnRQcmlvO1xuICAgICAgICAgICAgICAgIHRoaXMudG9Eb3NbaV0udFByb2ogPSB0aGlzLnRvRG9zW3RoaXMudG9Eb3MubGVuZ3RoLTFdLnRQcm9qO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmV3VGFzayhUdGl0bGUsIFRkZXNjLCBUZHVlLCBUcHJpbywgVHByb2ope1xuICAgICAgICBsZXQgdCA9IG5ldyBUYXNrKFR0aXRsZSwgVGRlc2MsIFRkdWUsIFRwcmlvLCBUcHJvaik7XG4gICAgICAgIHRoaXMudG9Eb3MucHVzaCh0KTsvL3BsYWNlZCB1bmRlcnNjb3JlXG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cblxuICAgIGZpbmRUYXNrKHRpdGxlTmFtZSl7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRvRG9zLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGlmKHRoaXMudG9Eb3NbaV0udFRpdGxlID09IHRpdGxlTmFtZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9Eb3NbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVUYXNrRnJvbUFycih0aXRsZU5hbWUpe1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy50b0Rvcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBpZih0aGlzLnRvRG9zW2ldLnRUaXRsZSA9PSB0aXRsZU5hbWUpe1xuICAgICAgICAgICAgICAgIHRoaXMudG9Eb3Muc3BsaWNlKGksMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcmludFRhc2tzKCl7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3VycmVudCB0YXNrcyBpbiBwcm9qZWN0OiBcIik7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRvRG9zLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMudG9Eb3NbaV0udFRpdGxlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBudW1PZlRhc2tzKCl7XG4gICAgICAgIHJldHVybiB0aGlzLnRvRG9zLmxlbmd0aDsvL3BsYWNlZCB1bmRlcnNjb3JlXG4gICAgfVxuXG4gICAgZ2V0IHRpdGxlKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl90aXRsZTtcbiAgICB9XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgZ2V0IHRvRG9MaXN0KCl7Ly9nZXQgYXJyYXkgdGhlbiBwdXNoIGEgdG9Eb1xuICAgICAgICByZXR1cm4gdGhpcy50b0RvcztcbiAgICB9XG5cbiAgICBzZXQgdGl0bGUobmV3VGl0bGUpe1xuICAgICAgICB0aGlzLl90aXRsZSA9IG5ld1RpdGxlO1xuICAgIH1cbiAgICBzZXQgZGVzY3JpcHRpb24obmV3RGVzYyl7XG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gbmV3RGVzYztcbiAgICB9XG5cbn0iLCJpbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdENsYXNzXCI7XG5pbXBvcnQgeyBwcm9qQXJyIH0gZnJvbSBcIi4vbWVudUV2ZW50TGlzdGVuZXJzXCI7XG5pbXBvcnQgeyBhZGRQcm9qZWN0VG9TaWRlYmFyLCBlZGl0UHJvamVjdEluU2lkZWJhciwgZGlzcGxheVByb2plY3RJbk1haW4sIGVkaXRQcm9qZWN0TmFtZU1haW4gfSBmcm9tIFwiLi9wcm9qZWN0RE9NXCI7XG5pbXBvcnQgeyBfdGVzdGVyaW5nLCBlZGl0QnV0dG9uQ2xpY2tlZCwgY3VyclRpdGxlMiB9IGZyb20gXCIuL3Byb2plY3RFdmVudExpc3RlbmVyc1wiO1xuXG5jb25zdCBwcm9qT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3UHJvamVjdE92ZXJsYXlcIik7XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9qZWN0T3ZlcmxheVN0dWZmKCl7XG4gICAgLy9idXR0b25zXG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlQnV0dG9uXCIpO1xuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3VibWl0QnV0dG9uXCIpO1xuXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICBwcm9qT3ZlcmxheS5zdHlsZS5hbmltYXRpb24gPSAncHJvamVjdFNsaWRlVXAgMS41cyBmb3J3YXJkcyc7XG4gICAgICAgIHByb2plY3RGb3JtQ2xlYXIoKTtcbiAgICB9KVxuICAgIHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHByb2pPdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9ICdwcm9qZWN0U2xpZGVVcCAxLjVzIGZvcndhcmRzJztcbiAgICAgICAgY29uc3QgcHJvamVjdFBhcmFtID0gZXh0cmFjdERhdGFGb3JQcm9qZWN0KCk7XG4gICAgICAgIGlmKGVkaXRCdXR0b25DbGlja2VkKXtcbiAgICAgICAgICAgIGVkaXRQcm9qZWN0SW5BcnIoY3VyclRpdGxlMi50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICBlZGl0UHJvamVjdEluU2lkZWJhcihjdXJyVGl0bGUyLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgIGVkaXRQcm9qZWN0TmFtZU1haW4oKTtcbiAgICAgICAgICAgIHByb2pBcnIuc3BsaWNlKHByb2pBcnIubGVuZ3RoLTEsMSk7Ly9SRU1PVkUgVEhFIExBU1QgUFJPSkVDVCBJTiBBUlJBWS4uTk9XIFVTRUxFU1NcbiAgICAgICAgICAgIGVkaXRCdXR0b25DbGlja2VkID0gZmFsc2U7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgaWYocHJvamVjdFBhcmFtKXtcbiAgICAgICAgICAgICAgICBhZGRQcm9qZWN0VG9TaWRlYmFyKHByb2plY3RQYXJhbS50aXRsZSkvL3RoaXMgd2lsbCBiZSBpbiBwcm9qZWN0RE9NLmpzIGZpbGVcbiAgICAgICAgICAgICAgICBkaXNwbGF5UHJvamVjdEluTWFpbihwcm9qZWN0UGFyYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvamVjdEZvcm1DbGVhcigpO1xuICAgICAgICB9XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gZWRpdFByb2plY3RJbkFycihyZXBsYWNlVGl0bGUpe1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwcm9qQXJyLmxlbmd0aDsgaSsrKXsvL2ZvcihsZXQgaSA9IDA7IGkgPCBwcm9qQXJyLmxlbmd0aC0xOyBpKyspe1xuICAgICAgICBpZihwcm9qQXJyW2ldLnRpdGxlID09IHJlcGxhY2VUaXRsZSl7XG4gICAgICAgICAgICBwcm9qQXJyW2ldLnRpdGxlID0gcHJvakFycltwcm9qQXJyLmxlbmd0aC0xXS50aXRsZTtcbiAgICAgICAgICAgIHByb2pBcnJbaV0uZGVzY3JpcHRpb24gPSBwcm9qQXJyW3Byb2pBcnIubGVuZ3RoLTFdLmRlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBleHRyYWN0RGF0YUZvclByb2plY3QoKXtcbiAgICBjb25zdCB0aXRsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKS52YWx1ZVxuICAgIGxldCBkZXNjSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpLnZhbHVlO1xuXG4gICAgaWYodGl0bGVJbnB1dCl7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJkZXRlY3RlZCB0aXRsZVwiKTsvL2RlYnVnZ2luZ1xuICAgICAgICBjb25zdCBwcm9qZWN0TWFkZSA9IG5ldyBQcm9qZWN0KHRpdGxlSW5wdXQsIGRlc2NJbnB1dCk7XG4gICAgICAgIHByb2pBcnIucHVzaChwcm9qZWN0TWFkZSk7XG4gICAgICAgIHJldHVybiBwcm9qZWN0TWFkZTtcbiAgICB9ZWxzZXtcbiAgICAgICAgZGlzcGxheU5lZWRUaXRsZSgpOy8vIENBTiBJTlNFUlQgRE9NIE1BTklQVUxBVElPTiBUTyBTSElGVCBET1dOIFRIRSBFUlJPUiBPVkVSTEFZIDopXG4gICAgICAgIHByb2plY3RGb3JtQ2xlYXIoKTtcbiAgICAgICAgcHJvak92ZXJsYXkuc3R5bGUuYW5pbWF0aW9uID0gXCJwcm9qZWN0U2xpZGVEb3duIDEuNXMgZm9yd2FyZHNcIjtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlOZWVkVGl0bGUoKXtcbiAgICBjb25zdCBlcnJvck92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVycm9yUHJvamVjdE92ZXJsYXlcIik7XG4gICAgZXJyb3JPdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9IFwicHJvamVjdFNsaWRlRG93biAxLjVzIGZvcndhcmRzXCJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIGVycm9yT3ZlcmxheS5zdHlsZS5hbmltYXRpb24gPSBcInByb2plY3RTbGlkZVVwIDEuNXMgZm9yd2FyZHNcIlxuICAgIH0sIDI1MDApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJvamVjdEZvcm1DbGVhcigpe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIikudmFsdWUgPSBcIlwiO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIikudmFsdWUgPSBcIlwiO1xufSIsImltcG9ydCB7IGRxcyB9IGZyb20gXCIuL21lbnVFdmVudExpc3RlbmVyc1wiO1xuaW1wb3J0IHsgaW5mb092ZXJsYXksIGluZm9TZWN0aW9uIH0gZnJvbSBcIi4vdGFza0V2ZW50TGlzdGVuZXJzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbmZvT3ZlcmxheUxpc3RlbmVyKCl7XG4gICAgY29uc3QgaW5mb0Nsb3NlID0gZHFzKFwiLmluZm9DbG9zZUJ1dHRvblwiKTtcbiAgICBpbmZvQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF9pbmZvVGVzdGVyaW5nKTtcbn1cblxuZnVuY3Rpb24gX2luZm9UZXN0ZXJpbmcoKXtcbiAgICBpbmZvT3ZlcmxheS5zdHlsZS5hbmltYXRpb24gPSBcInByb2plY3RTbGlkZVVwIDEuNXMgZm9yd2FyZHNcIjtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIGluZm9TZWN0aW9uLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9LCAxNTAwKTtcbn1cblxuLy9Mb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LiBJbnRlZ2VyIGZpbmlidXMgY29uc2VxdWF0IG1hbGVzdWFkYS4gUGVsbGVudGVzcXVlIGlkIG5pYmggZXQgcmlzdXMgdnVscHV0YXRlIGZyaW5naWxsYS4gRXRpYW0gbmVjIGRhcGlidXMgbWFnbmEuIE1hZWNlbmFzIGF1Y3RvciBlc3QgdWx0cmljaWVzIGxhY3VzIGNvbnNlY3RldHVyLCBlZ2V0IHRpbmNpZHVudCBlbmltIGNvbnNlY3RldHVyLiBOYW0gZXQgYW50ZSBhIGxvcmVtIGZldWdpYXQgbWF0dGlzIGluIGluIGV4LiBQZWxsZW50ZXNxdWUgaGFiaXRhbnQgbW9yYmkgdHJpc3RpcXVlIHNlbmVjdHVzIGV0IG5ldHVzIGV0IG1hbGVzdWFkYSBmYW1lcyBhYyB0dXJwaXMgZWdlc3Rhcy4gSW4gZXQgbWF4aW11cyBsaWJlcm8sIGV0IG1hdHRpcyB2ZWxpdC4gUGVsbGVudGVzcXVlIGhhYml0YW50IG1vcmJpIHRyaXN0aXF1ZSBzZW5lY3R1cyBldCBuZXR1cyBldCBtYWxlc3VhZGEgZmFtZXMgYWMgdHVycGlzIGVnZXN0YXMuIEFlbmVhbiBldCBsYW9yZWV0IG1hZ25hLiBEb25lYyBlbGl0IHZlbGl0LCBoZW5kcmVyaXQgdml0YWUgcHJldGl1bSBzZWQsIHBvc3VlcmUgcXVpcyBleC4iLCJpbXBvcnQgeyBkcXMgfSBmcm9tIFwiLi9tZW51RXZlbnRMaXN0ZW5lcnNcIjtcbmltcG9ydCB7IGZpbmRQcm9qZWN0SW5BcnIgfSBmcm9tIFwiLi9wcm9qZWN0RXZlbnRMaXN0ZW5lcnNcIjtcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0Q2xhc3NcIjtcbmltcG9ydCB7IFRhc2sgfSBmcm9tIFwiLi90YXNrQ2xhc3NcIjtcbmltcG9ydCB7IGNsZWFyVGFza01haW4gfSBmcm9tIFwiLi90YXNrRE9NXCI7XG5pbXBvcnQgeyB0YXNrT3ZlcmxheSwgdGFza092ZXJsYXlMaXN0ZW5lcnMgfSBmcm9tIFwiLi90YXNrRm9ybVwiO1xuaW1wb3J0IHsgaW5mb092ZXJsYXlMaXN0ZW5lciB9IGZyb20gXCIuL2luZm9EZXNjTGlzdGVuZXJzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB0YXNrRUxpc3RlbmVycygpe1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3Rhc2tUZXN0ZXJpbmcpXG4gICAgLy9hZGQgdGhlIGV2ZW50TGlzdGVuZXIgZm9yIHRoZSBjaGFuZ2Ugb2YgdGhlIGRhdGUgcGlja2VyXG59O1xuXG5leHBvcnQgY29uc3QgaW5mb092ZXJsYXkgPSBkcXMoXCIuaW5mb0Rlc2NPdmVybGF5XCIpO1xuZXhwb3J0IGNvbnN0IGluZm9TZWN0aW9uID0gZHFzKFwiLmluZm9TZWNcIik7XG5leHBvcnQgbGV0IHRhc2tFZGl0QnV0dG9uID0gZmFsc2U7XG5leHBvcnQgbGV0IGVkaXRUYXNrID0gbnVsbDtcbmxldCB0YXNrUmVtQnV0dG9uID0gZmFsc2U7XG4vL2NvbnN0IHByb2pOYW1lUmVtID0gZHFzKFwiLnByb2plY3ROYW1lTWFpblwiKTtQTEFDRU1FTlQgT0YgVEhJUyBPVVQgSEVSRSBDQVVTRVMgTUFKT1IgQlVHXG4vL2NvbnN0IHByb2pSZW1FZCA9IGZpbmRQcm9qZWN0SW5BcnIocHJvak5hbWVSZW0udGV4dENvbnRlbnQpO1dJUEVTIFRIRSBFTlRJUkUgRElTUExBWSBBUkVBIEFORCBNRU5VKEVWRVJZVEhJTkcgQkFTSUNBTExZIE9fbylcblxuLy8gZXhwb3J0IGZ1bmN0aW9uIGdpdmVUYXNrTmFtZSh0YXNrTmFtZSl7XG4vLyAgICAgcmV0dXJuIHRhc2tOYW1lO1xuLy8gfVxuXG5leHBvcnQgZnVuY3Rpb24gX3Rhc2tUZXN0ZXJpbmcoZSl7Ly92YXIgX3Rhc2tUZXN0ZXJpbmcgPSBmdW5jdGlvbihlKXtcbiAgICAvL3dlIGNhbiBvcHRpbWl6ZSB0aGlzIGJ5IHB1dHRpbmcuLi4gXG4gICAgICAgIC8vIGNvbnN0IHByb2pOYW1lRWQgPSBkcXMoXCIucHJvamVjdE5hbWVNYWluXCIpOy8vY3VycmVudCBwcm9qZWN0XG4gICAgICAgIC8vIGNvbnN0IHByb2pFZCA9IGZpbmRQcm9qZWN0SW5BcnIocHJvak5hbWVFZC50ZXh0Q29udGVudCk7XG4gICAgICAgIC8vIGVkaXRUYXNrID0gcHJvakVkLmZpbmRUYXNrKHRhc2tOYW1lLnRleHRDb250ZW50KTsvL2N1cnJlbnQgdGFza1xuICAgIC8vb3V0IGhlcmUgaW5zdGVhZCBvZiByZXBlYXRpbmcgY29kZSBpbiBlYWNoIFwiaWZcIiBhbmQgXCJlbHNlIGlmXCJcblxuICAgIGNvbnN0IHRhc2tOYW1lID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgLy9naXZlVGFza05hbWUodGFza05hbWUudGV4dENvbnRlbnQpO1xuICAgIC8vY29uc3QgcHJvak5hbWVSZW0gPSBkcXMoXCIucHJvamVjdE5hbWVNYWluXCIpO1xuICAgIC8vY29uc3QgcHJvalJlbUVkID0gZmluZFByb2plY3RJbkFycihwcm9qTmFtZVJlbS50ZXh0Q29udGVudCk7Ly9wcm9qZWN0IGNsYXNzIHdpbGwgaGF2ZSBhIGZ1bmMgdGhhdCBjYW4gZ28gdGhyb3VnaCBpdHMgdGFzayBhcnJheSBhbmQgcmVtb3ZlIGEgc3BlY2lmaWVkIHRhc2sgOilcblxuICAgIGlmKGUudGFyZ2V0Lm1hdGNoZXMoXCIudGFza1Byb2pFZGl0XCIpKXsvL3RoaXMgd2lsbCBiZSBkb25lIGxhc3QgZmlyc3Qgd2Ugd2lsbCB3b3JrIG9uIFJFTU9WRVxuICAgICAgICAvL2NvbnN0IHRhc2tOYW1lID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiY3VycmVudCB0YXNrIE5hbWUgaXMyMjIyOiBcIiArIHRhc2tOYW1lKTtcbiAgICAgICAgdGFza0VkaXRCdXR0b24gPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmxvZyhcIm1vcmVQZXN0b1BsZWFzZTogXCIgKyB0YXNrTmFtZS50ZXh0Q29udGVudCk7XG4gICAgICAgIC8vYnJpbmcgdGFza2Zvcm0gZG93biBmaW5kIHRhc2sgYW5kIHByZWZpbGwgd2l0aCB0YXNrTmFtZSBhbmQgZGF0ZVxuICAgICAgICAvL3NldCB0YXNrRWRpdEJ1dHRvbiA9IHRydWUgYW5kIG9uIHRhc2tGb3JtLmpzIHNldCAnaWYodGFza0VkaXRCdXR0b24pJyBvbiBzdWJtaXQgYnV0dG9uXG4gICAgICAgIC8vdGhhdCB3aWxsIGVuY2Fwc3VsYXRlIGVkaXQgYWxnb3JpdGhtXG4gICAgICAgIGNvbnN0IHByb2pOYW1lRWQgPSBkcXMoXCIucHJvamVjdE5hbWVNYWluXCIpOy8vY3VycmVudCBwcm9qZWN0XG4gICAgICAgIGNvbnN0IHByb2pFZCA9IGZpbmRQcm9qZWN0SW5BcnIocHJvak5hbWVFZC50ZXh0Q29udGVudCk7XG4gICAgICAgIGVkaXRUYXNrID0gcHJvakVkLmZpbmRUYXNrKHRhc2tOYW1lLnRleHRDb250ZW50KTsvL2N1cnJlbnQgdGFza1xuXG4gICAgICAgIC8vQUREIFRBU0sgVVNJTkcgRlVOQ1RJT04gRlJPTSB0YXNrRE9NLmpzIGZpbGUgKGRpc3BsYXlUYXNrSW5NYWluKGVkaXRUYXNrKSlcbiAgICAgICAgLy9yZW1vdmVcbiAgICAgICAgZWRpdFRhc2tGb3JtKGVkaXRUYXNrKTtcbiAgICB9XG4gICAgZWxzZSBpZihlLnRhcmdldC5tYXRjaGVzKFwiLnRhc2tQcm9qUmVtb3ZlXCIpKXsvL1wiZWxzZSBpZlwiIGlmIGFsbCB0aHJlZSBidXR0b25zIGFyZSBpbiB0aGlzIHNlY3Rpb25cbiAgICAgICAgdGFza1JlbUJ1dHRvbiA9IHRydWU7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhc2tOYW1lLnRleHRDb250ZW50KTtcbiAgICAgICAgY29uc3QgcHJvak5hbWVSZW0gPSBkcXMoXCIucHJvamVjdE5hbWVNYWluXCIpO1xuICAgICAgICBjb25zdCBwcm9qUmVtID0gZmluZFByb2plY3RJbkFycihwcm9qTmFtZVJlbS50ZXh0Q29udGVudCk7Ly9wcm9qZWN0IGNsYXNzIHdpbGwgaGF2ZSBhIGZ1bmMgdGhhdCBjYW4gZ28gdGhyb3VnaCBpdHMgdGFzayBhcnJheSBhbmQgcmVtb3ZlIGEgc3BlY2lmaWVkIHRhc2sgOilcbiAgICAgICAgcHJvalJlbS5yZW1vdmVUYXNrRnJvbUFycih0YXNrTmFtZS50ZXh0Q29udGVudCk7XG4gICAgICAgIHByb2pSZW0ucHJpbnRUYXNrcygpO1xuICAgICAgICBjbGVhclRhc2tNYWluKHRhc2tOYW1lLnRleHRDb250ZW50KTtcbiAgICAgICAgLy9jb2RlIGhlcmUgZm9yIHJlbW92YWwgb2YgaW5kaXZpZHVhbCB0YXNrXG4gICAgfVxuICAgIC8vIGVsc2UgaWYgdGFzayBuYW1lIFwiYnV0dG9uXCIgYnJpbmcgZG93biBpbmZvRGVzY092ZXJsYXkgd2l0aCBhbGwgaW5mbyBvZiB0YXNrXG4gICAgZWxzZSBpZihlLnRhcmdldC5tYXRjaGVzKFwiLnRpdGxlVGFza0Rpc3BcIikpe1xuICAgICAgICBjb25zdCB0YXNrTmFtZTIgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICBjb25zdCBwcm9qTmFtZUVkID0gZHFzKFwiLnByb2plY3ROYW1lTWFpblwiKTsvL2N1cnJlbnQgcHJvamVjdFxuICAgICAgICBjb25zdCBwcm9qRWQgPSBmaW5kUHJvamVjdEluQXJyKHByb2pOYW1lRWQudGV4dENvbnRlbnQpO1xuICAgICAgICBjb25zdCBpbmZvVGFzayA9IHByb2pFZC5maW5kVGFzayh0YXNrTmFtZTIudGV4dENvbnRlbnQpOy8vY3VycmVudCB0YXNrXG4gICAgICAgIGluZm9EZXNjT3ZlcmxheVRhc2soaW5mb1Rhc2spO1xuICAgIH1cbiAgICAvL2NoZWNrYm94IGhlcmUgdG9vIGJsYWFhYWhcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2tOYW1lTGkoKXtcbiAgICByZXR1cm4gdGhlVGhpbmcudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBpbmZvRGVzY092ZXJsYXlUYXNrKHRhc2spe1xuICAgIGluZm9PdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9IFwicHJvamVjdFNsaWRlRG93biAxLjVzIGZvcndhcmRzXCI7XG5cbiAgICBpbmZvU2VjdGlvbi50ZXh0Q29udGVudCArPSBcIkRVRSBEQVRFOiBcIiArIHRhc2sudER1ZSArIFwiIERFU0NSSVBUSU9OOiBcIiArIHRhc2sudERlc2M7XG4gICAgaW5mb092ZXJsYXlMaXN0ZW5lcigpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZWRpdFRhc2tGb3JtKHRhc2spe1xuICAgIHRhc2tPdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9IFwicHJvamVjdFNsaWRlRG93biAxLjVzIGZvcndhcmRzXCI7XG4gICAgLy9nZXQgZHFzKCN0aXRsZSkgYW5kIGRxcygjZGF0ZSkgYW5kIHNldCB2YWx1ZSB0byB0YXNrIHRpdGxlIGFuZCBkYXRlIGFzIGRlZmF1bHRcbiAgICBjb25zdCB0YXNrVGl0bGVGb3JtID0gZHFzKFwiI3RUaXRsZVwiKTtcbiAgICBjb25zdCB0YXNrRGF0ZUZvcm0gPSBkcXMoXCIjdER1ZURhdGVcIik7XG4gICAgdGFza1RpdGxlRm9ybS52YWx1ZSA9IHRhc2sudFRpdGxlO1xuICAgIHRhc2tEYXRlRm9ybS52YWx1ZSA9IHRhc2sudER1ZTtcbiAgICB0YXNrT3ZlcmxheUxpc3RlbmVycygpOy8vIE1JR0hUIE5PVCBCRSBORUVERURcbn0iLCJpbXBvcnQgRWRpdCBmcm9tICcuLi9zcmMvaW1ncy9lZGl0LnBuZyc7XG5pbXBvcnQgUmVtb3ZlIGZyb20gJy4uL3NyYy9pbWdzL2Nsb3NlLnBuZyc7XG5pbXBvcnQgeyBfdGFza1Rlc3RlcmluZyB9IGZyb20gJy4vdGFza0V2ZW50TGlzdGVuZXJzJztcbmltcG9ydCB7IGRxcyB9IGZyb20gJy4vbWVudUV2ZW50TGlzdGVuZXJzJztcbmltcG9ydCB7IHRhc2tFTGlzdGVuZXJzIH0gZnJvbSAnLi90YXNrRXZlbnRMaXN0ZW5lcnMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheVRhc2tJbk1haW4odGFzayl7Ly8ocHJvamVjdCwgdWwpIG1pZ2h0IGJlIG5lZWRlZCBhcyBwYXJhbXMgYnV0IHByb2JzIG5vdFxuICAgIGNvbnN0IHByb2pVTCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kb1VMXCIpO1xuXG4gICAgY29uc3QgdGFza0xJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcblxuICAgIGNvbnN0IHRpdGxlRGlzcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRpdGxlRGlzcC50ZXh0Q29udGVudCA9IHRhc2sudFRpdGxlO1xuICAgIHRpdGxlRGlzcC5jbGFzc0xpc3QuYWRkKFwidGl0bGVUYXNrRGlzcFwiKTtcblxuICAgIGNvbnN0IGJ1dHRvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgY29uc3QgdGFza0NoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICB0YXNrQ2hlY2tib3gudHlwZSA9IFwiY2hlY2tib3hcIjtcblxuICAgIC8vIGNvbnN0IHRhc2tEYXRlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIC8vIHRhc2tEYXRlSW5wdXQudHlwZSA9IFwiZGF0ZVwiO1xuICAgIC8vIHRhc2tEYXRlSW5wdXQudmFsdWUgPSB0YXNrLnREdWU7XG5cbiAgICBjb25zdCB0YXNrRWRpdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHRhc2tSZW1vdmVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIGNvbnN0IHRhc2tFZGl0SWNvbiA9IG5ldyBJbWFnZSgpO1xuICAgIHRhc2tFZGl0SWNvbi5zcmMgPSBFZGl0O1xuICAgIHRhc2tFZGl0SWNvbi5jbGFzc0xpc3QuYWRkKCd0YXNrUHJvakVkaXQnKTtcblxuICAgIGNvbnN0IHRhc2tSZW1vdmVJY29uID0gbmV3IEltYWdlKCk7XG4gICAgdGFza1JlbW92ZUljb24uc3JjID0gUmVtb3ZlO1xuICAgIHRhc2tSZW1vdmVJY29uLmNsYXNzTGlzdC5hZGQoJ3Rhc2tQcm9qUmVtb3ZlJyk7XG5cbiAgICB0YXNrRWRpdERpdi5hcHBlbmRDaGlsZCh0YXNrRWRpdEljb24pO1xuICAgIHRhc2tSZW1vdmVEaXYuYXBwZW5kQ2hpbGQodGFza1JlbW92ZUljb24pO1xuXG4gICAgLy90YXNrTEkudGV4dENvbnRlbnQgPSB0YXNrLnRUaXRsZTsvL3Rhc2sudFRpdGxlICsgXCIgIFwiICsgdGFzay50RHVlXG5cbiAgICBidXR0b25EaXYuYXBwZW5kQ2hpbGQodGFza0VkaXREaXYpO1xuICAgIGJ1dHRvbkRpdi5hcHBlbmRDaGlsZCh0YXNrUmVtb3ZlRGl2KTtcbiAgICBidXR0b25EaXYuYXBwZW5kQ2hpbGQodGFza0NoZWNrYm94KTtcblxuICAgIGJ1dHRvbkRpdi5jbGFzc0xpc3QuYWRkKCd0YXNrQnV0dG9ucycpO1xuXG4gICAgdGFza0xJLmFwcGVuZENoaWxkKHRpdGxlRGlzcCk7XG5cbiAgICB0YXNrTEkuYXBwZW5kQ2hpbGQoYnV0dG9uRGl2KTtcblxuICAgIC8vdGFza0xJLmFwcGVuZENoaWxkKCk7XG5cbiAgICB0YXNrTEkuY2xhc3NMaXN0LmFkZChcInRvZG9cIik7XG5cbiAgICBwcm9qVUwuYXBwZW5kQ2hpbGQodGFza0xJKTtcblxuICAgIHRhc2tFTGlzdGVuZXJzKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclRhc2tNYWluKHRhc2spe1xuICAgIC8vZ2V0IHRhc2sgdWwgc2VjdGlvbiBhbmQgcmVtb3ZlIGxpIHZpYSBwYXJhbWV0ZXIobGlrZSByZW1vdmluZyBhIHByb2plY3QgZnJvbSBzaWRlYmFyKVxuICAgIGNvbnN0IHVsUGFyZW50ID0gZHFzKFwiLnRvZG9VTFwiKTtcbiAgICBjb25zdCBsaVRhc2tDaGlsZHJlbiA9IHVsUGFyZW50LmNoaWxkcmVuO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBsaVRhc2tDaGlsZHJlbi5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGlmKGxpVGFza0NoaWxkcmVuW2ldLnRleHRDb250ZW50ID09IHRhc2spe1xuICAgICAgICAgICAgdWxQYXJlbnQucmVtb3ZlQ2hpbGQobGlUYXNrQ2hpbGRyZW5baV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGFza1Rlc3RlcmluZyk7SUYgTVVMVElQTEUgVEFTS1MsIE9USEVSIFRBU0tTIEJVVFRPTlMgV09OVCBXT1JLXG59IiwiaW1wb3J0IHsgZHFzIH0gZnJvbSBcIi4vbWVudUV2ZW50TGlzdGVuZXJzXCI7XG5pbXBvcnQgeyBmaW5kUHJvamVjdEluQXJyIH0gZnJvbSBcIi4vcHJvamVjdEV2ZW50TGlzdGVuZXJzXCI7XG5pbXBvcnQgeyBkaXNwbGF5TmVlZFRpdGxlIH0gZnJvbSBcIi4vcHJvamVjdEZvcm1cIjtcbmltcG9ydCB7IGRpc3BsYXlUYXNrSW5NYWluIH0gZnJvbSBcIi4vdGFza0RPTVwiO1xuaW1wb3J0IHsgY2xlYXJUYXNrTWFpbiB9IGZyb20gXCIuL3Rhc2tET01cIjtcbmltcG9ydCB7IHRhc2tFZGl0QnV0dG9uLCBlZGl0VGFzayB9IGZyb20gXCIuL3Rhc2tFdmVudExpc3RlbmVyc1wiO1xuXG5leHBvcnQgY29uc3QgdGFza092ZXJsYXkgPSBkcXMoXCIubmV3VGFza092ZXJsYXlcIik7XG5jb25zdCB0YXNrQ2xvc2UgPSBkcXMoXCIudGFza0Nsb3NlQnV0dG9uXCIpO1xuY29uc3QgdGFza1N1Ym1pdCA9IGRxcyhcIi50YXNrU3VibWl0QnV0dG9uXCIpO1xuXG5leHBvcnQgZnVuY3Rpb24gdGFza092ZXJsYXlMaXN0ZW5lcnMoKXtcbiAgICB0YXNrQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICB0YXNrRm9ybUNsZWFyKCk7XG4gICAgICAgIHRhc2tPdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9IFwicHJvamVjdFNsaWRlVXAgMS41cyBmb3J3YXJkc1wiXG4gICAgfSk7XG4gICAgdGFza1N1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF90YXNrU3VibWl0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF90YXNrU3VibWl0KCl7XG4gICAgdGFza092ZXJsYXkuc3R5bGUuYW5pbWF0aW9uID0gXCJwcm9qZWN0U2xpZGVVcCAxLjVzIGZvcndhcmRzXCJcbiAgICBjb25zb2xlLmxvZyhcInRhc2tFZGl0QnV0dG9uIGJvb2wgdmFsdWU6IFwiICsgdGFza0VkaXRCdXR0b24pO1xuICAgIGlmKHRhc2tFZGl0QnV0dG9uKXtcbiAgICAgICAgLy8gLy8gLy8gLy8gLy9jb25zdCB0YXNrTmFtZTIgPSBnZXRUYXNrTmFtZUxpXG4gICAgICAgIC8vIC8vIC8vIC8vIC8vaW5zZXJ0IGVkaXQgYWxnb3JpdGhtIGhlcmVcbiAgICAgICAgLy8gLy8gLy8gLy8gLy9sZXQgdGFza05hbWUgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICAgIC8vIC8vIC8vIC8vIC8vY29uc29sZS5sb2coXCJ0YXNrTmFtZSBpbiB0YXNrU3VibWl0IHBvb3A6IFwiICsgdGFza05hbWUudGV4dENvbnRlbnQpO1xuICAgICAgICAvL1JFTU9WRSBPTEQgVEFTSyBVU0lORyBBTEdPUklUSE0gRlJPTSBSRU1PVkVUQVNLIFNFQ1RJT04gKGVkaXRUYXNrIGlzIHRhc2sgdG8gYmUgcmVtb3ZlZClcbiAgICAgICAgY29uc3QgbW9kZGVkVGFzayA9IGV4dHJhY3REYXRhRm9yVGFzaygpO1xuICAgICAgICBjb25zdCBwcm9qTmFtZUVkID0gZHFzKFwiLnByb2plY3ROYW1lTWFpblwiKTtcbiAgICAgICAgY29uc3QgcHJvakVkID0gZmluZFByb2plY3RJbkFycihwcm9qTmFtZUVkLnRleHRDb250ZW50KTtcbiAgICAgICAgY2xlYXJUYXNrTWFpbihlZGl0VGFzay50VGl0bGUpO1xuICAgICAgICBwcm9qRWQuZWRpdFRhc2soZWRpdFRhc2sudFRpdGxlKTtcbiAgICAgICAgZGlzcGxheVRhc2tJbk1haW4obW9kZGVkVGFzayk7XG4gICAgICAgIHByb2pFZC5yZW1vdmVMYXN0VGFzaygpO1xuICAgICAgICAvL3Byb2pFZC5yZW1vdmVUYXNrRnJvbUFycihtb2RkZWRUYXNrLnRUaXRsZSk7XG4gICAgICAgIHByb2pFZC5wcmludFRhc2tzKCk7XG4gICAgICAgIC8vIC8vIC8vIC8vIC8vcHJvakVkLmVkaXRUYXNrKHRhc2tOYW1lLnRleHRDb250ZW50KTsvL05PVCBORUVERUQ/P1xuICAgICAgICAvLyAvLyAvLyAvLyAvL3Rhc2tOYW1lLnRleHRDb250ZW50ID0gbW9kZWRUYXNrLnRUaXRsZTsvL05PVCBORUVERUQ/P1xuICAgICAgICAvLyAvLyAvLyAvLyBjaGVja1VMQ2hpbGRyZW5FZGl0VGFzayhlZGl0VGFzayk7XG4gICAgICAgIC8vIC8vIC8vIC8vIHByb2pFZC5yZW1vdmVUYXNrRnJvbUFycihtb2RkZWRUYXNrLnRUaXRsZSk7XG4gICAgICAgIC8vIC8vIC8vIC8vIHRhc2tFZGl0QnV0dG9uID0gZmFsc2U7XG4gICAgICAgIC8vIC8vIC8vIC8vIG1vZGRlZFRhc2sgPSBudWxsO1xuICAgICAgICB0YXNrRWRpdEJ1dHRvbiA9IGZhbHNlO1xuICAgICAgICBjbGVhckV2TGlzKCk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICAgIGNvbnN0IG1hZGVUYXNrID0gZXh0cmFjdERhdGFGb3JUYXNrKCk7XG4gICAgICAgIGlmKG1hZGVUYXNrKXtcbiAgICAgICAgICAgIGRpc3BsYXlUYXNrSW5NYWluKG1hZGVUYXNrKTsvL2N1cnJlbnQgcHJvamVjdCBpcyBhbHJlYWR5IGRldGVjdGVkIGluIGV4dHJhY3REYXRhRm9yVGFzayBmdW5jLi5tYXkgbm90IG5lZWQgcHJvaiBhbmQgdWwgYXMgcGFyYW1zXG4gICAgICAgIH1cbiAgICAgICAgdGFza0Zvcm1DbGVhcigpO1xuICAgICAgICBjbGVhckV2TGlzKCk7ICAgIC8vTkVFRCBUTyBGSU5EIEEgV0FZIFRPIENMRUFSIEVWRU5UTElTVEVORVIgU09NRVdIRVJFIEVMU0U/Pz8/P1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2xlYXJFdkxpcygpe1xuICAgIHRhc2tTdWJtaXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGFza1N1Ym1pdCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0RGF0YUZvclRhc2soKXtcbiAgICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRUaXRsZVwiKS52YWx1ZTtcbiAgICBjb25zdCB0YXNrRGVzYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidERlc2NyaXB0aW9uXCIpLnZhbHVlO1xuICAgIGNvbnN0IHRhc2tEdWVEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0RHVlRGF0ZVwiKS52YWx1ZTtcbiAgICBjb25zdCB0YXNrUHJpbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidFRhc2tQcmlvXCIpLnZhbHVlO1xuICAgIFxuICAgIGNvbnN0IHRlbXAgPSBkcXMoXCIucHJvamVjdE5hbWVNYWluXCIpOy8vU0hPVUxEIE5PVCBCRSBORUVERUQgR0lWRU4gUEFSQU1cbiAgICBjb25zdCB0YXNrUHJvaiA9IHRlbXAudGV4dENvbnRlbnQ7XG5cbiAgICBjb25zdCBmbmRQcm9qID0gZmluZFByb2plY3RJbkFycih0YXNrUHJvaik7XG5cblxuICAgIGlmKHRhc2tUaXRsZSAmJiB0YXNrRHVlRGF0ZSl7XG4gICAgICAgIGNvbnN0IHRhc2tNYWRlID0gZm5kUHJvai5uZXdUYXNrKHRhc2tUaXRsZSwgdGFza0Rlc2MsIHRhc2tEdWVEYXRlLCB0YXNrUHJpbywgZm5kUHJvai50aXRsZSk7XG4gICAgICAgIHRhc2tGb3JtQ2xlYXIoKTtcbiAgICAgICAgcmV0dXJuIHRhc2tNYWRlO1xuICAgIH1lbHNle1xuICAgICAgICBkaXNwbGF5TmVlZFRpdGxlKCk7XG4gICAgICAgIHRhc2tGb3JtQ2xlYXIoKTtcbiAgICAgICAgdGFza092ZXJsYXkuc3R5bGUuYW5pbWF0aW9uID0gXCJwcm9qZWN0U2xpZGVEb3duIDEuNXMgZm9yd2FyZHNcIjtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRhc2tGb3JtQ2xlYXIoKXtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRUaXRsZVwiKS52YWx1ZSA9IFwiXCI7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0RGVzY3JpcHRpb25cIikudmFsdWUgPSBcIlwiO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidER1ZURhdGVcIikudmFsdWUgPSBcIlwiO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidFRhc2tQcmlvXCIpLnZhbHVlID0gXCJTZWxlY3QgT25lXCI7XG59IiwiaW1wb3J0IHsgZHFzIH0gZnJvbSBcIi4vbWVudUV2ZW50TGlzdGVuZXJzXCI7XG5pbXBvcnQgeyBwcm9qQXJyIH0gZnJvbSBcIi4vbWVudUV2ZW50TGlzdGVuZXJzXCI7XG5pbXBvcnQgeyBjbGVhck1haW4gfSBmcm9tIFwiLi9wcm9qZWN0RE9NXCI7XG5pbXBvcnQgeyB0YXNrT3ZlcmxheSwgdGFza092ZXJsYXlMaXN0ZW5lcnMgfSBmcm9tIFwiLi90YXNrRm9ybVwiO1xuaW1wb3J0IHsgcmVtb3ZlUHJvamVjdEZyb21TaWRlYmFyIH0gZnJvbSBcIi4vcHJvamVjdERPTVwiO1xuaW1wb3J0IHsgaW5mb092ZXJsYXksIGluZm9TZWN0aW9uIH0gZnJvbSBcIi4vdGFza0V2ZW50TGlzdGVuZXJzXCI7XG5pbXBvcnQgeyBpbmZvT3ZlcmxheUxpc3RlbmVyIH0gZnJvbSBcIi4vaW5mb0Rlc2NMaXN0ZW5lcnNcIjtcblxuY29uc3QgcHJvak92ZXJsYXkxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXdQcm9qZWN0T3ZlcmxheVwiKTtcbmV4cG9ydCBsZXQgZWRpdEJ1dHRvbkNsaWNrZWQgPSBmYWxzZTtcbmV4cG9ydCBsZXQgY3VyclRpdGxlMiA9IG51bGw7Ly89IGRxcyhcIi5wcm9qZWN0TmFtZU1haW5cIik7XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9qZWN0RUxpc3RlbmVycygpe1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3Rlc3RlcmluZylcbn07XG5cbmV4cG9ydCB2YXIgX3Rlc3RlcmluZyA9IGZ1bmN0aW9uKGUpe1xuICAgIC8vZ28gdGhyb3VoZyBhcnJheSBjb21wYXJpbmcgdGl0bGVcbiAgICAgICAgLy93aGVuIGZvdW5kIGZpbGwgcHJvamVjdEZvcm0gYW5kIGRyb3AgZm9ybSBkb3duIGZvciB1c2VyXG4gICAgICAgIC8vaWYgc3VibWl0IHRoZW4gcmVwbGFjZSBpbmZvIHdpdGggbmV3IGluZm9cbiAgICAgICAgLy9lbHNlIGlmIGNhbmNlbCB0aGVuIGxlYXZlIHByb2plY3QgYXMgaXQgd2FzXG4gICAgICAgIGNvbnN0IGVkaXRCdXR0b24gPSBlLnRhcmdldC5tYXRjaGVzKFwiLnByb2pFZGl0XCIpO1xuICAgICAgICBjb25zdCByZW1vdmVCdXR0b24gPSBlLnRhcmdldC5tYXRjaGVzKFwiLnByb2pSZW1vdmVcIik7XG4gICAgICAgIGNvbnN0IGFkZFRhc2tCdXR0b24gPSBlLnRhcmdldC5tYXRjaGVzKFwiLnByb2pBZGRcIik7XG4gICAgICAgIGNvbnN0IGN1cnJUaXRsZSA9IGRxcyhcIi5wcm9qZWN0TmFtZU1haW5cIik7XG4gICAgICAgIGN1cnJUaXRsZTIgPSBjdXJyVGl0bGU7XG4gICAgICAgIFxuICAgICAgICBpZihlZGl0QnV0dG9uKXsvL3RoaXMgd2lsbCBiZSBkb25lIG9uY2UgJ3JlbW92ZScgaXMgY29tcGxldGVkXG4gICAgICAgICAgICBlZGl0Rm9ybShjdXJyVGl0bGUudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgZWRpdEJ1dHRvbkNsaWNrZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYocmVtb3ZlQnV0dG9uKXtcbiAgICAgICAgICAgIC8vY29uc3QgY3VyclRpdGxlID0gZHFzKFwiLnByb2plY3ROYW1lTWFpblwiKTtcbiAgICAgICAgICAgIHJlbW92ZVByb2plY3RGcm9tU2lkZWJhcihjdXJyVGl0bGUudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgcmVtb3ZlUHJvakFycihjdXJyVGl0bGUudGV4dENvbnRlbnQpOy8vPz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz9cbiAgICAgICAgICAgIGNsZWFyTWFpbigpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjdXJyZW50IHByb2plY3RzIGluIGFycmF5IGFyZTogXCIpO1xuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHByb2pBcnIubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2pBcnJbaV0udGl0bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoYWRkVGFza0J1dHRvbil7XG4gICAgICAgICAgICB0YXNrT3ZlcmxheS5zdHlsZS5hbmltYXRpb24gPSBcInByb2plY3RTbGlkZURvd24gMS41cyBmb3J3YXJkc1wiO1xuICAgICAgICAgICAgdGFza092ZXJsYXlMaXN0ZW5lcnMoKTsvL2FkZCBwcm9qIGFzIHBhcmFtIGhlcmUhISEgZmluZCBwcm9qIG9uIGxpbmUgYmVmb3JlIHRoaXNcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGN1cnJUaXRsZSl7XG4gICAgICAgICAgICBjb25zdCBwcm9qSW5mbyA9IGZpbmRQcm9qZWN0SW5BcnIoY3VyclRpdGxlLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgIGluZm9EZXNjT3ZlcmxheVByb2oocHJvakluZm8pO1xuICAgICAgICB9XG59XG5cbmZ1bmN0aW9uIGluZm9EZXNjT3ZlcmxheVByb2oocHJvail7XG4gICAgaW5mb092ZXJsYXkuc3R5bGUuYW5pbWF0aW9uID0gXCJwcm9qZWN0U2xpZGVEb3duIDEuNXMgZm9yd2FyZHNcIjtcblxuICAgIGluZm9TZWN0aW9uLnRleHRDb250ZW50ID0gXCJERVNDUklQVElPTjogXCIgKyBwcm9qLmRlc2NyaXB0aW9uO1xuICAgIGluZm9PdmVybGF5TGlzdGVuZXIoKTtcbn1cblxuZnVuY3Rpb24gZWRpdEZvcm0ocHJvamVjdFRpdGxlKXsvL3BhcmFtIGlzIGN1cnJlbnQgdGl0bGUgaXQgd2lsbCBmaWxsIHRoZSBpbnB1dCB0aXRsZSBib3hcbiAgICBwcm9qT3ZlcmxheTEuc3R5bGUuYW5pbWF0aW9uID0gJ3Byb2plY3RTbGlkZURvd24gMS41cyBmb3J3YXJkcyc7XG4gICAgY29uc3QgdGl0bGVJbiA9IGRxcyhcIiN0aXRsZVwiKTtcbiAgICB0aXRsZUluLnZhbHVlID0gcHJvamVjdFRpdGxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUHJvakFycih0aXRsZSl7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHByb2pBcnIubGVuZ3RoOyBpKyspe1xuICAgICAgICBpZihwcm9qQXJyW2ldLnRpdGxlID09IHRpdGxlKXtcbiAgICAgICAgICAgIHByb2pBcnIuc3BsaWNlKGksMSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kUHJvamVjdEluQXJyKHRpdGxlKXsvL01JR0hUIE5PVCBORUVEIFRISVMgTUlHSFQgTk9UIE5FRUQgVEhJUyBNSUdIVCBOT1QgTkVFRCBUSElTXG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgcHJvakFyci5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgaWYocHJvakFycltpXS50aXRsZSA9PSB0aXRsZSl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInByb2plY3QgZm91bmRcIik7XG4gICAgICAgICAgICByZXR1cm4gcHJvakFycltpXTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgUmVtb3ZlIGZyb20gJy4uL3NyYy9pbWdzL2Nsb3NlLnBuZyc7XG5pbXBvcnQgQ3JlYXRlIGZyb20gJy4uL3NyYy9pbWdzL2FkZC5wbmcnO1xuaW1wb3J0IEVkaXQgZnJvbSAnLi4vc3JjL2ltZ3MvZWRpdC5wbmcnO1xuaW1wb3J0IHsgZHFzLCBwcm9qQXJyIH0gZnJvbSAnLi9tZW51RXZlbnRMaXN0ZW5lcnMnO1xuaW1wb3J0IHsgcHJvamVjdEVMaXN0ZW5lcnMgfSBmcm9tICcuL3Byb2plY3RFdmVudExpc3RlbmVycyc7XG5pbXBvcnQgeyBfdGVzdGVyaW5nIH0gZnJvbSAnLi9wcm9qZWN0RXZlbnRMaXN0ZW5lcnMnO1xuaW1wb3J0IHsgZGlzcGxheVRhc2tJbk1haW4gfSBmcm9tICcuL3Rhc2tET00nO1xuXG5jb25zdCBtYWluU2VjID0gZHFzKFwiLnByb2plY3RTZWN0aW9uXCIpO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkUHJvamVjdFRvU2lkZWJhcihwcm9qZWN0VGl0bGUpe1xuICAgIGNvbnN0IHByb2pTaWRlID0gZHFzKFwiLnNpZGViYXJQcm9qZWN0XCIpO1xuICAgIGxldCBwcm9qVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgcHJvalRpdGxlLnRleHRDb250ZW50ID0gcHJvamVjdFRpdGxlO1xuICAgIHByb2pUaXRsZS5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0TmFtZVNpZGViYXInKTtcbiAgICBwcm9qU2lkZS5hcHBlbmRDaGlsZChwcm9qVGl0bGUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVByb2plY3RGcm9tU2lkZWJhcihwcm9qZWN0VGl0bGUpe1xuICAgIGNvbnN0IHNpZGViYXJQcm9qID0gZHFzKFwiLnNpZGViYXJQcm9qZWN0XCIpO1xuICAgIGNvbnN0IHNpZGViYXJQcm9qQ2hpbGRyZW4gPSBzaWRlYmFyUHJvai5jaGlsZHJlbjtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgc2lkZWJhclByb2pDaGlsZHJlbi5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGlmKHNpZGViYXJQcm9qQ2hpbGRyZW5baV0udGV4dENvbnRlbnQgPT0gcHJvamVjdFRpdGxlKXtcbiAgICAgICAgICAgIHNpZGViYXJQcm9qLnJlbW92ZUNoaWxkKHNpZGViYXJQcm9qQ2hpbGRyZW5baV0pO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGVkaXRQcm9qZWN0SW5TaWRlYmFyKHByb2plY3RUaXRsZSl7XG4gICAgY29uc3Qgc2lkZWJhclByb2ogPSBkcXMoXCIuc2lkZWJhclByb2plY3RcIik7XG4gICAgY29uc3Qgc2lkZWJhclByb2pDaGlsZHJlbiA9IHNpZGViYXJQcm9qLmNoaWxkcmVuO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaWRlYmFyUHJvakNoaWxkcmVuLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgaWYoc2lkZWJhclByb2pDaGlsZHJlbltpXS50ZXh0Q29udGVudCA9PSBwcm9qZWN0VGl0bGUpe1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcImZvdW5kIHNpZGViYXIgcHJvamVjdCBuYW1lZCBcIiArIHNpZGViYXJQcm9qQ2hpbGRyZW5baV0udGV4dENvbnRlbnQpOyBERUJVR1xuICAgICAgICAgICAgc2lkZWJhclByb2pDaGlsZHJlbltpXS50ZXh0Q29udGVudCA9IHByb2pBcnJbc2lkZWJhclByb2pDaGlsZHJlbi5sZW5ndGhdLnRpdGxlOy8vcHJvakFycltzaWRlYmFyUHJvakNoaWxkcmVuLmxlbmd0aC0xXS50aXRsZVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZWRpdFByb2plY3ROYW1lTWFpbigpe1xuICAgIGNvbnN0IE9HUHJvak5hbWUgPSBkcXMoXCIucHJvamVjdE5hbWVNYWluXCIpO1xuICAgIE9HUHJvak5hbWUudGV4dENvbnRlbnQgPSBwcm9qQXJyW3Byb2pBcnIubGVuZ3RoLTFdLnRpdGxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheVByb2plY3RJbk1haW4ocHJvamVjdCl7XG4gICAgY2xlYXJNYWluKCk7XG4gICAgY29uc3QgcHJvakRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgY29uc3QgdGFza1NlY1VMID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICB0YXNrU2VjVUwuY2xhc3NMaXN0LmFkZChcInRvZG9VTFwiKVxuICAgIFxuICAgIGNvbnN0IHByb2pDaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgcHJvakNoZWNrYm94LnR5cGUgPSBcImNoZWNrYm94XCI7XG4gICAgcHJvakNoZWNrYm94LmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0Q2hlY2tib3hcIik7XG5cbiAgICBcbiAgICBjb25zdCBwcm9qTmFtZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgaWYocHJvamVjdC50aXRsZS5sZW5ndGggPiAzMCl7XG4gICAgICAgIGxldCBtYWluTW9kUHJvalRpdGxlID0gcHJvamVjdC50aXRsZS5zbGljZSgwLDMxKTtcbiAgICAgICAgcHJvak5hbWVTcGFuLnRleHRDb250ZW50ID0gbWFpbk1vZFByb2pUaXRsZSArIFwiLi4uXCI7XG4gICAgfWVsc2V7XG4gICAgICAgIHByb2pOYW1lU3Bhbi50ZXh0Q29udGVudCA9IHByb2plY3QudGl0bGU7XG4gICAgfVxuICAgIHByb2pOYW1lU3Bhbi5jbGFzc0xpc3QuYWRkKFwicHJvamVjdE5hbWVNYWluXCIpO1xuXG4gICAgXG4gICAgY29uc3QgYnV0dG9uQ29udCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIFxuICAgIGNvbnN0IGFkZERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGVkaXREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCByZW1vdmVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIGNvbnN0IGFkZEljb24gPSBuZXcgSW1hZ2UoKTtcbiAgICBhZGRJY29uLnNyYyA9IENyZWF0ZTtcbiAgICBhZGRJY29uLmNsYXNzTGlzdC5hZGQoJ3Byb2pBZGQnKTtcblxuICAgIGNvbnN0IGVkaXRJY29uID0gbmV3IEltYWdlKCk7XG4gICAgZWRpdEljb24uc3JjID0gRWRpdDtcbiAgICBlZGl0SWNvbi5jbGFzc0xpc3QuYWRkKCdwcm9qRWRpdCcpO1xuXG4gICAgY29uc3QgcmVtSWNvbiA9IG5ldyBJbWFnZSgpO1xuICAgIHJlbUljb24uc3JjID0gUmVtb3ZlO1xuICAgIHJlbUljb24uY2xhc3NMaXN0LmFkZCgncHJvalJlbW92ZScpO1xuXG4gICAgYWRkRGl2LmFwcGVuZENoaWxkKGFkZEljb24pO1xuICAgIGVkaXREaXYuYXBwZW5kQ2hpbGQoZWRpdEljb24pO1xuICAgIHJlbW92ZURpdi5hcHBlbmRDaGlsZChyZW1JY29uKTtcbiAgICBcbiAgICBidXR0b25Db250LmFwcGVuZENoaWxkKGFkZERpdik7XG4gICAgYnV0dG9uQ29udC5hcHBlbmRDaGlsZChlZGl0RGl2KTtcbiAgICBidXR0b25Db250LmFwcGVuZENoaWxkKHJlbW92ZURpdik7XG4gICAgYnV0dG9uQ29udC5jbGFzc0xpc3QuYWRkKFwicHJvamVjdE9wdGlvbnNcIik7XG5cbiAgICBwcm9qRGl2LmFwcGVuZENoaWxkKHByb2pDaGVja2JveCk7XG4gICAgcHJvakRpdi5hcHBlbmRDaGlsZChwcm9qTmFtZVNwYW4pO1xuICAgIHByb2pEaXYuYXBwZW5kQ2hpbGQoYnV0dG9uQ29udCk7XG4gICAgcHJvakRpdi5jbGFzc0xpc3QuYWRkKFwicHJvamVjdFwiKTtcblxuICAgIG1haW5TZWMuYXBwZW5kQ2hpbGQocHJvakRpdik7XG4gICAgbWFpblNlYy5hcHBlbmRDaGlsZCh0YXNrU2VjVUwpO1xuICAgIFxuICAgIC8vY2hlY2sgZm9yIHRhc2tzIHdpdGggYSBsb29wIGFuZCBkaXNwbGF5IGVhY2hcbiAgICBjaGVja0ZvclRhc2tzKHByb2plY3QpO1xuXG4gICAgLy9jYWxsIGV2ZW50TGlzdGVuZXIgaGVyZVxuICAgIHByb2plY3RFTGlzdGVuZXJzKCk7Ly9XSUxMIEhBVkUgVE8gQUREIEVWRU5UIExJU1RFTkVSUyBGT1IgVEFTS1MgSEVSRT8/P1xufVxuXG5mdW5jdGlvbiBjaGVja0ZvclRhc2tzKHByb2ope1xuICAgIC8vZ2l2ZW4gcHJvaiBhcyBwYXJhbSB3ZSB3aWxsIGNoZWNrIGlmIGl0IGNvbnRhaW5zIGFueSB0YXNrcyB0aGF0IG5lZWQgdG8gYmUgY3JlYXRlZFxuICAgIGNvbnN0IHRhc2tBcnIgPSBwcm9qLnRvRG9MaXN0O1xuICAgIGlmKHRhc2tBcnIpe1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGFza0Fyci5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBkaXNwbGF5VGFza0luTWFpbih0YXNrQXJyW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyTWFpbigpe1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3Rlc3RlcmluZyk7XG4gICAgd2hpbGUobWFpblNlYy5maXJzdENoaWxkKXtcbiAgICAgICAgbWFpblNlYy5yZW1vdmVDaGlsZChtYWluU2VjLmZpcnN0Q2hpbGQpXG4gICAgfVxufSIsImltcG9ydCBNZW51IGZyb20gJy4uL3NyYy9pbWdzL21lbnUucG5nJ1xuaW1wb3J0IEJyYW5kIGZyb20gJy4uL3NyYy9pbWdzL1dvcmtlckFudHNNb2QucG5nJztcbmltcG9ydCBDbG9zZSBmcm9tICcuLi9zcmMvaW1ncy9jbG9zZS5wbmcnO1xuaW1wb3J0IENyZWF0ZSBmcm9tICcuLi9zcmMvaW1ncy9hZGQucG5nJztcbmltcG9ydCB7IGRpc3BsYXlQcm9qZWN0SW5NYWluIH0gZnJvbSAnLi9wcm9qZWN0RE9NJztcbmltcG9ydCB7IGZpbmRQcm9qZWN0SW5BcnIgfSBmcm9tICcuL3Byb2plY3RFdmVudExpc3RlbmVycyc7XG5cbi8vSSBORUVEIFRPIEFERCBBIEdMT0JBTCBWQVJJQUJMRSBBUlJBWSBUSEFUIFNUT1JFUyBBTEwgVEhFIFBST0pFQ1RTIEhFUkVcbmV4cG9ydCBsZXQgcHJvakFyciA9IFtdO1xuXG5leHBvcnQgZnVuY3Rpb24gZHFzKGMpe1xuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWVudUV2ZW50TGlzdGVuKCl7XG4gICAgY29uc3QgbWVudUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudUNvbnRhaW5lclwiKTtcbiAgICBjb25zdCBtYWluTG9nb0NvbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW5Mb2dvXCIpO1xuICAgIGNvbnN0IGNsb3NlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51Q2xvc2VcIik7XG4gICAgY29uc3QgY3JlYXRlUHJvakNvbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNyZWF0ZVByb2pcIik7XG4gICAgXG4gICAgY29uc3QgbWVudUljb24gPSBuZXcgSW1hZ2UoKTtcbiAgICBtZW51SWNvbi5zcmMgPSBNZW51O1xuICAgIG1lbnVJY29uLmNsYXNzTGlzdC5hZGQoJ21haW4tbWVudS1sb2dvJyk7XG5cbiAgICBjb25zdCBtYWluTG9nb0ltZyA9IG5ldyBJbWFnZSgpO1xuICAgIG1haW5Mb2dvSW1nLnNyYyA9IEJyYW5kO1xuICAgIG1haW5Mb2dvSW1nLmNsYXNzTGlzdC5hZGQoJ21haW4tbG9nbycpO1xuXG4gICAgY29uc3QgY2xvc2VJY29uID0gbmV3IEltYWdlKCk7XG4gICAgY2xvc2VJY29uLnNyYyA9IENsb3NlO1xuICAgIGNsb3NlSWNvbi5jbGFzc0xpc3QuYWRkKCdtZW51Q2xvc2UnKTtcblxuICAgIGNvbnN0IGNyZWF0ZVByb2pJY29uID0gbmV3IEltYWdlKCk7XG4gICAgY3JlYXRlUHJvakljb24uc3JjID0gQ3JlYXRlO1xuICAgIGNyZWF0ZVByb2pJY29uLmNsYXNzTGlzdC5hZGQoJ2FkZFByb2pCdXR0b24nKTtcblxuICAgIG1lbnVDb250YWluZXIuYXBwZW5kQ2hpbGQobWVudUljb24pO1xuICAgIG1haW5Mb2dvQ29udC5hcHBlbmRDaGlsZChtYWluTG9nb0ltZyk7XG4gICAgY2xvc2VDb250YWluZXIuYXBwZW5kQ2hpbGQoY2xvc2VJY29uKTtcbiAgICBjcmVhdGVQcm9qQ29udC5hcHBlbmRDaGlsZChjcmVhdGVQcm9qSWNvbik7XG5cbiAgICBjb25zdCBzaWRlQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaWRlYmFyLW1lbnVcIik7XG4gICAgY29uc3QgcHJvak92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ld1Byb2plY3RPdmVybGF5XCIpO1xuXG4gICAgbWVudUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHNpZGVCYXIuc3R5bGUuYW5pbWF0aW9uID0gJ21lbnVTbGlkZU9uIDEuNXMgZm9yd2FyZHMnO1xuICAgIH0pO1xuICAgIGNsb3NlQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgc2lkZUJhci5zdHlsZS5hbmltYXRpb24gPSAnbWVudVNsaWRlQ2xvc2UgMS41cyBmb3J3YXJkcyc7XG4gICAgfSk7XG4gICAgY3JlYXRlUHJvakNvbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICBzaWRlQmFyLnN0eWxlLmFuaW1hdGlvbiA9ICdtZW51U2xpZGVDbG9zZSAxLjVzIGZvcndhcmRzJztcbiAgICAgICAgcHJvak92ZXJsYXkuc3R5bGUuYW5pbWF0aW9uID0gJ3Byb2plY3RTbGlkZURvd24gMS41cyBmb3J3YXJkcyc7XG4gICAgfSk7XG4gICAgc2lkZUJhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGlmKGUudGFyZ2V0LnRhZ05hbWUgPT09ICdTUEFOJyl7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInRoZSBmb2xsb3dpbmcgaXMgZS50YXJnZXQudmFsdWVcIik7REVCVUdERUJVR0RFQlVHXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlLnRhcmdldC50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICBjb25zdCBkaXNwUHJvaiA9IGZpbmRQcm9qZWN0SW5BcnIoZS50YXJnZXQudGV4dENvbnRlbnQpXG4gICAgICAgICAgICBkaXNwbGF5UHJvamVjdEluTWFpbihkaXNwUHJvaik7XG4gICAgICAgIH1cbiAgICB9KTtcbn0iLCJpbXBvcnQgeyBtZW51RXZlbnRMaXN0ZW4sIHByb2pBcnIgfSBmcm9tIFwiLi9tZW51RXZlbnRMaXN0ZW5lcnNcIjtcbmltcG9ydCB7IGFkZFByb2plY3RUb1NpZGViYXIsIGRpc3BsYXlQcm9qZWN0SW5NYWluIH0gZnJvbSBcIi4vcHJvamVjdERPTVwiO1xuaW1wb3J0IHsgcHJvamVjdE92ZXJsYXlTdHVmZiB9IGZyb20gXCIuL3Byb2plY3RGb3JtXCI7XG5pbXBvcnQgeyB0YXNrT3ZlcmxheUxpc3RlbmVycywgX3Rhc2tTdWJtaXQgfSBmcm9tIFwiLi90YXNrRm9ybVwiO1xuaW1wb3J0IHsgcHJvamVjdEVMaXN0ZW5lcnMgfSBmcm9tIFwiLi9wcm9qZWN0RXZlbnRMaXN0ZW5lcnNcIjtcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0Q2xhc3NcIjtcblxubWVudUV2ZW50TGlzdGVuKCk7XG5wcm9qZWN0T3ZlcmxheVN0dWZmKCk7XG5jb25zdCBkZWZQcm9qID0gbmV3IFByb2plY3QoXCJkZWZhdWx0UHJvamVjdFwiLCBcIlRoaXMgaXMgYSBkZWZhdWx0IHByb2plY3QuIFlvdSBjYW4gYWxzbyBjcmVhdGUgeW91ciBvd24gOilcIik7XG5wcm9qQXJyWzBdID0gZGVmUHJvajtcbmRpc3BsYXlQcm9qZWN0SW5NYWluKGRlZlByb2opO1xuYWRkUHJvamVjdFRvU2lkZWJhcihcImRlZmF1bHRQcm9qZWN0XCIpO1xuLy9wcm9qZWN0RUxpc3RlbmVycygpOy8vVEhJUyBXQVMgQ09NTUVOVEVEIE9VVFxuLy90YXNrT3ZlcmxheUxpc3RlbmVycygpOy8vVEhJUyBXQVMgQ09NTUVOVEVEIE9VVCJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZyIsImdsb2JhbFRoaXMiLCJ0aGlzIiwiRnVuY3Rpb24iLCJlIiwid2luZG93Iiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiZG9jdW1lbnQiLCJjdXJyZW50U2NyaXB0Iiwic3JjIiwic2NyaXB0cyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibGVuZ3RoIiwiaSIsIkVycm9yIiwicmVwbGFjZSIsInAiLCJUYXNrIiwiY29uc3RydWN0b3IiLCJ0VGl0bGUiLCJ0RGVzYyIsInREdWUiLCJ0UHJpbyIsInRQcm9qIiwibmV3dFRpdGxlIiwiX3RUaXRsZSIsIm5ld3REZXNjIiwiX3REZXNjIiwibmV3dER1ZSIsIl90RHVlIiwibmV3dFByaW8iLCJfdFByaW8iLCJuZXd0UHJvaiIsIl90UHJvaiIsIlByb2plY3QiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidG9Eb3MiLCJnZXRMYXN0VGFzayIsInJlbW92ZUxhc3RUYXNrIiwic3BsaWNlIiwiZWRpdFRhc2siLCJ0YXNrTmFtZSIsIm5ld1Rhc2siLCJUdGl0bGUiLCJUZGVzYyIsIlRkdWUiLCJUcHJpbyIsIlRwcm9qIiwidCIsInB1c2giLCJmaW5kVGFzayIsInRpdGxlTmFtZSIsInJlbW92ZVRhc2tGcm9tQXJyIiwicHJpbnRUYXNrcyIsImNvbnNvbGUiLCJsb2ciLCJudW1PZlRhc2tzIiwiX3RpdGxlIiwiX2Rlc2NyaXB0aW9uIiwidG9Eb0xpc3QiLCJuZXdUaXRsZSIsIm5ld0Rlc2MiLCJwcm9qT3ZlcmxheSIsInF1ZXJ5U2VsZWN0b3IiLCJkaXNwbGF5TmVlZFRpdGxlIiwiZXJyb3JPdmVybGF5Iiwic3R5bGUiLCJhbmltYXRpb24iLCJzZXRUaW1lb3V0IiwicHJvamVjdEZvcm1DbGVhciIsImdldEVsZW1lbnRCeUlkIiwidmFsdWUiLCJpbmZvT3ZlcmxheUxpc3RlbmVyIiwiZHFzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9pbmZvVGVzdGVyaW5nIiwiaW5mb092ZXJsYXkiLCJpbmZvU2VjdGlvbiIsInRleHRDb250ZW50IiwidGFza0VkaXRCdXR0b24iLCJ0YXNrUmVtQnV0dG9uIiwiX3Rhc2tUZXN0ZXJpbmciLCJ0YXJnZXQiLCJwYXJlbnRFbGVtZW50IiwibWF0Y2hlcyIsInByb2pFZCIsImZpbmRQcm9qZWN0SW5BcnIiLCJ0YXNrIiwidGFza092ZXJsYXkiLCJ0YXNrVGl0bGVGb3JtIiwidGFza0RhdGVGb3JtIiwidGFza092ZXJsYXlMaXN0ZW5lcnMiLCJlZGl0VGFza0Zvcm0iLCJwcm9qUmVtIiwiY2xlYXJUYXNrTWFpbiIsInRhc2tOYW1lMiIsImRpc3BsYXlUYXNrSW5NYWluIiwicHJvalVMIiwidGFza0xJIiwiY3JlYXRlRWxlbWVudCIsInRpdGxlRGlzcCIsImNsYXNzTGlzdCIsImFkZCIsImJ1dHRvbkRpdiIsInRhc2tDaGVja2JveCIsInR5cGUiLCJ0YXNrRWRpdERpdiIsInRhc2tSZW1vdmVEaXYiLCJ0YXNrRWRpdEljb24iLCJJbWFnZSIsInRhc2tSZW1vdmVJY29uIiwiYXBwZW5kQ2hpbGQiLCJ1bFBhcmVudCIsImxpVGFza0NoaWxkcmVuIiwiY2hpbGRyZW4iLCJyZW1vdmVDaGlsZCIsInRhc2tDbG9zZSIsInRhc2tTdWJtaXQiLCJ0YXNrRm9ybUNsZWFyIiwiX3Rhc2tTdWJtaXQiLCJtb2RkZWRUYXNrIiwiZXh0cmFjdERhdGFGb3JUYXNrIiwiY2xlYXJFdkxpcyIsIm1hZGVUYXNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhc2tUaXRsZSIsInRhc2tEZXNjIiwidGFza0R1ZURhdGUiLCJ0YXNrUHJpbyIsImZuZFByb2oiLCJ0YXNrTWFkZSIsInByb2pPdmVybGF5MSIsImVkaXRCdXR0b25DbGlja2VkIiwiY3VyclRpdGxlMiIsIl90ZXN0ZXJpbmciLCJlZGl0QnV0dG9uIiwicmVtb3ZlQnV0dG9uIiwiYWRkVGFza0J1dHRvbiIsImN1cnJUaXRsZSIsInByb2plY3RUaXRsZSIsInNpZGViYXJQcm9qIiwic2lkZWJhclByb2pDaGlsZHJlbiIsInJlbW92ZVByb2plY3RGcm9tU2lkZWJhciIsInByb2pBcnIiLCJyZW1vdmVQcm9qQXJyIiwiY2xlYXJNYWluIiwicHJvaiIsImluZGV4IiwibWFpblNlYyIsImFkZFByb2plY3RUb1NpZGViYXIiLCJwcm9qU2lkZSIsInByb2pUaXRsZSIsImRpc3BsYXlQcm9qZWN0SW5NYWluIiwicHJvamVjdCIsInByb2pEaXYiLCJ0YXNrU2VjVUwiLCJwcm9qQ2hlY2tib3giLCJwcm9qTmFtZVNwYW4iLCJtYWluTW9kUHJvalRpdGxlIiwic2xpY2UiLCJidXR0b25Db250IiwiYWRkRGl2IiwiZWRpdERpdiIsInJlbW92ZURpdiIsImFkZEljb24iLCJlZGl0SWNvbiIsInJlbUljb24iLCJ0YXNrQXJyIiwiY2hlY2tGb3JUYXNrcyIsImZpcnN0Q2hpbGQiLCJjIiwibWVudUNvbnRhaW5lciIsIm1haW5Mb2dvQ29udCIsImNsb3NlQ29udGFpbmVyIiwiY3JlYXRlUHJvakNvbnQiLCJtZW51SWNvbiIsIm1haW5Mb2dvSW1nIiwiY2xvc2VJY29uIiwiY3JlYXRlUHJvakljb24iLCJzaWRlQmFyIiwidGFnTmFtZSIsIm1lbnVFdmVudExpc3RlbiIsImNsb3NlQnV0dG9uIiwic3VibWl0QnV0dG9uIiwicHJvamVjdFBhcmFtIiwidGl0bGVJbnB1dCIsImRlc2NJbnB1dCIsInByb2plY3RNYWRlIiwiZXh0cmFjdERhdGFGb3JQcm9qZWN0IiwicmVwbGFjZVRpdGxlIiwiZWRpdFByb2plY3RJbkFyciIsImVkaXRQcm9qZWN0SW5TaWRlYmFyIiwicHJvamVjdE92ZXJsYXlTdHVmZiIsImRlZlByb2oiXSwic291cmNlUm9vdCI6IiJ9