(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var o=n.getElementsByTagName("script");if(o.length)for(var i=o.length-1;i>-1&&!e;)e=o[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e=t.p+"abbfad808c2786a6a2d4.png",n=t.p+"986e98635b18601755cf.png",o=t.p+"177a54134d0bd5aefd06.png",i=t.p+"edb755c23d1ebcf9c7a4.png",s=t.p+"c9c7160b568bb10d504c.png";class c{constructor(t,e,n,o,i){this.tTitle=t,this.tDesc=e,this.tDue=n,this.tPrio=o,this.tProj=i}set tTitle(t){this._tTitle=t}set tDesc(t){this._tDesc=t}set tDue(t){this._tDue=t}set tPrio(t){this._tPrio=t}set tProj(t){this._tProj=t}get tTitle(){return this._tTitle}get tDesc(){return this._tDesc}get tDue(){return this._tDue}get tPrio(){return this._tPrio}get tProj(){return this._tProj}}class r{constructor(t,e){this.title=t,this.description=e,this.toDos=[]}newTask(t,e,n,o,i){let s=new c(t,e,n,o,i);return this.toDos.push(s),s}findTask(t){for(var e=0;e<this.toDos.length;e++)if(this.toDos[e].tTitle==t)return this.toDos[e]}removeTaskFromArr(t){for(var e=0;e<this.toDos.length;e++)this.toDos[e].tTitle==t&&this.toDos.splice(e,1)}printTasks(){console.log("current tasks in project: ");for(var t=0;t<this.toDos.length;t++)console.log(this.toDos[t].tTitle)}get numOfTasks(){return this.toDos.length}get title(){return this._title}get description(){return this._description}get toDoList(){return this.toDos}set title(t){this._title=t}set description(t){this._description=t}}const l=document.querySelector(".newProjectOverlay");function a(){const t=document.querySelector(".errorProjectOverlay");t.style.animation="projectSlideDown 1.5s forwards",setTimeout((function(){t.style.animation="projectSlideUp 1.5s forwards"}),2500)}function d(){document.getElementById("title").value="",document.getElementById("description").value=""}let u=!1,m=!1;var p=function(t){const e=t.target.parentElement.parentElement.parentElement.textContent;if(t.target.matches(".taskProjEdit"))u=!0,console.log(e),function(t){f.style.animation="projectSlideDown 1.5s forwards";const e=x("#tTitle"),n=x("#tDueDate");e.value=t.tTitle,n.value=t.tDue}(k(x(".projectNameMain").textContent).findTask(e));else if(t.target.matches(".taskProjRemove")){m=!0,console.log(e);const t=k(x(".projectNameMain").textContent);t.removeTaskFromArr(e),t.printTasks(),function(t){const e=x(".todoUL"),n=e.children;for(let o=0;o<n.length;o++)n[o].textContent==t&&e.removeChild(n[o])}(e)}};function h(t){const e=document.querySelector(".todoUL"),n=document.createElement("li"),i=document.createElement("div");i.textContent=t.tDue,i.classList.add("dateTaskDisp");const c=document.createElement("div"),r=document.createElement("input");r.type="checkbox";const l=document.createElement("input");l.type="date",l.value=t.tDue;const a=document.createElement("div"),d=document.createElement("div"),u=new Image;u.src=s,u.classList.add("taskProjEdit");const m=new Image;m.src=o,m.classList.add("taskProjRemove"),a.appendChild(u),d.appendChild(m),n.textContent=t.tTitle,c.appendChild(a),c.appendChild(d),c.appendChild(r),c.classList.add("taskButtons"),n.appendChild(c),n.appendChild(l),n.classList.add("todo"),e.appendChild(n),document.addEventListener("click",p)}const f=x(".newTaskOverlay"),g=x(".taskCloseButton"),v=x(".taskSubmitButton");function C(){u&&(u=!1),f.style.animation="projectSlideUp 1.5s forwards";const t=function(t){const e=document.getElementById("tTitle").value,n=document.getElementById("tDescription").value,o=document.getElementById("tDueDate").value,i=document.getElementById("tTaskPrio").value,s=k(x(".projectNameMain").textContent);if(e&&o){const t=s.newTask(e,n,o,i,s.title);return j(),t}return a(),j(),void(f.style.animation="projectSlideDown 1.5s forwards")}();t&&h(t),j(),v.removeEventListener("click",C)}function j(){document.getElementById("tTitle").value="",document.getElementById("tDescription").value="",document.getElementById("tDueDate").value="",document.getElementById("tTaskPrio").value="Select One"}const y=document.querySelector(".newProjectOverlay");let w=!1,E=null;var D=function(t){const e=t.target.matches(".projEdit"),n=t.target.matches(".projRemove"),o=t.target.matches(".projAdd"),i=x(".projectNameMain");if(E=i,e)s=i.textContent,y.style.animation="projectSlideDown 1.5s forwards",x("#title").value=s,w=!0;else if(n){!function(t){const e=x(".sidebarProject"),n=e.children;for(let o=0;o<n.length;o++)n[o].textContent==t&&e.removeChild(n[o])}(i.textContent),function(t){for(let e=0;e<b.length;e++)b[e].title==t&&b.splice(e,1)}(i.textContent),P(),console.log("current projects in array are: ");for(let t=0;t<b.length;t++)console.log(b[t].title)}else o&&(f.style.animation="projectSlideDown 1.5s forwards",g.addEventListener("click",(function(){j(),f.style.animation="projectSlideUp 1.5s forwards"})),v.addEventListener("click",C));var s};function k(t){let e=0;for(let n=0;n<b.length;n++)if(e=n,b[n].title==t)return console.log("project found"),b[n]}const L=x(".projectSection");function S(t){const e=x(".sidebarProject");let n=document.createElement("span");n.textContent=t,n.classList.add("projectNameSidebar"),e.appendChild(n)}function T(t){P();const e=document.createElement("div"),n=document.createElement("ul");n.classList.add("todoUL");const c=document.createElement("input");c.type="checkbox",c.classList.add("projectCheckbox");const r=document.createElement("span");if(t.title.length>30){let e=t.title.slice(0,31);r.textContent=e+"..."}else r.textContent=t.title;r.classList.add("projectNameMain");const l=document.createElement("div"),a=document.createElement("div"),d=document.createElement("div"),u=document.createElement("div"),m=new Image;m.src=i,m.classList.add("projAdd");const p=new Image;p.src=s,p.classList.add("projEdit");const f=new Image;f.src=o,f.classList.add("projRemove"),a.appendChild(m),d.appendChild(p),u.appendChild(f),l.appendChild(a),l.appendChild(d),l.appendChild(u),l.classList.add("projectOptions"),e.appendChild(c),e.appendChild(r),e.appendChild(l),e.classList.add("project"),L.appendChild(e),L.appendChild(n),function(t){const e=t.toDoList;if(e)for(var n=0;n<e.length;n++)h(e[n])}(t),document.addEventListener("click",D)}function P(){for(document.removeEventListener("click",D);L.firstChild;)L.removeChild(L.firstChild)}let b=[];function x(t){return document.querySelector(t)}!function(){const t=document.querySelector(".menuContainer"),s=document.querySelector(".mainLogo"),c=document.querySelector(".menuClose"),r=document.querySelector(".createProj"),l=new Image;l.src=e,l.classList.add("main-menu-logo");const a=new Image;a.src=n,a.classList.add("main-logo");const d=new Image;d.src=o,d.classList.add("menuClose");const u=new Image;u.src=i,u.classList.add("addProjButton"),t.appendChild(l),s.appendChild(a),c.appendChild(d),r.appendChild(u);const m=document.querySelector(".sidebar-menu"),p=document.querySelector(".newProjectOverlay");t.addEventListener("click",(function(){m.style.animation="menuSlideOn 1.5s forwards"})),c.addEventListener("click",(function(){m.style.animation="menuSlideClose 1.5s forwards"})),r.addEventListener("click",(function(){m.style.animation="menuSlideClose 1.5s forwards",p.style.animation="projectSlideDown 1.5s forwards"})),m.addEventListener("click",(t=>{"SPAN"===t.target.tagName&&T(k(t.target.textContent))}))}(),function(){const t=document.querySelector(".closeButton"),e=document.querySelector(".submitButton");t.addEventListener("click",(function(){l.style.animation="projectSlideUp 1.5s forwards",d()})),e.addEventListener("click",(function(){l.style.animation="projectSlideUp 1.5s forwards";const t=function(){const t=document.getElementById("title").value;let e=document.getElementById("description").value;if(t){const n=new r(t,e);return b.push(n),n}return a(),d(),void(l.style.animation="projectSlideDown 1.5s forwards")}();w?(function(t){for(let e=0;e<b.length;e++)b[e].title==t&&(b[e].title=b[b.length-1].title,b[e].description=b[b.length-1].description)}(E.textContent),function(t){const e=x(".sidebarProject").children;for(let n=0;n<e.length;n++)e[n].textContent==t&&(e[n].textContent=b[e.length].title)}(E.textContent),x(".projectNameMain").textContent=b[b.length-1].title,b.splice(b.length-1,1),w=!1):(t&&(S(t.title),T(t)),d())}))}();const I=new r("defaultProject","This is a default project. You can also create your own :)");b[0]=I,T(I),S("defaultProject")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T3pCQW9ILEdBQ0EsTUFBTUMsRUFBVSxJQUFJckosRUFBUSxpQkFBa0IsOERBQzlDb0csRUFBUSxHQUFLaUQsRUFDYnpDLEVBQXFCeUMsR0FDckI1QyxFQUFvQixpQiIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW50b2RvbGlzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9vZGludG9kb2xpc3Qvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9vZGludG9kb2xpc3Qvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vb2RpbnRvZG9saXN0Ly4vc3JjL3Rhc2tDbGFzcy5qcyIsIndlYnBhY2s6Ly9vZGludG9kb2xpc3QvLi9zcmMvcHJvamVjdENsYXNzLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy9wcm9qZWN0Rm9ybS5qcyIsIndlYnBhY2s6Ly9vZGludG9kb2xpc3QvLi9zcmMvdGFza0V2ZW50TGlzdGVuZXJzLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy90YXNrRE9NLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy90YXNrRm9ybS5qcyIsIndlYnBhY2s6Ly9vZGludG9kb2xpc3QvLi9zcmMvcHJvamVjdEV2ZW50TGlzdGVuZXJzLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy9wcm9qZWN0RE9NLmpzIiwid2VicGFjazovL29kaW50b2RvbGlzdC8uL3NyYy9tZW51RXZlbnRMaXN0ZW5lcnMuanMiLCJ3ZWJwYWNrOi8vb2RpbnRvZG9saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSB7XG5cdFx0XHR2YXIgaSA9IHNjcmlwdHMubGVuZ3RoIC0gMTtcblx0XHRcdHdoaWxlIChpID4gLTEgJiYgIXNjcmlwdFVybCkgc2NyaXB0VXJsID0gc2NyaXB0c1tpLS1dLnNyYztcblx0XHR9XG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImV4cG9ydCBjbGFzcyBUYXNre1xuICAgIGNvbnN0cnVjdG9yKHRUaXRsZSwgdERlc2MsIHREdWUsIHRQcmlvLCB0UHJvail7XG4gICAgICAgIHRoaXMudFRpdGxlID0gdFRpdGxlO1xuICAgICAgICB0aGlzLnREZXNjID0gdERlc2M7XG4gICAgICAgIHRoaXMudER1ZSA9IHREdWU7XG4gICAgICAgIHRoaXMudFByaW8gPSB0UHJpbztcbiAgICAgICAgdGhpcy50UHJvaiA9IHRQcm9qO1xuICAgIH1cbiAgICBzZXQgdFRpdGxlKG5ld3RUaXRsZSl7XG4gICAgICAgIHRoaXMuX3RUaXRsZSA9IG5ld3RUaXRsZTtcbiAgICB9XG4gICAgc2V0IHREZXNjKG5ld3REZXNjKXtcbiAgICAgICAgdGhpcy5fdERlc2MgPSBuZXd0RGVzYztcbiAgICB9XG4gICAgc2V0IHREdWUobmV3dER1ZSl7XG4gICAgICAgIHRoaXMuX3REdWUgPSBuZXd0RHVlO1xuICAgIH1cbiAgICBzZXQgdFByaW8obmV3dFByaW8pe1xuICAgICAgICB0aGlzLl90UHJpbyA9IG5ld3RQcmlvO1xuICAgIH1cbiAgICBzZXQgdFByb2oobmV3dFByb2ope1xuICAgICAgICB0aGlzLl90UHJvaiA9IG5ld3RQcm9qO1xuICAgIH1cblxuICAgIGdldCB0VGl0bGUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RUaXRsZTtcbiAgICB9XG4gICAgZ2V0IHREZXNjKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl90RGVzYztcbiAgICB9XG4gICAgZ2V0IHREdWUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3REdWU7XG4gICAgfVxuICAgIGdldCB0UHJpbygpe1xuICAgICAgICByZXR1cm4gdGhpcy5fdFByaW87XG4gICAgfVxuICAgIGdldCB0UHJvaigpe1xuICAgICAgICByZXR1cm4gdGhpcy5fdFByb2o7XG4gICAgfVxufSIsImltcG9ydCB7IFRhc2sgfSBmcm9tIFwiLi90YXNrQ2xhc3NcIjtcblxuZXhwb3J0IGNsYXNzIFByb2plY3R7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2NyaXB0aW9uKXtcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMudG9Eb3MgPSBbXTtcbiAgICB9XG4gICAgbmV3VGFzayhUdGl0bGUsIFRkZXNjLCBUZHVlLCBUcHJpbywgVHByb2ope1xuICAgICAgICBsZXQgdCA9IG5ldyBUYXNrKFR0aXRsZSwgVGRlc2MsIFRkdWUsIFRwcmlvLCBUcHJvaik7XG4gICAgICAgIHRoaXMudG9Eb3MucHVzaCh0KTsvL3BsYWNlZCB1bmRlcnNjb3JlXG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cblxuICAgIGZpbmRUYXNrKHRpdGxlTmFtZSl7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRvRG9zLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGlmKHRoaXMudG9Eb3NbaV0udFRpdGxlID09IHRpdGxlTmFtZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9Eb3NbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVUYXNrRnJvbUFycih0aXRsZU5hbWUpe1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy50b0Rvcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBpZih0aGlzLnRvRG9zW2ldLnRUaXRsZSA9PSB0aXRsZU5hbWUpe1xuICAgICAgICAgICAgICAgIHRoaXMudG9Eb3Muc3BsaWNlKGksMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcmludFRhc2tzKCl7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY3VycmVudCB0YXNrcyBpbiBwcm9qZWN0OiBcIik7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRvRG9zLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMudG9Eb3NbaV0udFRpdGxlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBudW1PZlRhc2tzKCl7XG4gICAgICAgIHJldHVybiB0aGlzLnRvRG9zLmxlbmd0aDsvL3BsYWNlZCB1bmRlcnNjb3JlXG4gICAgfVxuXG4gICAgZ2V0IHRpdGxlKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl90aXRsZTtcbiAgICB9XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCl7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgZ2V0IHRvRG9MaXN0KCl7Ly9nZXQgYXJyYXkgdGhlbiBwdXNoIGEgdG9Eb1xuICAgICAgICByZXR1cm4gdGhpcy50b0RvcztcbiAgICB9XG5cbiAgICBzZXQgdGl0bGUobmV3VGl0bGUpe1xuICAgICAgICB0aGlzLl90aXRsZSA9IG5ld1RpdGxlO1xuICAgIH1cbiAgICBzZXQgZGVzY3JpcHRpb24obmV3RGVzYyl7XG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gbmV3RGVzYztcbiAgICB9XG5cbn0iLCJpbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdENsYXNzXCI7XG5pbXBvcnQgeyBwcm9qQXJyIH0gZnJvbSBcIi4vbWVudUV2ZW50TGlzdGVuZXJzXCI7XG5pbXBvcnQgeyBhZGRQcm9qZWN0VG9TaWRlYmFyLCBlZGl0UHJvamVjdEluU2lkZWJhciwgZGlzcGxheVByb2plY3RJbk1haW4sIGVkaXRQcm9qZWN0TmFtZU1haW4gfSBmcm9tIFwiLi9wcm9qZWN0RE9NXCI7XG5pbXBvcnQgeyBfdGVzdGVyaW5nLCBlZGl0QnV0dG9uQ2xpY2tlZCwgY3VyclRpdGxlMiB9IGZyb20gXCIuL3Byb2plY3RFdmVudExpc3RlbmVyc1wiO1xuXG5jb25zdCBwcm9qT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3UHJvamVjdE92ZXJsYXlcIik7XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9qZWN0T3ZlcmxheVN0dWZmKCl7XG4gICAgLy9idXR0b25zXG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlQnV0dG9uXCIpO1xuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3VibWl0QnV0dG9uXCIpO1xuXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICBwcm9qT3ZlcmxheS5zdHlsZS5hbmltYXRpb24gPSAncHJvamVjdFNsaWRlVXAgMS41cyBmb3J3YXJkcyc7XG4gICAgICAgIHByb2plY3RGb3JtQ2xlYXIoKTtcbiAgICB9KVxuICAgIHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHByb2pPdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9ICdwcm9qZWN0U2xpZGVVcCAxLjVzIGZvcndhcmRzJztcbiAgICAgICAgY29uc3QgcHJvamVjdFBhcmFtID0gZXh0cmFjdERhdGFGb3JQcm9qZWN0KCk7XG4gICAgICAgIGlmKGVkaXRCdXR0b25DbGlja2VkKXtcbiAgICAgICAgICAgIGVkaXRQcm9qZWN0SW5BcnIoY3VyclRpdGxlMi50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICBlZGl0UHJvamVjdEluU2lkZWJhcihjdXJyVGl0bGUyLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgIGVkaXRQcm9qZWN0TmFtZU1haW4oKTtcbiAgICAgICAgICAgIHByb2pBcnIuc3BsaWNlKHByb2pBcnIubGVuZ3RoLTEsMSk7Ly9SRU1PVkUgVEhFIExBU1QgUFJPSkVDVCBJTiBBUlJBWS4uTk9XIFVTRUxFU1NcbiAgICAgICAgICAgIGVkaXRCdXR0b25DbGlja2VkID0gZmFsc2U7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgaWYocHJvamVjdFBhcmFtKXtcbiAgICAgICAgICAgICAgICBhZGRQcm9qZWN0VG9TaWRlYmFyKHByb2plY3RQYXJhbS50aXRsZSkvL3RoaXMgd2lsbCBiZSBpbiBwcm9qZWN0RE9NLmpzIGZpbGVcbiAgICAgICAgICAgICAgICBkaXNwbGF5UHJvamVjdEluTWFpbihwcm9qZWN0UGFyYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvamVjdEZvcm1DbGVhcigpO1xuICAgICAgICB9XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gZWRpdFByb2plY3RJbkFycihyZXBsYWNlVGl0bGUpe1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwcm9qQXJyLmxlbmd0aDsgaSsrKXsvL2ZvcihsZXQgaSA9IDA7IGkgPCBwcm9qQXJyLmxlbmd0aC0xOyBpKyspe1xuICAgICAgICBpZihwcm9qQXJyW2ldLnRpdGxlID09IHJlcGxhY2VUaXRsZSl7XG4gICAgICAgICAgICBwcm9qQXJyW2ldLnRpdGxlID0gcHJvakFycltwcm9qQXJyLmxlbmd0aC0xXS50aXRsZTtcbiAgICAgICAgICAgIHByb2pBcnJbaV0uZGVzY3JpcHRpb24gPSBwcm9qQXJyW3Byb2pBcnIubGVuZ3RoLTFdLmRlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBleHRyYWN0RGF0YUZvclByb2plY3QoKXtcbiAgICBjb25zdCB0aXRsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aXRsZVwiKS52YWx1ZVxuICAgIGxldCBkZXNjSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uXCIpLnZhbHVlO1xuXG4gICAgaWYodGl0bGVJbnB1dCl7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJkZXRlY3RlZCB0aXRsZVwiKTsvL2RlYnVnZ2luZ1xuICAgICAgICBjb25zdCBwcm9qZWN0TWFkZSA9IG5ldyBQcm9qZWN0KHRpdGxlSW5wdXQsIGRlc2NJbnB1dCk7XG4gICAgICAgIHByb2pBcnIucHVzaChwcm9qZWN0TWFkZSk7XG4gICAgICAgIHJldHVybiBwcm9qZWN0TWFkZTtcbiAgICB9ZWxzZXtcbiAgICAgICAgZGlzcGxheU5lZWRUaXRsZSgpOy8vIENBTiBJTlNFUlQgRE9NIE1BTklQVUxBVElPTiBUTyBTSElGVCBET1dOIFRIRSBFUlJPUiBPVkVSTEFZIDopXG4gICAgICAgIHByb2plY3RGb3JtQ2xlYXIoKTtcbiAgICAgICAgcHJvak92ZXJsYXkuc3R5bGUuYW5pbWF0aW9uID0gXCJwcm9qZWN0U2xpZGVEb3duIDEuNXMgZm9yd2FyZHNcIjtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlOZWVkVGl0bGUoKXtcbiAgICBjb25zdCBlcnJvck92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVycm9yUHJvamVjdE92ZXJsYXlcIik7XG4gICAgZXJyb3JPdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9IFwicHJvamVjdFNsaWRlRG93biAxLjVzIGZvcndhcmRzXCJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIGVycm9yT3ZlcmxheS5zdHlsZS5hbmltYXRpb24gPSBcInByb2plY3RTbGlkZVVwIDEuNXMgZm9yd2FyZHNcIlxuICAgIH0sIDI1MDApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJvamVjdEZvcm1DbGVhcigpe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIikudmFsdWUgPSBcIlwiO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25cIikudmFsdWUgPSBcIlwiO1xufSIsImltcG9ydCB7IGRxcyB9IGZyb20gXCIuL21lbnVFdmVudExpc3RlbmVyc1wiO1xuaW1wb3J0IHsgZmluZFByb2plY3RJbkFyciB9IGZyb20gXCIuL3Byb2plY3RFdmVudExpc3RlbmVyc1wiO1xuaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuL3Byb2plY3RDbGFzc1wiO1xuaW1wb3J0IHsgVGFzayB9IGZyb20gXCIuL3Rhc2tDbGFzc1wiO1xuaW1wb3J0IHsgY2xlYXJUYXNrTWFpbiB9IGZyb20gXCIuL3Rhc2tET01cIjtcbmltcG9ydCB7IHRhc2tPdmVybGF5IH0gZnJvbSBcIi4vdGFza0Zvcm1cIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHRhc2tFTGlzdGVuZXJzKCl7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGFza1Rlc3RlcmluZylcbiAgICAvL2FkZCB0aGUgZXZlbnRMaXN0ZW5lciBmb3IgdGhlIGNoYW5nZSBvZiB0aGUgZGF0ZSBwaWNrZXJcbn07XG5cbmV4cG9ydCBsZXQgdGFza0VkaXRCdXR0b24gPSBmYWxzZTtcbmxldCB0YXNrUmVtQnV0dG9uID0gZmFsc2U7XG4vL2NvbnN0IHByb2pOYW1lUmVtID0gZHFzKFwiLnByb2plY3ROYW1lTWFpblwiKTtQTEFDRU1FTlQgT0YgVEhJUyBPVVQgSEVSRSBDQVVTRVMgTUFKT1IgQlVHXG4vL2NvbnN0IHByb2pSZW1FZCA9IGZpbmRQcm9qZWN0SW5BcnIocHJvak5hbWVSZW0udGV4dENvbnRlbnQpO1dJUEVTIFRIRSBFTlRJUkUgRElTUExBWSBBUkVBIEFORCBNRU5VKEVWRVJZVEhJTkcgQkFTSUNBTExZIE9fbylcblxuZXhwb3J0IHZhciBfdGFza1Rlc3RlcmluZyA9IGZ1bmN0aW9uKGUpe1xuXG4gICAgY29uc3QgdGFza05hbWUgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAvL2NvbnN0IHByb2pOYW1lUmVtID0gZHFzKFwiLnByb2plY3ROYW1lTWFpblwiKTtcbiAgICAvL2NvbnN0IHByb2pSZW1FZCA9IGZpbmRQcm9qZWN0SW5BcnIocHJvak5hbWVSZW0udGV4dENvbnRlbnQpOy8vcHJvamVjdCBjbGFzcyB3aWxsIGhhdmUgYSBmdW5jIHRoYXQgY2FuIGdvIHRocm91Z2ggaXRzIHRhc2sgYXJyYXkgYW5kIHJlbW92ZSBhIHNwZWNpZmllZCB0YXNrIDopXG5cbiAgICBpZihlLnRhcmdldC5tYXRjaGVzKFwiLnRhc2tQcm9qRWRpdFwiKSl7Ly90aGlzIHdpbGwgYmUgZG9uZSBsYXN0IGZpcnN0IHdlIHdpbGwgd29yayBvbiBSRU1PVkVcbiAgICAgICAgdGFza0VkaXRCdXR0b24gPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmxvZyh0YXNrTmFtZSk7XG4gICAgICAgIC8vYnJpbmcgdGFza2Zvcm0gZG93biBmaW5kIHRhc2sgYW5kIHByZWZpbGwgd2l0aCB0YXNrTmFtZSBhbmQgZGF0ZVxuICAgICAgICAvL3NldCB0YXNrRWRpdEJ1dHRvbiA9IHRydWUgYW5kIG9uIHRhc2tGb3JtLmpzIHNldCAnaWYodGFza0VkaXRCdXR0b24pJyBvbiBzdWJtaXQgYnV0dG9uXG4gICAgICAgIC8vdGhhdCB3aWxsIGVuY2Fwc3VsYXRlIGVkaXQgYWxnb3JpdGhtXG4gICAgICAgIGNvbnN0IHByb2pOYW1lRWQgPSBkcXMoXCIucHJvamVjdE5hbWVNYWluXCIpO1xuICAgICAgICBjb25zdCBwcm9qRWQgPSBmaW5kUHJvamVjdEluQXJyKHByb2pOYW1lRWQudGV4dENvbnRlbnQpO1xuICAgICAgICBjb25zdCBlZGl0VGFzayA9IHByb2pFZC5maW5kVGFzayh0YXNrTmFtZSk7XG4gICAgICAgIGVkaXRUYXNrRm9ybShlZGl0VGFzayk7XG4gICAgICAgIC8vY29kZSBoZXJlIGZvciBlZGl0IG9uIHRhc2tcbiAgICB9XG4gICAgZWxzZSBpZihlLnRhcmdldC5tYXRjaGVzKFwiLnRhc2tQcm9qUmVtb3ZlXCIpKXtcbiAgICAgICAgdGFza1JlbUJ1dHRvbiA9IHRydWU7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhc2tOYW1lKTtcbiAgICAgICAgY29uc3QgcHJvak5hbWVSZW0gPSBkcXMoXCIucHJvamVjdE5hbWVNYWluXCIpO1xuICAgICAgICBjb25zdCBwcm9qUmVtID0gZmluZFByb2plY3RJbkFycihwcm9qTmFtZVJlbS50ZXh0Q29udGVudCk7Ly9wcm9qZWN0IGNsYXNzIHdpbGwgaGF2ZSBhIGZ1bmMgdGhhdCBjYW4gZ28gdGhyb3VnaCBpdHMgdGFzayBhcnJheSBhbmQgcmVtb3ZlIGEgc3BlY2lmaWVkIHRhc2sgOilcbiAgICAgICAgcHJvalJlbS5yZW1vdmVUYXNrRnJvbUFycih0YXNrTmFtZSk7XG4gICAgICAgIHByb2pSZW0ucHJpbnRUYXNrcygpO1xuICAgICAgICBjbGVhclRhc2tNYWluKHRhc2tOYW1lKTtcbiAgICAgICAgLy9jb2RlIGhlcmUgZm9yIHJlbW92YWwgb2YgaW5kaXZpZHVhbCB0YXNrXG4gICAgfVxufVxuXG5mdW5jdGlvbiBlZGl0VGFza0Zvcm0odGFzayl7XG4gICAgdGFza092ZXJsYXkuc3R5bGUuYW5pbWF0aW9uID0gXCJwcm9qZWN0U2xpZGVEb3duIDEuNXMgZm9yd2FyZHNcIjtcbiAgICAvL2dldCBkcXMoI3RpdGxlKSBhbmQgZHFzKCNkYXRlKSBhbmQgc2V0IHZhbHVlIHRvIHRhc2sgdGl0bGUgYW5kIGRhdGUgYXMgZGVmYXVsdFxuICAgIGNvbnN0IHRhc2tUaXRsZUZvcm0gPSBkcXMoXCIjdFRpdGxlXCIpO1xuICAgIGNvbnN0IHRhc2tEYXRlRm9ybSA9IGRxcyhcIiN0RHVlRGF0ZVwiKTtcbiAgICB0YXNrVGl0bGVGb3JtLnZhbHVlID0gdGFzay50VGl0bGU7XG4gICAgdGFza0RhdGVGb3JtLnZhbHVlID0gdGFzay50RHVlO1xufSIsImltcG9ydCBFZGl0IGZyb20gJy4uL3NyYy9pbWdzL2VkaXQucG5nJztcbmltcG9ydCBSZW1vdmUgZnJvbSAnLi4vc3JjL2ltZ3MvY2xvc2UucG5nJztcbmltcG9ydCB7IF90YXNrVGVzdGVyaW5nLCB0YXNrRUxpc3RlbmVycyB9IGZyb20gJy4vdGFza0V2ZW50TGlzdGVuZXJzJztcbmltcG9ydCB7IGRxcyB9IGZyb20gJy4vbWVudUV2ZW50TGlzdGVuZXJzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlUYXNrSW5NYWluKHRhc2spey8vKHByb2plY3QsIHVsKSBtaWdodCBiZSBuZWVkZWQgYXMgcGFyYW1zIGJ1dCBwcm9icyBub3RcbiAgICBjb25zdCBwcm9qVUwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9VTFwiKTtcblxuICAgIGNvbnN0IHRhc2tMSSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG5cbiAgICBjb25zdCBkYXRlRGlzcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRhdGVEaXNwLnRleHRDb250ZW50ID0gdGFzay50RHVlO1xuICAgIGRhdGVEaXNwLmNsYXNzTGlzdC5hZGQoXCJkYXRlVGFza0Rpc3BcIik7XG5cbiAgICBjb25zdCBidXR0b25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIGNvbnN0IHRhc2tDaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgdGFza0NoZWNrYm94LnR5cGUgPSBcImNoZWNrYm94XCI7XG5cbiAgICBjb25zdCB0YXNrRGF0ZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICB0YXNrRGF0ZUlucHV0LnR5cGUgPSBcImRhdGVcIjtcbiAgICB0YXNrRGF0ZUlucHV0LnZhbHVlID0gdGFzay50RHVlO1xuXG4gICAgY29uc3QgdGFza0VkaXREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCB0YXNrUmVtb3ZlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBjb25zdCB0YXNrRWRpdEljb24gPSBuZXcgSW1hZ2UoKTtcbiAgICB0YXNrRWRpdEljb24uc3JjID0gRWRpdDtcbiAgICB0YXNrRWRpdEljb24uY2xhc3NMaXN0LmFkZCgndGFza1Byb2pFZGl0Jyk7XG5cbiAgICBjb25zdCB0YXNrUmVtb3ZlSWNvbiA9IG5ldyBJbWFnZSgpO1xuICAgIHRhc2tSZW1vdmVJY29uLnNyYyA9IFJlbW92ZTtcbiAgICB0YXNrUmVtb3ZlSWNvbi5jbGFzc0xpc3QuYWRkKCd0YXNrUHJvalJlbW92ZScpO1xuXG4gICAgdGFza0VkaXREaXYuYXBwZW5kQ2hpbGQodGFza0VkaXRJY29uKTtcbiAgICB0YXNrUmVtb3ZlRGl2LmFwcGVuZENoaWxkKHRhc2tSZW1vdmVJY29uKTtcblxuICAgIHRhc2tMSS50ZXh0Q29udGVudCA9IHRhc2sudFRpdGxlOy8vdGFzay50VGl0bGUgKyBcIiAgXCIgKyB0YXNrLnREdWVcblxuICAgIGJ1dHRvbkRpdi5hcHBlbmRDaGlsZCh0YXNrRWRpdERpdik7XG4gICAgYnV0dG9uRGl2LmFwcGVuZENoaWxkKHRhc2tSZW1vdmVEaXYpO1xuICAgIGJ1dHRvbkRpdi5hcHBlbmRDaGlsZCh0YXNrQ2hlY2tib3gpO1xuXG4gICAgYnV0dG9uRGl2LmNsYXNzTGlzdC5hZGQoJ3Rhc2tCdXR0b25zJyk7XG5cbiAgICAvL3Rhc2tMSS5hcHBlbmRDaGlsZChkYXRlRGlzcCk7XG5cbiAgICB0YXNrTEkuYXBwZW5kQ2hpbGQoYnV0dG9uRGl2KTtcblxuICAgIHRhc2tMSS5hcHBlbmRDaGlsZCh0YXNrRGF0ZUlucHV0KTtcblxuICAgIHRhc2tMSS5jbGFzc0xpc3QuYWRkKFwidG9kb1wiKTtcblxuICAgIHByb2pVTC5hcHBlbmRDaGlsZCh0YXNrTEkpO1xuXG4gICAgdGFza0VMaXN0ZW5lcnMoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyVGFza01haW4odGFzayl7XG4gICAgLy9nZXQgdGFzayB1bCBzZWN0aW9uIGFuZCByZW1vdmUgbGkgdmlhIHBhcmFtZXRlcihsaWtlIHJlbW92aW5nIGEgcHJvamVjdCBmcm9tIHNpZGViYXIpXG4gICAgY29uc3QgdWxQYXJlbnQgPSBkcXMoXCIudG9kb1VMXCIpO1xuICAgIGNvbnN0IGxpVGFza0NoaWxkcmVuID0gdWxQYXJlbnQuY2hpbGRyZW47XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGxpVGFza0NoaWxkcmVuLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgaWYobGlUYXNrQ2hpbGRyZW5baV0udGV4dENvbnRlbnQgPT0gdGFzayl7XG4gICAgICAgICAgICB1bFBhcmVudC5yZW1vdmVDaGlsZChsaVRhc2tDaGlsZHJlbltpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy9kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIF90YXNrVGVzdGVyaW5nKTtJRiBNVUxUSVBMRSBUQVNLUywgT1RIRVIgVEFTS1MgQlVUVE9OUyBXT05UIFdPUktcbn0iLCJpbXBvcnQgeyBkcXMgfSBmcm9tIFwiLi9tZW51RXZlbnRMaXN0ZW5lcnNcIjtcbmltcG9ydCB7IGZpbmRQcm9qZWN0SW5BcnIgfSBmcm9tIFwiLi9wcm9qZWN0RXZlbnRMaXN0ZW5lcnNcIjtcbmltcG9ydCB7IGRpc3BsYXlOZWVkVGl0bGUgfSBmcm9tIFwiLi9wcm9qZWN0Rm9ybVwiO1xuaW1wb3J0IHsgZGlzcGxheVRhc2tJbk1haW4gfSBmcm9tIFwiLi90YXNrRE9NXCI7XG5pbXBvcnQgeyB0YXNrRWRpdEJ1dHRvbiB9IGZyb20gXCIuL3Rhc2tFdmVudExpc3RlbmVyc1wiO1xuXG5leHBvcnQgY29uc3QgdGFza092ZXJsYXkgPSBkcXMoXCIubmV3VGFza092ZXJsYXlcIik7XG5jb25zdCB0YXNrQ2xvc2UgPSBkcXMoXCIudGFza0Nsb3NlQnV0dG9uXCIpO1xuY29uc3QgdGFza1N1Ym1pdCA9IGRxcyhcIi50YXNrU3VibWl0QnV0dG9uXCIpO1xuXG5leHBvcnQgZnVuY3Rpb24gdGFza092ZXJsYXlMaXN0ZW5lcnMoKXtcbiAgICB0YXNrQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICB0YXNrRm9ybUNsZWFyKCk7XG4gICAgICAgIHRhc2tPdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9IFwicHJvamVjdFNsaWRlVXAgMS41cyBmb3J3YXJkc1wiXG4gICAgfSk7XG4gICAgdGFza1N1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF90YXNrU3VibWl0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIF90YXNrU3VibWl0KCl7XG4gICAgaWYodGFza0VkaXRCdXR0b24pe1xuICAgICAgICAvL2luc2VydCBlZGl0IGFsZ29yaXRobSBoZXJlXG4gICAgICAgIHRhc2tFZGl0QnV0dG9uID0gZmFsc2U7XG4gICAgfVxuICAgIHRhc2tPdmVybGF5LnN0eWxlLmFuaW1hdGlvbiA9IFwicHJvamVjdFNsaWRlVXAgMS41cyBmb3J3YXJkc1wiXG4gICAgY29uc3QgbWFkZVRhc2sgPSBleHRyYWN0RGF0YUZvclRhc2soKTtcbiAgICBpZihtYWRlVGFzayl7XG4gICAgICAgIGRpc3BsYXlUYXNrSW5NYWluKG1hZGVUYXNrKTsvL2N1cnJlbnQgcHJvamVjdCBpcyBhbHJlYWR5IGRldGVjdGVkIGluIGV4dHJhY3REYXRhRm9yVGFzayBmdW5jLi5tYXkgbm90IG5lZWQgcHJvaiBhbmQgdWwgYXMgcGFyYW1zXG4gICAgfVxuICAgIHRhc2tGb3JtQ2xlYXIoKTtcbiAgICBjbGVhckV2TGlzKCk7XG59XG5cbmZ1bmN0aW9uIGNsZWFyRXZMaXMoKXtcbiAgICB0YXNrU3VibWl0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3Rhc2tTdWJtaXQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdERhdGFGb3JUYXNrKHByb2ope1xuICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidFRpdGxlXCIpLnZhbHVlO1xuICAgIGNvbnN0IHRhc2tEZXNjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0RGVzY3JpcHRpb25cIikudmFsdWU7XG4gICAgY29uc3QgdGFza0R1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInREdWVEYXRlXCIpLnZhbHVlO1xuICAgIGNvbnN0IHRhc2tQcmlvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0VGFza1ByaW9cIikudmFsdWU7XG4gICAgXG4gICAgY29uc3QgdGVtcCA9IGRxcyhcIi5wcm9qZWN0TmFtZU1haW5cIik7Ly9TSE9VTEQgTk9UIEJFIE5FRURFRCBHSVZFTiBQQVJBTVxuICAgIGNvbnN0IHRhc2tQcm9qID0gdGVtcC50ZXh0Q29udGVudDtcblxuICAgIGNvbnN0IGZuZFByb2ogPSBmaW5kUHJvamVjdEluQXJyKHRhc2tQcm9qKTtcblxuXG4gICAgaWYodGFza1RpdGxlICYmIHRhc2tEdWVEYXRlKXtcbiAgICAgICAgY29uc3QgdGFza01hZGUgPSBmbmRQcm9qLm5ld1Rhc2sodGFza1RpdGxlLCB0YXNrRGVzYywgdGFza0R1ZURhdGUsIHRhc2tQcmlvLCBmbmRQcm9qLnRpdGxlKTtcbiAgICAgICAgdGFza0Zvcm1DbGVhcigpO1xuICAgICAgICByZXR1cm4gdGFza01hZGU7XG4gICAgfWVsc2V7XG4gICAgICAgIGRpc3BsYXlOZWVkVGl0bGUoKTtcbiAgICAgICAgdGFza0Zvcm1DbGVhcigpO1xuICAgICAgICB0YXNrT3ZlcmxheS5zdHlsZS5hbmltYXRpb24gPSBcInByb2plY3RTbGlkZURvd24gMS41cyBmb3J3YXJkc1wiO1xuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdGFza0Zvcm1DbGVhcigpe1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidFRpdGxlXCIpLnZhbHVlID0gXCJcIjtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInREZXNjcmlwdGlvblwiKS52YWx1ZSA9IFwiXCI7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0RHVlRGF0ZVwiKS52YWx1ZSA9IFwiXCI7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0VGFza1ByaW9cIikudmFsdWUgPSBcIlNlbGVjdCBPbmVcIjtcbn0iLCJpbXBvcnQgeyBkcXMgfSBmcm9tIFwiLi9tZW51RXZlbnRMaXN0ZW5lcnNcIjtcbmltcG9ydCB7IHByb2pBcnIgfSBmcm9tIFwiLi9tZW51RXZlbnRMaXN0ZW5lcnNcIjtcbmltcG9ydCB7IGNsZWFyTWFpbiB9IGZyb20gXCIuL3Byb2plY3RET01cIjtcbmltcG9ydCB7IHRhc2tPdmVybGF5LCB0YXNrT3ZlcmxheUxpc3RlbmVycyB9IGZyb20gXCIuL3Rhc2tGb3JtXCI7XG5pbXBvcnQgeyByZW1vdmVQcm9qZWN0RnJvbVNpZGViYXIgfSBmcm9tIFwiLi9wcm9qZWN0RE9NXCI7XG5cbmNvbnN0IHByb2pPdmVybGF5MSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3UHJvamVjdE92ZXJsYXlcIik7XG5leHBvcnQgbGV0IGVkaXRCdXR0b25DbGlja2VkID0gZmFsc2U7XG5leHBvcnQgbGV0IGN1cnJUaXRsZTIgPSBudWxsOy8vPSBkcXMoXCIucHJvamVjdE5hbWVNYWluXCIpO1xuXG5leHBvcnQgZnVuY3Rpb24gcHJvamVjdEVMaXN0ZW5lcnMoKXtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF90ZXN0ZXJpbmcpXG59O1xuXG5leHBvcnQgdmFyIF90ZXN0ZXJpbmcgPSBmdW5jdGlvbihlKXtcbiAgICAvL2dvIHRocm91aGcgYXJyYXkgY29tcGFyaW5nIHRpdGxlXG4gICAgICAgIC8vd2hlbiBmb3VuZCBmaWxsIHByb2plY3RGb3JtIGFuZCBkcm9wIGZvcm0gZG93biBmb3IgdXNlclxuICAgICAgICAvL2lmIHN1Ym1pdCB0aGVuIHJlcGxhY2UgaW5mbyB3aXRoIG5ldyBpbmZvXG4gICAgICAgIC8vZWxzZSBpZiBjYW5jZWwgdGhlbiBsZWF2ZSBwcm9qZWN0IGFzIGl0IHdhc1xuICAgICAgICBjb25zdCBlZGl0QnV0dG9uID0gZS50YXJnZXQubWF0Y2hlcyhcIi5wcm9qRWRpdFwiKTtcbiAgICAgICAgY29uc3QgcmVtb3ZlQnV0dG9uID0gZS50YXJnZXQubWF0Y2hlcyhcIi5wcm9qUmVtb3ZlXCIpO1xuICAgICAgICBjb25zdCBhZGRUYXNrQnV0dG9uID0gZS50YXJnZXQubWF0Y2hlcyhcIi5wcm9qQWRkXCIpO1xuICAgICAgICBjb25zdCBjdXJyVGl0bGUgPSBkcXMoXCIucHJvamVjdE5hbWVNYWluXCIpO1xuICAgICAgICBjdXJyVGl0bGUyID0gY3VyclRpdGxlO1xuICAgICAgICBpZihlZGl0QnV0dG9uKXsvL3RoaXMgd2lsbCBiZSBkb25lIG9uY2UgJ3JlbW92ZScgaXMgY29tcGxldGVkXG4gICAgICAgICAgICBlZGl0Rm9ybShjdXJyVGl0bGUudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgZWRpdEJ1dHRvbkNsaWNrZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYocmVtb3ZlQnV0dG9uKXtcbiAgICAgICAgICAgIC8vY29uc3QgY3VyclRpdGxlID0gZHFzKFwiLnByb2plY3ROYW1lTWFpblwiKTtcbiAgICAgICAgICAgIHJlbW92ZVByb2plY3RGcm9tU2lkZWJhcihjdXJyVGl0bGUudGV4dENvbnRlbnQpO1xuICAgICAgICAgICAgcmVtb3ZlUHJvakFycihjdXJyVGl0bGUudGV4dENvbnRlbnQpOy8vPz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz9cbiAgICAgICAgICAgIGNsZWFyTWFpbigpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjdXJyZW50IHByb2plY3RzIGluIGFycmF5IGFyZTogXCIpO1xuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHByb2pBcnIubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2pBcnJbaV0udGl0bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoYWRkVGFza0J1dHRvbil7XG4gICAgICAgICAgICB0YXNrT3ZlcmxheS5zdHlsZS5hbmltYXRpb24gPSBcInByb2plY3RTbGlkZURvd24gMS41cyBmb3J3YXJkc1wiO1xuICAgICAgICAgICAgdGFza092ZXJsYXlMaXN0ZW5lcnMoKTsvL2FkZCBwcm9qIGFzIHBhcmFtIGhlcmUhISEgZmluZCBwcm9qIG9uIGxpbmUgYmVmb3JlIHRoaXNcbiAgICAgICAgfVxufVxuXG5mdW5jdGlvbiBlZGl0Rm9ybShwcm9qZWN0VGl0bGUpey8vcGFyYW0gaXMgY3VycmVudCB0aXRsZSBpdCB3aWxsIGZpbGwgdGhlIGlucHV0IHRpdGxlIGJveFxuICAgIHByb2pPdmVybGF5MS5zdHlsZS5hbmltYXRpb24gPSAncHJvamVjdFNsaWRlRG93biAxLjVzIGZvcndhcmRzJztcbiAgICBjb25zdCB0aXRsZUluID0gZHFzKFwiI3RpdGxlXCIpO1xuICAgIHRpdGxlSW4udmFsdWUgPSBwcm9qZWN0VGl0bGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVQcm9qQXJyKHRpdGxlKXtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgcHJvakFyci5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGlmKHByb2pBcnJbaV0udGl0bGUgPT0gdGl0bGUpe1xuICAgICAgICAgICAgcHJvakFyci5zcGxpY2UoaSwxKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRQcm9qZWN0SW5BcnIodGl0bGUpey8vTUlHSFQgTk9UIE5FRUQgVEhJUyBNSUdIVCBOT1QgTkVFRCBUSElTIE1JR0hUIE5PVCBORUVEIFRISVNcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwcm9qQXJyLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICBpZihwcm9qQXJyW2ldLnRpdGxlID09IHRpdGxlKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicHJvamVjdCBmb3VuZFwiKTtcbiAgICAgICAgICAgIHJldHVybiBwcm9qQXJyW2ldO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCBSZW1vdmUgZnJvbSAnLi4vc3JjL2ltZ3MvY2xvc2UucG5nJztcbmltcG9ydCBDcmVhdGUgZnJvbSAnLi4vc3JjL2ltZ3MvYWRkLnBuZyc7XG5pbXBvcnQgRWRpdCBmcm9tICcuLi9zcmMvaW1ncy9lZGl0LnBuZyc7XG5pbXBvcnQgeyBkcXMsIHByb2pBcnIgfSBmcm9tICcuL21lbnVFdmVudExpc3RlbmVycyc7XG5pbXBvcnQgeyBwcm9qZWN0RUxpc3RlbmVycyB9IGZyb20gJy4vcHJvamVjdEV2ZW50TGlzdGVuZXJzJztcbmltcG9ydCB7IF90ZXN0ZXJpbmcgfSBmcm9tICcuL3Byb2plY3RFdmVudExpc3RlbmVycyc7XG5pbXBvcnQgeyBkaXNwbGF5VGFza0luTWFpbiB9IGZyb20gJy4vdGFza0RPTSc7XG5cbmNvbnN0IG1haW5TZWMgPSBkcXMoXCIucHJvamVjdFNlY3Rpb25cIik7XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRQcm9qZWN0VG9TaWRlYmFyKHByb2plY3RUaXRsZSl7XG4gICAgY29uc3QgcHJvalNpZGUgPSBkcXMoXCIuc2lkZWJhclByb2plY3RcIik7XG4gICAgbGV0IHByb2pUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBwcm9qVGl0bGUudGV4dENvbnRlbnQgPSBwcm9qZWN0VGl0bGU7XG4gICAgcHJvalRpdGxlLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3ROYW1lU2lkZWJhcicpO1xuICAgIHByb2pTaWRlLmFwcGVuZENoaWxkKHByb2pUaXRsZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUHJvamVjdEZyb21TaWRlYmFyKHByb2plY3RUaXRsZSl7XG4gICAgY29uc3Qgc2lkZWJhclByb2ogPSBkcXMoXCIuc2lkZWJhclByb2plY3RcIik7XG4gICAgY29uc3Qgc2lkZWJhclByb2pDaGlsZHJlbiA9IHNpZGViYXJQcm9qLmNoaWxkcmVuO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaWRlYmFyUHJvakNoaWxkcmVuLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgaWYoc2lkZWJhclByb2pDaGlsZHJlbltpXS50ZXh0Q29udGVudCA9PSBwcm9qZWN0VGl0bGUpe1xuICAgICAgICAgICAgc2lkZWJhclByb2oucmVtb3ZlQ2hpbGQoc2lkZWJhclByb2pDaGlsZHJlbltpXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZWRpdFByb2plY3RJblNpZGViYXIocHJvamVjdFRpdGxlKXtcbiAgICBjb25zdCBzaWRlYmFyUHJvaiA9IGRxcyhcIi5zaWRlYmFyUHJvamVjdFwiKTtcbiAgICBjb25zdCBzaWRlYmFyUHJvakNoaWxkcmVuID0gc2lkZWJhclByb2ouY2hpbGRyZW47XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHNpZGViYXJQcm9qQ2hpbGRyZW4ubGVuZ3RoOyBpKyspe1xuICAgICAgICBpZihzaWRlYmFyUHJvakNoaWxkcmVuW2ldLnRleHRDb250ZW50ID09IHByb2plY3RUaXRsZSl7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiZm91bmQgc2lkZWJhciBwcm9qZWN0IG5hbWVkIFwiICsgc2lkZWJhclByb2pDaGlsZHJlbltpXS50ZXh0Q29udGVudCk7IERFQlVHXG4gICAgICAgICAgICBzaWRlYmFyUHJvakNoaWxkcmVuW2ldLnRleHRDb250ZW50ID0gcHJvakFycltzaWRlYmFyUHJvakNoaWxkcmVuLmxlbmd0aF0udGl0bGU7Ly9wcm9qQXJyW3NpZGViYXJQcm9qQ2hpbGRyZW4ubGVuZ3RoLTFdLnRpdGxlXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlZGl0UHJvamVjdE5hbWVNYWluKCl7XG4gICAgY29uc3QgT0dQcm9qTmFtZSA9IGRxcyhcIi5wcm9qZWN0TmFtZU1haW5cIik7XG4gICAgT0dQcm9qTmFtZS50ZXh0Q29udGVudCA9IHByb2pBcnJbcHJvakFyci5sZW5ndGgtMV0udGl0bGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5UHJvamVjdEluTWFpbihwcm9qZWN0KXtcbiAgICBjbGVhck1haW4oKTtcbiAgICBjb25zdCBwcm9qRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBjb25zdCB0YXNrU2VjVUwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgIHRhc2tTZWNVTC5jbGFzc0xpc3QuYWRkKFwidG9kb1VMXCIpXG4gICAgXG4gICAgY29uc3QgcHJvakNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICBwcm9qQ2hlY2tib3gudHlwZSA9IFwiY2hlY2tib3hcIjtcbiAgICBwcm9qQ2hlY2tib3guY2xhc3NMaXN0LmFkZChcInByb2plY3RDaGVja2JveFwiKTtcblxuICAgIFxuICAgIGNvbnN0IHByb2pOYW1lU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBpZihwcm9qZWN0LnRpdGxlLmxlbmd0aCA+IDMwKXtcbiAgICAgICAgbGV0IG1haW5Nb2RQcm9qVGl0bGUgPSBwcm9qZWN0LnRpdGxlLnNsaWNlKDAsMzEpO1xuICAgICAgICBwcm9qTmFtZVNwYW4udGV4dENvbnRlbnQgPSBtYWluTW9kUHJvalRpdGxlICsgXCIuLi5cIjtcbiAgICB9ZWxzZXtcbiAgICAgICAgcHJvak5hbWVTcGFuLnRleHRDb250ZW50ID0gcHJvamVjdC50aXRsZTtcbiAgICB9XG4gICAgcHJvak5hbWVTcGFuLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0TmFtZU1haW5cIik7XG5cbiAgICBcbiAgICBjb25zdCBidXR0b25Db250ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgXG4gICAgY29uc3QgYWRkRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgZWRpdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHJlbW92ZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgY29uc3QgYWRkSWNvbiA9IG5ldyBJbWFnZSgpO1xuICAgIGFkZEljb24uc3JjID0gQ3JlYXRlO1xuICAgIGFkZEljb24uY2xhc3NMaXN0LmFkZCgncHJvakFkZCcpO1xuXG4gICAgY29uc3QgZWRpdEljb24gPSBuZXcgSW1hZ2UoKTtcbiAgICBlZGl0SWNvbi5zcmMgPSBFZGl0O1xuICAgIGVkaXRJY29uLmNsYXNzTGlzdC5hZGQoJ3Byb2pFZGl0Jyk7XG5cbiAgICBjb25zdCByZW1JY29uID0gbmV3IEltYWdlKCk7XG4gICAgcmVtSWNvbi5zcmMgPSBSZW1vdmU7XG4gICAgcmVtSWNvbi5jbGFzc0xpc3QuYWRkKCdwcm9qUmVtb3ZlJyk7XG5cbiAgICBhZGREaXYuYXBwZW5kQ2hpbGQoYWRkSWNvbik7XG4gICAgZWRpdERpdi5hcHBlbmRDaGlsZChlZGl0SWNvbik7XG4gICAgcmVtb3ZlRGl2LmFwcGVuZENoaWxkKHJlbUljb24pO1xuICAgIFxuICAgIGJ1dHRvbkNvbnQuYXBwZW5kQ2hpbGQoYWRkRGl2KTtcbiAgICBidXR0b25Db250LmFwcGVuZENoaWxkKGVkaXREaXYpO1xuICAgIGJ1dHRvbkNvbnQuYXBwZW5kQ2hpbGQocmVtb3ZlRGl2KTtcbiAgICBidXR0b25Db250LmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0T3B0aW9uc1wiKTtcblxuICAgIHByb2pEaXYuYXBwZW5kQ2hpbGQocHJvakNoZWNrYm94KTtcbiAgICBwcm9qRGl2LmFwcGVuZENoaWxkKHByb2pOYW1lU3Bhbik7XG4gICAgcHJvakRpdi5hcHBlbmRDaGlsZChidXR0b25Db250KTtcbiAgICBwcm9qRGl2LmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0XCIpO1xuXG4gICAgbWFpblNlYy5hcHBlbmRDaGlsZChwcm9qRGl2KTtcbiAgICBtYWluU2VjLmFwcGVuZENoaWxkKHRhc2tTZWNVTCk7XG4gICAgXG4gICAgLy9jaGVjayBmb3IgdGFza3Mgd2l0aCBhIGxvb3AgYW5kIGRpc3BsYXkgZWFjaFxuICAgIGNoZWNrRm9yVGFza3MocHJvamVjdCk7XG5cbiAgICAvL2NhbGwgZXZlbnRMaXN0ZW5lciBoZXJlXG4gICAgcHJvamVjdEVMaXN0ZW5lcnMoKTsvL1dJTEwgSEFWRSBUTyBBREQgRVZFTlQgTElTVEVORVJTIEZPUiBUQVNLUyBIRVJFPz8/XG59XG5cbmZ1bmN0aW9uIGNoZWNrRm9yVGFza3MocHJvail7XG4gICAgLy9naXZlbiBwcm9qIGFzIHBhcmFtIHdlIHdpbGwgY2hlY2sgaWYgaXQgY29udGFpbnMgYW55IHRhc2tzIHRoYXQgbmVlZCB0byBiZSBjcmVhdGVkXG4gICAgY29uc3QgdGFza0FyciA9IHByb2oudG9Eb0xpc3Q7XG4gICAgaWYodGFza0Fycil7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0YXNrQXJyLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGRpc3BsYXlUYXNrSW5NYWluKHRhc2tBcnJbaV0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJNYWluKCl7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGVzdGVyaW5nKTtcbiAgICB3aGlsZShtYWluU2VjLmZpcnN0Q2hpbGQpe1xuICAgICAgICBtYWluU2VjLnJlbW92ZUNoaWxkKG1haW5TZWMuZmlyc3RDaGlsZClcbiAgICB9XG59IiwiaW1wb3J0IE1lbnUgZnJvbSAnLi4vc3JjL2ltZ3MvbWVudS5wbmcnXG5pbXBvcnQgQnJhbmQgZnJvbSAnLi4vc3JjL2ltZ3MvV29ya2VyQW50c01vZC5wbmcnO1xuaW1wb3J0IENsb3NlIGZyb20gJy4uL3NyYy9pbWdzL2Nsb3NlLnBuZyc7XG5pbXBvcnQgQ3JlYXRlIGZyb20gJy4uL3NyYy9pbWdzL2FkZC5wbmcnO1xuaW1wb3J0IHsgZGlzcGxheVByb2plY3RJbk1haW4gfSBmcm9tICcuL3Byb2plY3RET00nO1xuaW1wb3J0IHsgZmluZFByb2plY3RJbkFyciB9IGZyb20gJy4vcHJvamVjdEV2ZW50TGlzdGVuZXJzJztcblxuLy9JIE5FRUQgVE8gQUREIEEgR0xPQkFMIFZBUklBQkxFIEFSUkFZIFRIQVQgU1RPUkVTIEFMTCBUSEUgUFJPSkVDVFMgSEVSRVxuZXhwb3J0IGxldCBwcm9qQXJyID0gW107XG5cbmV4cG9ydCBmdW5jdGlvbiBkcXMoYyl7XG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZW51RXZlbnRMaXN0ZW4oKXtcbiAgICBjb25zdCBtZW51Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51Q29udGFpbmVyXCIpO1xuICAgIGNvbnN0IG1haW5Mb2dvQ29udCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbkxvZ29cIik7XG4gICAgY29uc3QgY2xvc2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnVDbG9zZVwiKTtcbiAgICBjb25zdCBjcmVhdGVQcm9qQ29udCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3JlYXRlUHJvalwiKTtcbiAgICBcbiAgICBjb25zdCBtZW51SWNvbiA9IG5ldyBJbWFnZSgpO1xuICAgIG1lbnVJY29uLnNyYyA9IE1lbnU7XG4gICAgbWVudUljb24uY2xhc3NMaXN0LmFkZCgnbWFpbi1tZW51LWxvZ28nKTtcblxuICAgIGNvbnN0IG1haW5Mb2dvSW1nID0gbmV3IEltYWdlKCk7XG4gICAgbWFpbkxvZ29JbWcuc3JjID0gQnJhbmQ7XG4gICAgbWFpbkxvZ29JbWcuY2xhc3NMaXN0LmFkZCgnbWFpbi1sb2dvJyk7XG5cbiAgICBjb25zdCBjbG9zZUljb24gPSBuZXcgSW1hZ2UoKTtcbiAgICBjbG9zZUljb24uc3JjID0gQ2xvc2U7XG4gICAgY2xvc2VJY29uLmNsYXNzTGlzdC5hZGQoJ21lbnVDbG9zZScpO1xuXG4gICAgY29uc3QgY3JlYXRlUHJvakljb24gPSBuZXcgSW1hZ2UoKTtcbiAgICBjcmVhdGVQcm9qSWNvbi5zcmMgPSBDcmVhdGU7XG4gICAgY3JlYXRlUHJvakljb24uY2xhc3NMaXN0LmFkZCgnYWRkUHJvakJ1dHRvbicpO1xuXG4gICAgbWVudUNvbnRhaW5lci5hcHBlbmRDaGlsZChtZW51SWNvbik7XG4gICAgbWFpbkxvZ29Db250LmFwcGVuZENoaWxkKG1haW5Mb2dvSW1nKTtcbiAgICBjbG9zZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjbG9zZUljb24pO1xuICAgIGNyZWF0ZVByb2pDb250LmFwcGVuZENoaWxkKGNyZWF0ZVByb2pJY29uKTtcblxuICAgIGNvbnN0IHNpZGVCYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpZGViYXItbWVudVwiKTtcbiAgICBjb25zdCBwcm9qT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV3UHJvamVjdE92ZXJsYXlcIik7XG5cbiAgICBtZW51Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgc2lkZUJhci5zdHlsZS5hbmltYXRpb24gPSAnbWVudVNsaWRlT24gMS41cyBmb3J3YXJkcyc7XG4gICAgfSk7XG4gICAgY2xvc2VDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICBzaWRlQmFyLnN0eWxlLmFuaW1hdGlvbiA9ICdtZW51U2xpZGVDbG9zZSAxLjVzIGZvcndhcmRzJztcbiAgICB9KTtcbiAgICBjcmVhdGVQcm9qQ29udC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHNpZGVCYXIuc3R5bGUuYW5pbWF0aW9uID0gJ21lbnVTbGlkZUNsb3NlIDEuNXMgZm9yd2FyZHMnO1xuICAgICAgICBwcm9qT3ZlcmxheS5zdHlsZS5hbmltYXRpb24gPSAncHJvamVjdFNsaWRlRG93biAxLjVzIGZvcndhcmRzJztcbiAgICB9KTtcbiAgICBzaWRlQmFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgaWYoZS50YXJnZXQudGFnTmFtZSA9PT0gJ1NQQU4nKXtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwidGhlIGZvbGxvd2luZyBpcyBlLnRhcmdldC52YWx1ZVwiKTtERUJVR0RFQlVHREVCVUdcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUudGFyZ2V0LnRleHRDb250ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IGRpc3BQcm9qID0gZmluZFByb2plY3RJbkFycihlLnRhcmdldC50ZXh0Q29udGVudClcbiAgICAgICAgICAgIGRpc3BsYXlQcm9qZWN0SW5NYWluKGRpc3BQcm9qKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSIsImltcG9ydCB7IG1lbnVFdmVudExpc3RlbiwgcHJvakFyciB9IGZyb20gXCIuL21lbnVFdmVudExpc3RlbmVyc1wiO1xuaW1wb3J0IHsgYWRkUHJvamVjdFRvU2lkZWJhciwgZGlzcGxheVByb2plY3RJbk1haW4gfSBmcm9tIFwiLi9wcm9qZWN0RE9NXCI7XG5pbXBvcnQgeyBwcm9qZWN0T3ZlcmxheVN0dWZmIH0gZnJvbSBcIi4vcHJvamVjdEZvcm1cIjtcbmltcG9ydCB7IHRhc2tPdmVybGF5TGlzdGVuZXJzLCBfdGFza1N1Ym1pdCB9IGZyb20gXCIuL3Rhc2tGb3JtXCI7XG5pbXBvcnQgeyBwcm9qZWN0RUxpc3RlbmVycyB9IGZyb20gXCIuL3Byb2plY3RFdmVudExpc3RlbmVyc1wiO1xuaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuL3Byb2plY3RDbGFzc1wiO1xuXG5tZW51RXZlbnRMaXN0ZW4oKTtcbnByb2plY3RPdmVybGF5U3R1ZmYoKTtcbmNvbnN0IGRlZlByb2ogPSBuZXcgUHJvamVjdChcImRlZmF1bHRQcm9qZWN0XCIsIFwiVGhpcyBpcyBhIGRlZmF1bHQgcHJvamVjdC4gWW91IGNhbiBhbHNvIGNyZWF0ZSB5b3VyIG93biA6KVwiKTtcbnByb2pBcnJbMF0gPSBkZWZQcm9qO1xuZGlzcGxheVByb2plY3RJbk1haW4oZGVmUHJvaik7XG5hZGRQcm9qZWN0VG9TaWRlYmFyKFwiZGVmYXVsdFByb2plY3RcIik7XG4vL3Byb2plY3RFTGlzdGVuZXJzKCk7Ly9USElTIFdBUyBDT01NRU5URUQgT1VUXG4vL3Rhc2tPdmVybGF5TGlzdGVuZXJzKCk7Ly9USElTIFdBUyBDT01NRU5URUQgT1VUIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJkb2N1bWVudCIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsZW5ndGgiLCJpIiwiRXJyb3IiLCJyZXBsYWNlIiwicCIsIlRhc2siLCJjb25zdHJ1Y3RvciIsInRUaXRsZSIsInREZXNjIiwidER1ZSIsInRQcmlvIiwidFByb2oiLCJuZXd0VGl0bGUiLCJfdFRpdGxlIiwibmV3dERlc2MiLCJfdERlc2MiLCJuZXd0RHVlIiwiX3REdWUiLCJuZXd0UHJpbyIsIl90UHJpbyIsIm5ld3RQcm9qIiwiX3RQcm9qIiwiUHJvamVjdCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJ0b0RvcyIsIm5ld1Rhc2siLCJUdGl0bGUiLCJUZGVzYyIsIlRkdWUiLCJUcHJpbyIsIlRwcm9qIiwidCIsInB1c2giLCJmaW5kVGFzayIsInRpdGxlTmFtZSIsInJlbW92ZVRhc2tGcm9tQXJyIiwic3BsaWNlIiwicHJpbnRUYXNrcyIsImNvbnNvbGUiLCJsb2ciLCJudW1PZlRhc2tzIiwiX3RpdGxlIiwiX2Rlc2NyaXB0aW9uIiwidG9Eb0xpc3QiLCJuZXdUaXRsZSIsIm5ld0Rlc2MiLCJwcm9qT3ZlcmxheSIsInF1ZXJ5U2VsZWN0b3IiLCJkaXNwbGF5TmVlZFRpdGxlIiwiZXJyb3JPdmVybGF5Iiwic3R5bGUiLCJhbmltYXRpb24iLCJzZXRUaW1lb3V0IiwicHJvamVjdEZvcm1DbGVhciIsImdldEVsZW1lbnRCeUlkIiwidmFsdWUiLCJ0YXNrRWRpdEJ1dHRvbiIsInRhc2tSZW1CdXR0b24iLCJfdGFza1Rlc3RlcmluZyIsInRhc2tOYW1lIiwidGFyZ2V0IiwicGFyZW50RWxlbWVudCIsInRleHRDb250ZW50IiwibWF0Y2hlcyIsInRhc2siLCJ0YXNrT3ZlcmxheSIsInRhc2tUaXRsZUZvcm0iLCJkcXMiLCJ0YXNrRGF0ZUZvcm0iLCJlZGl0VGFza0Zvcm0iLCJmaW5kUHJvamVjdEluQXJyIiwicHJvalJlbSIsInVsUGFyZW50IiwibGlUYXNrQ2hpbGRyZW4iLCJjaGlsZHJlbiIsInJlbW92ZUNoaWxkIiwiY2xlYXJUYXNrTWFpbiIsImRpc3BsYXlUYXNrSW5NYWluIiwicHJvalVMIiwidGFza0xJIiwiY3JlYXRlRWxlbWVudCIsImRhdGVEaXNwIiwiY2xhc3NMaXN0IiwiYWRkIiwiYnV0dG9uRGl2IiwidGFza0NoZWNrYm94IiwidHlwZSIsInRhc2tEYXRlSW5wdXQiLCJ0YXNrRWRpdERpdiIsInRhc2tSZW1vdmVEaXYiLCJ0YXNrRWRpdEljb24iLCJJbWFnZSIsInRhc2tSZW1vdmVJY29uIiwiYXBwZW5kQ2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwidGFza0Nsb3NlIiwidGFza1N1Ym1pdCIsIl90YXNrU3VibWl0IiwibWFkZVRhc2siLCJwcm9qIiwidGFza1RpdGxlIiwidGFza0Rlc2MiLCJ0YXNrRHVlRGF0ZSIsInRhc2tQcmlvIiwiZm5kUHJvaiIsInRhc2tNYWRlIiwidGFza0Zvcm1DbGVhciIsImV4dHJhY3REYXRhRm9yVGFzayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJwcm9qT3ZlcmxheTEiLCJlZGl0QnV0dG9uQ2xpY2tlZCIsImN1cnJUaXRsZTIiLCJfdGVzdGVyaW5nIiwiZWRpdEJ1dHRvbiIsInJlbW92ZUJ1dHRvbiIsImFkZFRhc2tCdXR0b24iLCJjdXJyVGl0bGUiLCJwcm9qZWN0VGl0bGUiLCJzaWRlYmFyUHJvaiIsInNpZGViYXJQcm9qQ2hpbGRyZW4iLCJyZW1vdmVQcm9qZWN0RnJvbVNpZGViYXIiLCJwcm9qQXJyIiwicmVtb3ZlUHJvakFyciIsImNsZWFyTWFpbiIsImluZGV4IiwibWFpblNlYyIsImFkZFByb2plY3RUb1NpZGViYXIiLCJwcm9qU2lkZSIsInByb2pUaXRsZSIsImRpc3BsYXlQcm9qZWN0SW5NYWluIiwicHJvamVjdCIsInByb2pEaXYiLCJ0YXNrU2VjVUwiLCJwcm9qQ2hlY2tib3giLCJwcm9qTmFtZVNwYW4iLCJtYWluTW9kUHJvalRpdGxlIiwic2xpY2UiLCJidXR0b25Db250IiwiYWRkRGl2IiwiZWRpdERpdiIsInJlbW92ZURpdiIsImFkZEljb24iLCJlZGl0SWNvbiIsInJlbUljb24iLCJ0YXNrQXJyIiwiY2hlY2tGb3JUYXNrcyIsImZpcnN0Q2hpbGQiLCJjIiwibWVudUNvbnRhaW5lciIsIm1haW5Mb2dvQ29udCIsImNsb3NlQ29udGFpbmVyIiwiY3JlYXRlUHJvakNvbnQiLCJtZW51SWNvbiIsIm1haW5Mb2dvSW1nIiwiY2xvc2VJY29uIiwiY3JlYXRlUHJvakljb24iLCJzaWRlQmFyIiwidGFnTmFtZSIsIm1lbnVFdmVudExpc3RlbiIsImNsb3NlQnV0dG9uIiwic3VibWl0QnV0dG9uIiwicHJvamVjdFBhcmFtIiwidGl0bGVJbnB1dCIsImRlc2NJbnB1dCIsInByb2plY3RNYWRlIiwiZXh0cmFjdERhdGFGb3JQcm9qZWN0IiwicmVwbGFjZVRpdGxlIiwiZWRpdFByb2plY3RJbkFyciIsImVkaXRQcm9qZWN0SW5TaWRlYmFyIiwicHJvamVjdE92ZXJsYXlTdHVmZiIsImRlZlByb2oiXSwic291cmNlUm9vdCI6IiJ9